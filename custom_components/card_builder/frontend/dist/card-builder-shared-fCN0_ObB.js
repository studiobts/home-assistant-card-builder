import{p as t,c as e,s as r,h as n,e as i,t as a,f as o,m as s,g as u,i as l,j as c,k as f,l as p,n as d,o as g,q as h,u as v,v as m,w as b,x,y as S,z as y,D as E,A as D,B as C,C as R,E as M,F as O,G as z,H as T,I as w,J as P,K as G,L as B,M as I,N as _,O as A,P as k,Q as F,R as N,S as W,T as q,U as H,V as Y,W as X,X as L,Y as j,Z as V,$ as U,a0 as Z,a1 as K,a2 as J,a3 as $,a4 as Q,a5 as tt,a6 as et,a7 as rt,a8 as nt,a9 as it,aa as at,ab as ot,ac as st,ad as ut,ae as lt,af as ct,ag as ft,ah as pt,ai as dt,aj as gt,ak as ht,al as vt,am as mt,an as bt,ao as xt,ap as St,aq as yt,ar as Et,as as Dt,at as Ct,au as Rt,av as Mt,aw as Ot,ax as zt,ay as Tt,az as wt,aA as Pt}from"./card-builder-shared-BlFcJoge.js";var Gt=function(t,e){return(Gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function Bt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Gt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var It=function(){return It=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},It.apply(this,arguments)};function _t(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,a=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function At(t,e,r){if(2===arguments.length)for(var n,i=0,a=e.length;i<a;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}function kt(t,e){return It({events:[],props:[],name:t},e)}var Ft=["n","w","s","e"],Nt=["n","w","s","e","nw","ne","sw","se"];var Wt,qt,Ht=St(),Yt=Ht.browser.webkit,Xt=Yt&&(Wt="undefined"==typeof window?{userAgent:""}:window.navigator,!!(qt=/applewebkit\/([^\s]+)/g.exec(Wt.userAgent.toLowerCase()))&&parseFloat(qt[1])<605),Lt=Ht.browser.name,jt=parseInt(Ht.browser.version,10),Vt="chrome"===Lt,Ut=Ht.browser.chromium,Zt=parseInt(Ht.browser.chromiumVersion,10)||0,Kt=Vt&&jt>=109||Ut&&Zt>=109,Jt="firefox"===Lt,$t=parseInt(Ht.browser.webkitVersion,10)>=612||jt>=15,Qt="moveable-",te=Nt.map(function(t){var e="",r="",n="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(r="left: ".concat(a,";"),n="right"),t.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(r).concat(e,"\n        transform-origin: ").concat(n," ").concat(i,";\n    }")}).join("\n"),ee="\n{\nposition: absolute;\nwidth: 1px;\nheight: 1px;\nleft: 0;\ntop: 0;\nz-index: 3000;\n--moveable-color: #4af;\n--zoom: 1;\n--zoompx: 1px;\n--moveable-line-padding: 0;\n--moveable-control-padding: 0;\nwill-change: transform;\noutline: 1px solid transparent;\n}\n.control-box {\nz-index: 0;\n}\n.line, .control {\nposition: absolute;\nleft: 0;\ntop: 0;\nwill-change: transform;\n}\n.control {\nwidth: 14px;\nheight: 14px;\nborder-radius: 50%;\nborder: 2px solid #fff;\nbox-sizing: border-box;\nbackground: #4af;\nbackground: var(--moveable-color);\nmargin-top: -7px;\nmargin-left: -7px;\nborder: 2px solid #fff;\nz-index: 10;\n}\n.around-control {\nposition: absolute;\nwill-change: transform;\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\nheight: calc(var(--moveable-control-padding, 20) * 1px);\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\nbox-sizing: border-box;\nbackground: transparent;\nz-index: 8;\ncursor: alias;\ntransform-origin: center center;\n}\n".concat(te,"\n.padding {\nposition: absolute;\ntop: 0px;\nleft: 0px;\nwidth: 100px;\nheight: 100px;\ntransform-origin: 0 0;\n}\n.line {\nwidth: 1px;\nheight: 1px;\nbackground: #4af;\nbackground: var(--moveable-color);\ntransform-origin: 0px 50%;\n}\n.line.edge {\nz-index: 1;\nbackground: transparent;\n}\n.line.dashed {\nbox-sizing: border-box;\nbackground: transparent;\n}\n.line.dashed.horizontal {\nborder-top: 1px dashed #4af;\nborder-top-color: #4af;\nborder-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\nborder-left: 1px dashed #4af;\nborder-left-color: #4af;\nborder-left-color: var(--moveable-color);\n}\n.line.vertical {\ntransform: translateX(-50%);\n}\n.line.horizontal {\ntransform: translateY(-50%);\n}\n.line.vertical.bold {\nwidth: 2px;\n}\n.line.horizontal.bold {\nheight: 2px;\n}\n\n.control.origin {\nborder-color: #f55;\nbackground: #fff;\nwidth: 12px;\nheight: 12px;\nmargin-top: -6px;\nmargin-left: -6px;\npointer-events: none;\n}\n").concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n").concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(1,t),r=45*Math.round(t/45)%180,n="ns-resize";return 135===r?n="nwse-resize":45===r?n="nesw-resize":90===r&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")}(t),"\n}\n")}).join("\n"),'\n\n.line.direction:before {\ncontent: "";\nposition: absolute;\nwidth: 100%;\nheight: calc(var(--moveable-line-padding, 0) * 1px);\nbottom: 0;\nleft: 0;\n}\n.group {\nz-index: -1;\n}\n.area {\nposition: absolute;\n}\n.area-pieces {\nposition: absolute;\ntop: 0;\nleft: 0;\ndisplay: none;\n}\n.area.avoid, .area.pass {\npointer-events: none;\n}\n.area.avoid+.area-pieces {\ndisplay: block;\n}\n.area-piece {\nposition: absolute;\n}\n\n').concat(Xt?':global svg *:before {\ncontent:"";\ntransform-origin: inherit;\n}':"","\n"),re=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],ne=1e-4,ie=1e-7,ae=1e-9,oe=Math.pow(10,10),se=-oe,ue={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},le={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},ce={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},fe=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function pe(t,e,r,n,i,a){var o,s;void 0===a&&(a="draggable");var u=null!==(s=null===(o=e.gestos[a])||void 0===o?void 0:o.move(r,t.inputEvent))&&void 0!==s?s:{},l=u.originalDatas||u.datas,c=l[a]||(l[a]={});return It(It({},u),{isPinch:!!n,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var de=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}return t.prototype.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var r=e.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),It(It({},this.move(t,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},t.prototype.move=function(t,e){var r,n,i=!1;if(this.isFlag){var a=this.isDrag;r=this.prevX+t[0],n=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!a&&this.isDrag&&(i=!0)}else this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],n=t[1],this.isFlag=!0;return this.prevX=r,this.prevY=n,{type:"drag",clientX:r,clientY:n,inputEvent:e,isFirstDrag:i,isDrag:this.isDrag,distX:r-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function ge(t,e,r,n){var i=16===t.length?4:3,a=_t(Yn(t,r,n,i),4),o=_t(a[0],2),s=o[0],u=o[1],l=_t(a[1],2),c=l[0],f=l[1],p=_t(a[2],2),d=p[0],g=p[1],h=_t(a[3],2),v=h[0],m=h[1],b=_t(Hn(t,e,i),2),x=b[0],S=b[1],y=Math.min(s,c,d,v),E=Math.min(u,f,g,m),D=Math.max(s,c,d,v);return s=s-y||0,{left:y,top:E,right:D,bottom:Math.max(u,f,g,m),origin:[x=x-y||0,S=S-E||0],pos1:[s,u=u-E||0],pos2:[c=c-y||0,f=f-E||0],pos3:[d=d-y||0,g=g-E||0],pos4:[v=v-y||0,m=m-E||0],direction:Ai(t[0]*t[i+1])}}function he(t,e){var r=e.clientX,n=e.clientY,i=e.datas,a=t.state,o=a.moveableClientRect,u=a.rootMatrix,l=a.is3d,c=a.pos1,f=o.left,p=o.top,d=_t(s(yi(u,[r-f,n-p],l?4:3),c),2),g=_t(ye({datas:i,distX:d[0],distY:d[1]}),2);return[g[0],g[1]]}function ve(t,e){var r=e.datas,n=t.state,a=n.allMatrix,o=n.beforeMatrix,s=n.is3d,u=n.left,l=n.top,c=n.origin,f=n.offsetMatrix,p=n.targetMatrix,d=n.transformOrigin,g=s?4:3;r.is3d=s,r.matrix=a,r.targetMatrix=p,r.beforeMatrix=o,r.offsetMatrix=f,r.transformOrigin=d,r.inverseMatrix=m(a,g),r.inverseBeforeMatrix=m(o,g),r.absoluteOrigin=B(i([u,l],c),g),r.startDragBeforeDist=x(r.inverseBeforeMatrix,r.absoluteOrigin,g),r.startDragDist=x(r.inverseMatrix,r.absoluteOrigin,g)}function me(t,e,r){var n=e.datas,i=e.originalDatas.beforeRenderable,a=n.transformIndex,o=i.nextTransforms,s=o.length,u=i.nextTransformAppendedIndexes,l=-1;-1===a?("translate"===r?l=0:"rotate"===r&&(l=P(o,function(t){return t.match(/scale\(/g)})),-1===l&&(l=o.length),n.transformIndex=l):l=w(u,function(t){return t.index===a&&t.functionName===r})?a:a+u.filter(function(t){return t.index<a}).length;var c=function(t,e,r){var n,i=z(t,{"x%":function(t){return t/100*e.offsetWidth},"y%":function(t){return t/100*e.offsetHeight}}),a=t.slice(0,r<0?void 0:r),o=t.slice(0,r<0?void 0:r+1),s=t[r]||"",u=r<0?[]:t.slice(r),l=r<0?[]:t.slice(r+1),c=i.slice(0,r<0?void 0:r),f=i.slice(0,r<0?void 0:r+1),p=null!==(n=i[r])&&void 0!==n?n:z([""])[0],d=r<0?[]:i.slice(r),g=r<0?[]:i.slice(r+1),h=p?[p]:[],m=st(c),b=st(f),x=st(d),S=st(g),y=v(m,x,4);return{transforms:t,beforeFunctionMatrix:m,beforeFunctionMatrix2:b,targetFunctionMatrix:st(h),afterFunctionMatrix:x,afterFunctionMatrix2:S,allFunctionMatrix:y,beforeFunctions:c,beforeFunctions2:f,targetFunction:h[0],afterFunctions:d,afterFunctions2:g,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:s,afterFunctionTexts:u,afterFunctionTexts2:l}}(o,t.state,l),f=c.targetFunction,p="rotate"===r?"rotateZ":r;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,f.functionName===p?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=At(At([],_t(u),!1),[{functionName:r,index:l,isAppend:!0}],!1))}function be(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function xe(t,e,r){var n=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=r?v(s,e,4):v(e,s,4),l=v(m(r?a:n,4),u,4);return v(l,m(r?o:i,4),4)}function Se(t){var e=t.datas,r=t.distX,n=t.distY,a=e.inverseBeforeMatrix,o=e.is3d,u=e.startDragBeforeDist,l=e.absoluteOrigin,c=o?4:3;return s(x(a,i(l,[r,n]),c),u)}function ye(t,e){var r=t.datas,n=t.distX,a=t.distY,o=r.inverseBeforeMatrix,u=r.inverseMatrix,l=r.is3d,c=r.startDragBeforeDist,f=r.startDragDist,p=r.absoluteOrigin,d=l?4:3;return s(x(e?o:u,i(p,[n,a]),d),e?c:f)}function Ee(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function De(t,e){var r=(e+1)/2;return[N(t[0][0],t[1][0],r,1-r),N(t[0][1],t[1][1],r,1-r)]}function Ce(t,e){var r=De([t[0],t[1]],e[0]),n=De([t[2],t[3]],e[0]);return De([r,n],e[1])}function Re(t,e,r,n){return v(t,wn(e,n,r),n)}function Me(t,e){var n=we(e);return{setTransform:function(i,a){void 0===a&&(a=-1),n.startTransforms=d(i)?i:r(i),ze(t,e,a)},setTransformIndex:function(r){ze(t,e,r)}}}function Oe(t,e,r){var n=we(e).startTransforms;ze(t,e,P(n,function(t){return 0===t.indexOf("".concat(r,"("))}))}function ze(t,e,r){var n=we(e),i=e.datas;if(i.transformIndex=r,-1!==r){var a=n.startTransforms[r];if(a){var o=t.state,s=z([a],{"x%":function(t){return t/100*o.offsetWidth},"y%":function(t){return t/100*o.offsetHeight}});i.startValue=s[0].functionValue}}}function Te(t,e){we(t).nextTransforms=r(e)}function we(t){return t.originalDatas.beforeRenderable}function Pe(t){return t.originalDatas.beforeRenderable.nextTransforms}function Ge(t){return(Pe(t)||[]).join(" ")}function Be(t){return we(t).nextStyle}function Ie(t,e,r,n,i){Te(i,e);var a=jr.drag(t,pe(i,t.state,r,n)),o=a?a.transform:e;return It(It({transform:e,drag:a},ui({transform:o},i)),{afterTransform:o})}function _e(t,e,r,n,i,a){var o=function(t,e,r,n){var i,a=t.transformOrigin,o=t.offsetMatrix,s=t.is3d?4:3;if(p(r)){var u=e.beforeTransform,f=e.afterTransform;i=c(n?l(r):v(v(u,l([r]),4),f,4),4,s)}else i=r;return Re(o,i,a,s)}(t.state,i,e,a),s=function(t,e,r,n){void 0===n&&(n=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,s=i.is3d?4:3,u=[a/2*(1+e[0])+r[0],o/2*(1+e[1])+r[1]];return Hn(n,u,s)}(t,r,n,o);return s}function Ae(t,e,r,n,i,a,o){var u=_e(t,e,r,i,a,o),l=t.state,c=l.left,f=l.top,p=t.props.groupable,d=p?c:0,g=p?f:0,h=s(n,u);return s(h,[d,g])}function ke(t,e,r,n,i,a){var o=t.props.groupable,u=t.state,l=u.transformOrigin,c=u.offsetMatrix,f=u.is3d,p=u.width,d=u.height,g=u.left,h=u.top,v=a.fixedDirection,m=a.nextTargetMatrix||u.targetMatrix,b=f?4:3,x=function(t,e,r,n,i,a){return void 0===n&&(n=e),void 0===i&&(i=r),void 0===a&&(a=[0,0]),t?t.map(function(t,o){var s=V(t),u=s.value,l=s.unit,c=o?i:n,f=o?r:e;return"%"===t||isNaN(u)?f*(c?a[o]/c:0):"%"!==l?u:f*u/100}):a}(i,e,r,p,d,l),S=o?g:0,y=o?h:0,E=function(t,e,r,n,i,a){var o=Ce(Yn(e,r,n,i),a);return[t[0]-o[0],t[1]-o[1]]}(n,Re(c,m,x,b),e,r,b,v);return s(E,[S,y])}function Fe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function Ne(t){var e=t("scale"),r=t("rotate"),n=t("translate"),i=[];return n&&"0px"!==n&&"none"!==n&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&"1"!==r&&"none"!==r&&i.push("rotate(".concat(r,")")),e&&"1"!==e&&"none"!==e&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function We(t,e,r){for(var n,i,a,o=t,s=[],u=vt(t)||mt(t),f=!r&&t===e||t===u,p=f,d=!1,g=3,h=!1,v=In(e,e,!0).offsetParent,m=1;o&&!p;){p=f;var b=Le(o),x=b("position"),y=Bn(o),E="fixed"===x,D=Ne(b),C=xt(Tn(y)),R=void 0,M=!1,O=!1,z=0,T=0,w=0,P=0,G={hasTransform:!1,fixedContainer:null};E&&(h=!0,v=(G=Fn(o)).fixedContainer);var B=C.length;d||16!==B&&!D.length||(d=!0,g=4,kn(s),a&&(a=c(a,3,4))),d&&9===B&&(C=c(C,3,4));var I=_n(o,t),_=I.tagName,A=I.hasOffset,k=I.isSVG,F=I.origin,N=I.targetOrigin,W=_t(I.offset,2),q=W[0],H=W[1];"svg"===_&&!o.ownerSVGElement&&a&&(s.push({type:"target",target:o,matrix:qn(o,g)}),s.push({type:"offset",target:o,matrix:S(g)}));var Y=parseFloat(b("zoom"))||1;if(E)R=G.fixedContainer,M=!0;else{var X=In(o,e,!1,!0,b),L=X.offsetZoom;if(R=X.offsetParent,M=X.isEnd,O=X.isStatic,m*=L,(X.isCustomElement||1!==L)&&O)q-=R.offsetLeft,H-=R.offsetTop;else if(Jt||Kt){if(X.parentSlotElement){for(var j=R,V=0,U=0;j&&Fe(j);)V+=j.offsetLeft,U+=j.offsetTop,j=j.offsetParent;q-=V,H-=U}}}if(!Yt||$t||!A||k||!O||"relative"!==x&&"static"!==x||(q-=R.offsetLeft,H-=R.offsetTop,f=f||M),E)A&&G.hasTransform&&(w=R.clientLeft,P=R.clientTop);else if(A&&v!==R&&(z=R.clientLeft,T=R.clientTop),A&&R===u){var Z=An(o,!1);q+=Z[0],H+=Z[1]}if(s.push({type:"target",target:o,matrix:wn(C,g,F)}),D.length&&(s.push({type:"offset",target:o,matrix:S(g)}),s.push({type:"target",target:o,matrix:wn(l(D),g,F)})),A){var K=o===t,J=K?0:o.scrollLeft,$=K?0:o.scrollTop;s.push({type:"offset",target:o,matrix:tt([q-J+z-w,H-$+T-P],g)})}else s.push({type:"offset",target:o,origin:F});if(1!==Y&&s.push({type:"zoom",target:o,matrix:wn(ht([Y,Y],g),g,[0,0])}),a||(a=C),n||(n=F),i||(i=N),p||E)break;o=R,f=M,r&&o!==u||(p=f)}return a||(a=S(g)),n||(n=[0,0]),i||(i=[0,0]),{zoom:m,offsetContainer:v,matrixes:s,targetMatrix:a,transformOrigin:n,targetOrigin:i,is3d:d,hasFixed:h}}var qe=null,He=null,Ye=null;function Xe(t){t?(window.Map&&(qe=new Map,He=new Map),Ye=[]):(qe=null,Ye=null,He=null)}function Le(t){var e=null==qe?void 0:qe.get(t);if(!e){var r=it(t).getComputedStyle(t);if(!qe)return function(t){return r[t]};e={style:r,cached:{}},qe.set(t,e)}var n=e.cached,i=e.style;return function(t){return t in n||(n[t]=i[t]),n[t]}}function je(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(t,n){return a[n]=a[n]||{},a[n][e]=a[n][e]||{},It(It({},r),{isRequestChild:!0,datas:a[n][e],originalDatas:a[n]})})}function Ve(t,e,r,n,i,a,o){var s=!!r.match(/Start$/g),u=!!r.match(/End$/g),l=i.isPinch,c=i.datas,f=je(t,e.name,i),p=t.moveables,d=[],g=f.map(function(t,i){var a=p[i],f=a.state,g=f.gestos,h=t;if(s)h=new de(o).dragStart(n,t),d.push(h);else{if(g[o]||(g[o]=c.childGestos[i]),!g[o])return;h=pe(t,f,n,l,0,o),d.push(h)}var v=e[r](a,It(It({},h),{parentFlag:!0}));return u&&(g[o]=null),v});return s&&(c.childGestos=p.map(function(t){return t.state.gestos[o]})),{eventParams:g,childEvents:d}}function Ue(t,e,r,n,i,a){void 0===i&&(i=function(t,e){return e});var o=!!r.match(/End$/g),s=je(t,e.name,n),u=t.moveables;return s.map(function(t,n){var a,s=u[n];a=i(s,t);var l=e[r](s,It(It({},a),{parentFlag:!0}));return o&&(s.state.gestos={}),l})}function Ze(t,e,r,n){var i=r.fixedDirection,a=r.fixedPosition,o=Ce(n.datas.startPositions||ai(e.state),i),s=_t(x(A(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=s[0],l=s[1];return n.datas.originalX=u,n.datas.originalY=l,n}function Ke(t,e,r,n){var i=t.getState(),a=i.renderPoses,s=i.rotation,u=i.direction,l=Kn(t.props,e).zoom,c=xn(s/Math.PI*180),f={},p=t.renderState;p.renderDirectionMap||(p.renderDirectionMap={});var d=p.renderDirectionMap;r.forEach(function(t){var e=t.dir;f[e]=!0});var g=Ai(u);return r.map(function(t){var r=t.data,i=t.classNames,u=t.dir,p=le[u];if(!p||!f[u])return null;d[u]=!0;var h=(o(c,15)+g*ce[u]+720)%180,v={};return y(r).forEach(function(t){v["data-".concat(t)]=r[t]}),n.createElement("div",It({className:On.apply(void 0,At(["control","direction",u,e],_t(i),!1)),"data-rotation":h,"data-direction":u},v,{key:"direction-".concat(u),style:Zn.apply(void 0,At([s,l],_t(p.map(function(t){return a[t]})),!1))}))})}function Je(t,e,r,n){var i=Kn(t.props,r),a=i.renderDirections,o=void 0===a?e:a,s=i.displayAroundControls;if(!o)return[];var u=!0===o?Nt:o;return At(At([],_t(s?rr(t,n,r,u):[]),!1),_t(Ke(t,r,u.map(function(t){return{data:{},classNames:[],dir:t}}),n)),!1)}function $e(t,e,r,n,i,a){for(var s=[],l=6;l<arguments.length;l++)s[l-6]=arguments[l];var c=u(r,n),f=e?o(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:On.apply(void 0,At(["line","direction",e?"edge":"",e],_t(s),!1)),"data-rotation":f,"data-line-key":a,"data-direction":e,style:Un(r,n,i,c)})}function Qe(t,e,r,n,i){return(!0===r?Ft:r).map(function(r,a){var o=_t(le[r],2),s=o[0],u=o[1];if(null!=u)return $e(t,r,n[s],n[u],i,"".concat(e,"Edge").concat(a),e)}).filter(Boolean)}function tr(t){return function(e,r){var n=Kn(e.props,t).edge;return n&&(!0===n||n.length)?At(At([],_t(Qe(r,t,n,e.getState().renderPoses,e.props.zoom)),!1),_t(function(t,e,r){return Je(t,["nw","ne","sw","se"],e,r)}(e,t,r)),!1):er(e,t,r)}}function er(t,e,r){return Je(t,Nt,e,r)}function rr(t,e,r,n){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,u=a.rotation,l=a.direction,c=i.renderDirectionMap,f=t.props.zoom,p=Ai(l),d=u/Math.PI*180;return(n||y(c)).map(function(t){var n=le[t];if(!n)return null;var i=(o(d,15)+p*ce[t]+720)%180,a=["around-control"];return r&&a.push("direction",r),e.createElement("div",{className:On.apply(void 0,At([],_t(a),!1)),"data-rotation":i,"data-direction":t,key:"direction-around-".concat(t),style:Zn.apply(void 0,At([u,f],_t(n.map(function(t){return s[t]})),!1))})})}function nr(t,e,r){var n=t||{},i=n.position,a=void 0===i?"client":i,o=n.left,s=void 0===o?-1/0:o,u=n.top,l=void 0===u?-1/0:u,c=n.right,f=void 0===c?1/0:c,p=n.bottom,d={position:a,left:s,top:l,right:f,bottom:void 0===p?1/0:p};return{vertical:ar(d,e,!0),horizontal:ar(d,r,!1)}}function ir(t,e){var r=t.state,n=r.containerClientRect,i=n.clientHeight,a=n.clientWidth,o=n.clientLeft,s=n.clientTop,u=r.snapOffset,l=u.left,c=u.top,f=u.right,p=u.bottom,d=e||t.props.bounds||{},g="css"===(d.position||"client"),h=d.left,v=void 0===h?-1/0:h,m=d.top,b=void 0===m?-1/0:m,x=d.right,S=void 0===x?g?-1/0:1/0:x,y=d.bottom,E=void 0===y?g?-1/0:1/0:y;return g&&(S=a+f-l-S,E=i+p-c-E),{left:v+l-o,right:S+l-o,top:b+c-s,bottom:E+c-s}}function ar(t,e,r){var n=t[r?"left":"top"],i=t[r?"right":"bottom"],a=Math.min.apply(Math,At([],_t(e),!1)),o=Math.max.apply(Math,At([],_t(e),!1)),s=[];return n+1>a&&s.push({direction:"start",isBound:!0,offset:a-n,pos:n}),i-1<o&&s.push({direction:"end",isBound:!0,offset:o-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,e){return ki(e.offset)-ki(t.offset)})}function or(t,e,r){return(r?t.map(function(t){return W(t,r)}):t).some(function(t){return t[0]<e.left&&ki(t[0]-e.left)>.1||t[0]>e.right&&ki(t[0]-e.right)>.1||t[1]<e.top&&ki(t[1]-e.top)>.1||t[1]>e.bottom&&ki(t[1]-e.bottom)>.1})}function sr(t,e,r,n,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=ir(t),l=s.left,c=s.top,f=s.right,p=s.bottom,d=l-n[0],g=f-n[0],h=c-n[1],v=p-n[1],m={left:d,top:h,right:g,bottom:v};if(!or(r,m,0))return[];var b=[];return[[d,0],[g,0],[h,1],[v,1]].forEach(function(t){var n=_t(t,2),i=n[0],s=n[1];r.forEach(function(t){var r=u([0,0],t);b.push.apply(b,At([],_t(function(t,e,r){var n=jn(t),i=Math.sqrt(n*n-e*e)||0;return[i,-i].sort(function(e,n){return ki(e-t[r?0:1])-ki(n-t[r?0:1])}).map(function(t){return u([0,0],r?[t,e]:[e,t])})}(t,i,s).map(function(t){return a+t-r}).filter(function(t){return!or(e,m,t)}).map(function(t){return o(180*t/Math.PI,ie)})),!1))})}),b}var ur=["left","right","center"],lr=["top","bottom","middle"],cr={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},fr={start:"left",end:"right",center:"center"},pr={start:"top",end:"bottom",center:"middle"};function dr(t,e){var r=t.props,n=r.snappable,i=r.bounds,a=r.innerBounds,o=r.verticalGuidelines,s=r.horizontalGuidelines,u=r.snapGridWidth,l=r.snapGridHeight,c=t.state,f=c.guidelines,p=c.enableSnap;return!(!n||!p||e&&!0!==n&&n.indexOf(e)<0)&&!!(u||l||i||a||f&&f.length||o&&o.length||s&&s.length)}function gr(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function hr(t,e){var r=function(t,e){var r=gr(t),n={};for(var i in r)i in e&&r[i]&&(n[i]=e[i]);return n}(t,e),n=lr.filter(function(t){return t in r}),i=ur.filter(function(t){return t in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(t){return r[t]}),vertical:i.map(function(t){return r[t]})}}var vr="snapRotationThreshold",mr="snapRotationDegrees",br="snapHorizontalThreshold",xr="snapVerticalThreshold";function Sr(t,e,r,n,i,a,o){var s;void 0===n&&(n=[]),void 0===i&&(i=[]);var u=t.props,l=(null===(s=t.state.snapThresholdInfo)||void 0===s?void 0:s.multiples)||[1,1],c=mi(o,u[br],5),f=mi(a,u[xr],5);return yr(t.state.guidelines,e,r,n,i,c,f,l)}function yr(t,e,r,n,i,a,o,s){return{vertical:Rr(t,"vertical",e,o*s[0],n),horizontal:Rr(t,"horizontal",r,a*s[1],i)}}function Er(t){var e="";return-1===t||"top"===t||"left"===t?e="start":0===t||"center"===t||"middle"===t?e="center":1!==t&&"right"!==t&&"bottom"!==t||(e="end"),e}function Dr(t,e,r,n){var i=hr(t.props.snapDirections,e),a=Sr(t,i.vertical,i.horizontal,i.verticalNames.map(function(t){return Er(t)}),i.horizontalNames.map(function(t){return Er(t)}),r,n),o=Er(i.horizontalNames[a.horizontal.index]),s=Er(i.verticalNames[a.vertical.index]);return{vertical:It(It({},a.vertical),{direction:s}),horizontal:It(It({},a.horizontal),{direction:o})}}function Cr(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],i=n.offset,a=n.dist,o=n.guideline;return{isSnap:e,offset:i,dist:a,pos:r.pos,guideline:o}}function Rr(t,e,r,n,i){var a,o;if(void 0===i&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s="vertical"===e?0:1,u=r.map(function(r,a){var o=i[a]||"",u=t.map(function(t){var e=t.pos,n=r-e[s];return{offset:n,dist:ki(n),guideline:t,direction:o}}).filter(function(t){var r=t.guideline,i=t.dist;return!(r.type!==e||i>n)}).sort(function(t,e){return t.dist-e.dist});return{pos:r,index:a,guidelineInfos:u,direction:o}}).filter(function(t){return t.guidelineInfos.length>0}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}),l=u.length>0;return{isSnap:l,index:l?u[0].index:-1,direction:null!==(o=null===(a=u[0])||void 0===a?void 0:a.direction)&&void 0!==o?o:"",posInfos:u}}function Mr(t,e,r,n,i){var a=[];r[0]&&r[1]?a=[r,[-r[0],r[1]],[r[0],-r[1]]]:r[0]||r[1]?t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],r):(a.push.apply(a,At([],_t(function(t,e){return Ee(e).map(function(e){return t[e]})}([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2])):[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(t,e,r){var n=r[e+1]||r[0];a.push(t),a.push([(t[0]+n[0])/2,(t[1]+n[1])/2])});var o=a.map(function(t){return Ce(e,t)}),s=Sr(t,o.map(function(t){return t[0]}),o.map(function(t){return t[1]}),a.map(function(t){return Er(t[0])}),a.map(function(t){return Er(t[1])}),n,i),u=Er(a.map(function(t){return t[0]})[s.vertical.index]),l=Er(a.map(function(t){return t[1]})[s.horizontal.index]);return{vertical:It(It({},s.vertical),{direction:u}),horizontal:It(It({},s.horizontal),{direction:l})}}function Or(t,e){var r=ki(t.offset),n=ki(e.offset);return t.isBound&&e.isBound?n-r:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?n-r:t.isSnap?-1:e.isSnap||r<ie?1:n<ie?-1:r-n}function zr(t,e){return t.slice().sort(function(t,r){var n=t.sign[e],i=r.sign[e],a=t.offset[e],o=r.offset[e];return n?i?Or({isBound:t.isBound,isSnap:t.isSnap,offset:a},{isBound:r.isBound,isSnap:r.isSnap,offset:o}):-1:1})[0]}function Tr(t,e){var r=gt([e[0][0],e[1][0]]),n=gt([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function wr(t,e){var r,n,i=_t(e,2),a=i[0],o=i[1],s=o[0]-a[0],u=o[1]-a[1];if(ki(s)<ie&&(s=0),ki(u)<ie&&(u=0),s)if(u){r=u/s*(t[0]-a[0])+a[1],n=t[1]}else r=a[1],n=t[1];else r=a[0],n=t[0];return r-n}function Pr(t,e,r,n){return void 0===n&&(n=ie),t.every(function(t){var i=wr(t,e);return i<=0===r||ki(i)<=n})}function Gr(t,e,r,n,i){return void 0===i&&(i=0),n&&e-i<=t||!n&&t<=r+i?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function Br(t,e,r,n,i,a){var o,s,u=_t(e,2),l=u[0],c=u[1],f=t[0],p=r[0],d=r[1],g=Ci(d[1]-p[1]),h=c,v=l,m=-l/c;return Ci(d[0]-p[0])?g||a&&!h?{isBound:!1,offset:0}:v?Gr((p[1]-f[1])/m+f[0],p[0],d[0],n,i):{isBound:s=ki(o=p[1]-f[1])<=(i||0),offset:s?o:0}:a&&!v?{isBound:!1,offset:0}:h?Gr(m*(p[0]-f[0])+f[1],p[1],d[1],n,i):{isBound:s=ki(o=p[0]-f[0])<=(i||0),offset:s?o:0}}function Ir(t,e,r){return e.map(function(e){var n=function(t,e){var r=e.line,n=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,c=s.width,f=s.height,p=[[u,l],[u,l+f]],d=[[u,l],[u+c,l]],g=[[u+c,l],[u+c,l+f]],h=[[u,l+f],[u+c,l+f]];if(Pr([[u,l],[u+c,l],[u,l+f],[u+c,l+f]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var v=Br(r,o,d,i),m=Br(r,o,h,i),b=Br(r,o,p,a),x=Br(r,o,g,a),S=v.isBound&&m.isBound,y=v.isBound||m.isBound,E=b.isBound&&x.isBound,D=b.isBound||x.isBound,C=Si(v.offset,m.offset),R=Si(b.offset,x.offset),M=[0,0],O=!1,z=!1;return ki(R)<ki(C)?(M=[C,0],O=y,z=S):(M=[0,R],O=D,z=E),{isAllBound:z,isVerticalBound:y,isHorizontalBound:D,isBound:O,offset:M}}(t,e),i=n.isBound,a=n.offset,o=n.isVerticalBound,s=n.isHorizontalBound,u=e.multiple,l=ye({datas:r,distX:a[0],distY:a[1]}).map(function(t,e){return t*(u[e]?2/u[e]:0)});return{sign:u,isBound:i,isVerticalBound:o,isHorizontalBound:s,isSnap:!1,offset:l}})}function _r(t,e,r){var n,a=Ir(t,Ar(t,e,[0,0],!1).map(function(t){return It(It({},t),{multiple:t.multiple.map(function(t){return 2*ki(t)})})}),r),o=zr(a,0),u=zr(a,1),l=0,c=0,f=o.isVerticalBound||u.isVerticalBound,p=o.isHorizontalBound||u.isHorizontalBound;return(f||p)&&(n=_t(function(t){var e=t.datas,r=t.distX,n=t.distY;e.beforeMatrix;var a=e.matrix,o=e.is3d;e.startDragBeforeDist;var u=e.startDragDist,l=e.absoluteOrigin,c=o?4:3;return s(x(a,i(u,[r,n]),c),l)}({datas:r,distX:-o.offset[0],distY:-u.offset[1]}),2),l=n[0],c=n[1]),{vertical:{isBound:f,offset:l},horizontal:{isBound:p,offset:c}}}function Ar(t,e,r,n){var i=t.state,a=Yn(i.allMatrix,100,100,i.is3d?4:3),s=Ce(a,[0,0]);return function(t,e){var r=[],n=t[0],i=t[1];return n&&i?r.push([[0,2*i],t,[-n,i]],[[2*n,0],t,[n,-i]]):n?(r.push([[2*n,0],[n,1],[n,-1]]),e&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(r.push([[0,2*i],[1,i],[-1,i]]),e&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}(r,n).map(function(t){var r=_t(t,3),n=r[0],i=r[1],u=r[2],l=[Ce(a,i),Ce(a,u)],c=function(t){var e=_t(t,2),r=e[0],n=e[1],i=n[0]-r[0],a=n[1]-r[1];Math.abs(i)<ut&&(i=0),Math.abs(a)<ut&&(a=0);var s=0,u=0,l=0;return i?a?(u=1,l=(s=-a/i)*r[0]-r[1]):(u=1,l=-r[1]):(s=-1,l=r[0]),[s,u,l].map(function(t){return o(t,ut)})}(l),f=Tr(s,l),p=f.vertical,d=f.horizontal;return{multiple:n,centerSign:wr(s,l)<=0,verticalSign:p,horizontalSign:d,lineConstants:c,line:[Ce(e,i),Ce(e,u)]}})}function kr(t,e,r,n){var i=n?t.map(function(t){return W(t,n)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t){var n=wr(r,t)<=0;return!Pr(e,t,n)})}function Fr(t,e,r,n,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var l=a.left,c=a.top,f=a.width,p=a.height,d=l-n[0],g=l+f-n[0],h=c-n[1],v=c+p-n[1],m=[[d,h],[g,h],[d,v],[g,v]],b=Ce(r,[0,0]);if(!kr(r,m,b,0))return[];var x=[],S=m.map(function(t){return[jn(t),u([0,0],t)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(t){var r=u([0,0],function(t){var e=_t(t,2),r=e[0],n=e[1],i=n[0]-r[0],a=n[1]-r[1];if(!i)return[r[0],0];if(!a)return[0,r[1]];var o=a/i,s=-o*r[0]+r[1];return[-s/(o+1/o),s/(o*o+1)]}(t)),n=function(t){var e=_t(t,2),r=e[0],n=e[1],i=n[0]-r[0],a=n[1]-r[1];if(!i)return ki(r[0]);if(!a)return ki(r[1]);var o=a/i;return ki((-o*r[0]+r[1])/Math.sqrt(Math.pow(o,2)+1))}(t);x.push.apply(x,At([],_t(S.filter(function(t){var e=_t(t,1)[0];return e&&n<=e}).map(function(t){var e=_t(t,2),i=e[0],a=e[1],o=Math.acos(i?n/i:0);return[s+(a+o)-r,s+(a-o)-r]}).reduce(function(t,e){return t.push.apply(t,At([],_t(e),!1)),t},[]).filter(function(t){return!kr(e,m,b,t)}).map(function(t){return o(180*t/Math.PI,ie)})),!1))}),x}function Nr(t,e,r,n,i){var a=function(t,e,r,n){var i=e[0]-t[0],a=e[1]-t[1];if(ki(i)<ut&&(i=0),ki(a)<ut&&(a=0),!i)return n?[0,0]:[0,r];if(!a)return n?[r,0]:[0,0];var o=a/i,s=t[1]-o*t[0];return n?[r,o*(e[0]+r)+s-e[1]]:[(e[1]+r-s)/o-e[0],r]}(t,e,r,n);if(!a)return{isOutside:!1,offset:[0,0]};var o=g(t,e),s=g(a,t),u=g(a,e),l=s>o||u>o,c=_t(ye({datas:i,distX:a[0],distY:a[1]}),2);return{offset:[c[0],c[1]],isOutside:l}}function Wr(t,e){return t.isBound?t.offset:e.isSnap?Cr(e).offset:0}function qr(t,e,r,n,i,a){if(!dr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=ii(a.absolutePoses,[e,r]),u=Xn(o),l=u.left,c=u.right,f=u.top,p=u.bottom,d={horizontal:o.map(function(t){return t[1]}),vertical:o.map(function(t){return t[0]})},g=Hr(t,i,hr(gr(t.props.snapDirections),{left:l,right:c,top:f,bottom:p,center:(l+c)/2,middle:(f+p)/2}),d),h=g.vertical,v=g.horizontal,m=_r(t,o,a),b=m.vertical,x=m.horizontal,S=h.isSnap,y=v.isSnap,E=h.isBound||b.isBound,D=v.isBound||x.isBound,C=_t(function(t,e,r,n,i){var a=_t(e,2),o=a[0],u=a[1],l=_t(r,2),c=l[0],f=l[1],p=_t(n,2),d=p[0],g=p[1],h=_t(i,2),v=h[0],m=h[1],b=-v,x=-m;if(t&&o&&u){b=0,x=0;var S=[];if(c&&f?S.push([0,m],[v,0]):c?S.push([v,0]):f?S.push([0,m]):d&&g?S.push([0,m],[v,0]):d?S.push([v,0]):g&&S.push([0,m]),S.length){S.sort(function(t,e){return jn(s([o,u],t))-jn(s([o,u],e))});var y=S[0];if(y[0]&&ki(o)>ut)b=-y[0],x=u*ki(o+b)/ki(o)-u;else if(y[1]&&ki(u)>ut){var E=u;x=-y[1],b=o*ki(u+x)/ki(E)-o}if(t&&f&&c)if(ki(b)>ut&&ki(b)<ki(v))b*=D=ki(v)/ki(b),x*=D;else if(ki(x)>ut&&ki(x)<ki(m)){var D;b*=D=ki(m)/ki(x),x*=D}else b=Si(-v,b),x=Si(-m,x)}}else b=o||c?-v:0,x=u||f?-m:0;return[b,x]}(n,[e,r],[E,D],[S,y],[Si(h.offset,b.offset),Si(v.offset,x.offset)]),2);return[{isBound:E,isSnap:S,offset:C[0]},{isBound:D,isSnap:y,offset:C[1]}]}function Hr(t,e,r,n){void 0===n&&(n=r);var i=nr(ir(t),n.vertical,n.horizontal),a=i.horizontal,o=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Sr(t,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),u=s.horizontal,l=s.vertical,c=Wr(a[0],u),f=Wr(o[0],l),p=ki(c),d=ki(f);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:o,snap:l}}}function Yr(t,e,r,n,i,a,o){void 0===o&&(o=[1,1]);var s=nr(e,r,n),u=s.horizontal,l=s.vertical,c=yr(t,r,n,[],[],i,a,o),f=c.horizontal,p=c.vertical,d=Wr(u[0],f),g=Wr(l[0],p),h=ki(d),v=ki(g);return{horizontal:{isBound:u[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:d,dist:h,bounds:u,snap:f},vertical:{isBound:l[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:g,dist:v,bounds:l,snap:p}}}function Xr(t,e,r,n,i,a){return r.map(function(r){var o=_t(r,2),l=o[0],c=o[1],f=Ce(e,l),p=Ce(e,c),d=n?function(t,e,r,n){var i=function(t,e,r){var n=ir(t),i=n.left,a=n.top,o=n.right,u=n.bottom,l=_t(r,2),c=l[0],f=l[1],p=_t(s(r,e),2),d=p[0],g=p[1];ki(d)<ie&&(d=0),ki(g)<ie&&(g=0);var h=g>0,v=d>0,m={isBound:!1,offset:0,pos:0},b={isBound:!1,offset:0,pos:0};if(0===d&&0===g)return{vertical:m,horizontal:b};if(0===d)h?u<f&&(b.pos=u,b.offset=f-u):a>f&&(b.pos=a,b.offset=f-a);else if(0===g)v?o<c&&(m.pos=o,m.offset=c-o):i>c&&(m.pos=i,m.offset=c-i);else{var x=g/d,S=r[1]-x*c,y=0,E=0,D=!1;v&&o<=c?(y=x*o+S,E=o,D=!0):!v&&c<=i&&(y=x*i+S,E=i,D=!0),D&&(y<a||y>u)&&(D=!1),D||(h&&u<=f?(E=((y=u)-S)/x,D=!0):!h&&f<=a&&(E=((y=a)-S)/x,D=!0)),D&&(m.isBound=!0,m.pos=E,m.offset=c-E,b.isBound=!0,b.pos=y,b.offset=f-y)}return{vertical:m,horizontal:b}}(t,e,r),a=i.horizontal,o=i.vertical,u=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,r){var n=_t(r,2),i=n[0],a=n[1],o=_t(e,2),u=o[0],l=o[1],c=_t(s(r,e),2),f=c[0],p=c[1],d=p>0,g=f>0;f=Ci(f),p=Ci(p);var h={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(0===f&&0===p)return{vertical:h,horizontal:v};var m=Sr(t,f?[i]:[],p?[a]:[],[],[],void 0,void 0),b=m.vertical,x=m.horizontal;b.posInfos.filter(function(t){var e=t.pos;return g?e>=u:e<=u}),x.posInfos.filter(function(t){var e=t.pos;return d?e>=l:e<=l}),b.isSnap=b.posInfos.length>0,x.isSnap=x.posInfos.length>0;var S=Cr(b),y=S.isSnap,E=S.guideline,D=Cr(x),C=D.isSnap,R=D.guideline,M=C?R.pos[1]:0,O=y?E.pos[0]:0;if(0===f)C&&(v.isSnap=!0,v.pos=R.pos[1],v.offset=a-v.pos);else if(0===p)y&&(h.isSnap=!0,h.pos=O,h.offset=i-O);else{var z=p/f,T=r[1]-z*i,w=0,P=0,G=!1;y?(w=z*(P=O)+T,G=!0):C&&(P=((w=M)-T)/z,G=!0),G&&(h.isSnap=!0,h.pos=P,h.offset=i-P,v.isSnap=!0,v.pos=w,v.offset=a-w)}return{vertical:h,horizontal:v}}(t,e,r),l=u.horizontal,c=u.vertical,f=Lr(a,l),p=Lr(o,c),d=ki(f),g=ki(p);return{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:f,dist:d},vertical:{isBound:o.isBound,isSnap:c.isSnap,offset:p,dist:g}}}(t,f,p,i):Hr(t,i,{vertical:[p[0]],horizontal:[p[1]]}),g=d.horizontal,h=g.offset,v=g.isBound,m=g.isSnap,b=d.vertical,x=b.offset,S=b.isBound,y=b.isSnap,E=s(c,l);if(!x&&!h)return{isBound:S||v,isSnap:y||m,sign:E,offset:[0,0]};var D=function(t,e,r,n){var i=u(t,e)/Math.PI*180,a=r.vertical,o=a.isBound,s=a.isSnap,l=a.dist,c=r.horizontal,f=c.isBound,p=c.isSnap,d=i%180,g=d<3||d>177,h=d>87&&d<93;return c.dist<l&&(o||s&&!h&&(!n||!g))?"vertical":!f&&(!p||g||n&&h)?"":"horizontal"}(f,p,d,n);if(!D)return{sign:E,isBound:!1,isSnap:!1,offset:[0,0]};var C="vertical"===D,R=[0,0];return R=(R=n||1!==ki(c[0])||1!==ki(c[1])||l[0]===c[0]||l[1]===c[1]?Nr(f,p,-(C?x:h),C,a).offset:ye({datas:a,distX:-x,distY:-h})).map(function(t,e){return t*(E[e]?2/E[e]:0)}),{sign:E,isBound:C?S:v,isSnap:C?y:m,offset:R}})}function Lr(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}var jr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var r=t.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,a=r.zoom,o=t.getState(),s=o.dragInfo,l=o.beforeOrigin;if(n||!i||!s)return[];var c=s.dist;if(!c[0]&&!c[1])return[];var f=jn(c),p=u(c,[0,0]);return[e.createElement("div",{className:On("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(p,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,i=e.parentGesto,a=t.state,o=a.gestos,s=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],ve(t,e),Oe(t,e,"translate"),function(t,e){e.absolutePoses=ai(t.state)}(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var u=ci(t,e,It({set:function(t){r.startValue=t}},Me(t,e)));return!1!==(n||di(t,"onDragStart",u))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,r.isPinch=!1),!!r.isDrag&&u},drag:function(t,e){if(e){me(t,e,"translate");var r=e.datas,n=e.parentEvent,l=e.parentFlag,c=e.isPinch,f=e.deltaOffset,p=e.useSnap,d=e.isRequest,g=e.isGroup,h=e.parentThrottleDrag,v=e.distX,m=e.distY,b=r.isDrag,S=r.prevDist,y=r.prevBeforeDist,E=r.startValue;if(b){f&&(v+=f[0],m+=f[1]);var D=t.props,C=D.parentMoveable,R=g?0:D.throttleDrag||h||0,M=n?0:D.throttleDragRotate||0,O=0,z=!1,T=!1,w=!1,P=!1;if(!n&&M>0&&(v||m)){var I=D.startDragRotate||0,_=o(I+180*u([0,0],[v,m])/Math.PI,M)-I,A=m*Math.abs(Math.cos((_-90)/180*Math.PI)),k=jn([v*Math.abs(Math.cos(_/180*Math.PI)),A]);O=_*Math.PI/180,v=k*Math.cos(O),m=k*Math.sin(O)}if(!c&&!n&&!l){var F=_t(qr(t,v,m,M,!p&&d||f,r),2),N=F[0],W=F[1];z=N.isSnap,T=N.isBound,w=W.isSnap,P=W.isBound,v+=N.offset,m+=W.offset}var q=i(Se({datas:r,distX:v,distY:m}),E),H=i(function(t){var e=t.datas,r=_t(Se({datas:e,distX:t.distX,distY:t.distY}),2),n=r[0],i=r[1],a=xe(e,G([n,i],4));return x(a,B([0,0,0],4),4)}({datas:r,distX:v,distY:m}),E);a(H,ie),a(q,ie),M||(z||T||(H[0]=o(H[0],R),q[0]=o(q[0],R)),w||P||(H[1]=o(H[1],R),q[1]=o(q[1],R)));var Y=s(q,E),X=s(H,E),L=s(X,S),j=s(Y,y);r.prevDist=X,r.prevBeforeDist=Y,r.passDelta=L,r.passDist=X;var V=r.left+Y[0],U=r.top+Y[1],Z=r.right-Y[0],K=r.bottom-Y[1],J=be(r,"translate(".concat(H[0],"px, ").concat(H[1],"px)"),"translate(".concat(X[0],"px, ").concat(X[1],"px)"));if(Te(e,J),t.state.dragInfo.dist=n?[0,0]:X,n||C||!L.every(function(t){return!t})||!j.some(function(t){return!t})){var $=t.state,Q=$.width,tt=$.height,et=ci(t,e,It({transform:J,dist:X,delta:L,translate:H,beforeDist:Y,beforeDelta:j,beforeTranslate:q,left:V,top:U,right:Z,bottom:K,width:Q,height:tt,isPinch:c},ui({transform:J},e)));return!n&&di(t,"onDrag",et),et}}}},dragAfter:function(t,e){var r=e.datas,n=r.deltaOffset;return!(!n[0]&&!n[1])&&(r.deltaOffset=[0,0],this.drag(t,It(It({},e),{deltaOffset:n})))},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas;if(t.state.dragInfo=null,n.isDrag){n.isDrag=!1;var i=fi(t,e,{});return!r&&di(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var r,n,i=e.datas,a=e.clientX,o=e.clientY,s=this.dragStart(t,e);if(!s)return!1;var u=Ve(t,this,"dragStart",[a||0,o||0],e,0,"draggable"),l=u.childEvents,c=u.eventParams,f=di(t,"onDragGroupStart",It(It({},s),{targets:t.props.targets,events:c}));i.isDrag=!1!==f;var p=null!==(n=null===(r=l[0])||void 0===r?void 0:r.datas.startValue)&&void 0!==n?n:[0,0];return i.throttleOffset=[p[0]%1,p[1]%1],!!i.isDrag&&s},dragGroup:function(t,e){if(e.datas.isDrag){var r=this.drag(t,It(It({},e),{parentThrottleDrag:t.props.throttleDrag})),n=Ve(t,this,"drag",e.datas.passDelta,e,0,"draggable").eventParams;if(r){var i=It({targets:t.props.targets,events:n},r);return di(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var r=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var n=Ve(t,this,"dragEnd",[0,0],e,0,"draggable").eventParams;return di(t,"onDragGroupEnd",fi(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=t.getRect(),n=0,i=0,a=!1;return{isControl:!1,requestStart:function(t){return a=t.useSnap,{datas:e,useSnap:a}},request:function(t){return"x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:n,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Vr(t,e){return{fixedPosition:Ce(t,e),fixedDirection:e,fixedOffset:[0,0]}}function Ur(t,e){var r=t.allMatrix,n=t.is3d,i=t.width,a=t.height,o=n?4:3,s=function(t,e,r){return[e?t[0]/(e/2)-1:0,r?t[1]/(r/2)-1:0]}(e,i,a);return{fixedPosition:Hn(r,e,o),fixedDirection:s,fixedOffset:[i?0:e[0],a?0:e[1]]}}var Zr=Mi("resizable"),Kr={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:tr("resizable"),dragControlCondition:Zr,viewClassName:Ri("resizable"),dragControlStart:function(t,e){var r,n=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,s=e.parentGesto,u=e.datas,l=e.parentFixedDirection,c=e.parentEvent,f=ri(o,i,n,u),d=t.state,g=d.target,h=d.width,v=d.height,m=d.gestos;if(!f||!g)return!1;if(m.resizable)return!1;m.resizable=s||t.controlGesto,!i&&ve(t,e),u.datas={},u.direction=f,u.startOffsetWidth=h,u.startOffsetHeight=v,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=d.inlineCSSWidth||d.cssWidth,u.startHeight=d.inlineCSSHeight||d.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[d.minOffsetWidth,d.minOffsetHeight],u.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var b=t.props.transformOrigin||"% %";function x(t){u.ratio=t&&isFinite(t)?t:0}function S(t){var e=Vr(u.startPositions,t);u.fixedDirection=e.fixedDirection,u.fixedPosition=e.fixedPosition,u.fixedOffset=e.fixedOffset}function y(e){var r=Ur(t.state,e);u.fixedDirection=r.fixedDirection,u.fixedPosition=r.fixedPosition,u.fixedOffset=r.fixedOffset}function E(t){u.minSize=[D("".concat(t[0]),0)||0,D("".concat(t[1]),0)||0]}function C(t){var e=[t[0]||1/0,t[1]||1/0];k(e[0])&&!isFinite(e[0])||(e[0]=D("".concat(e[0]),0)||1/0),k(e[1])&&!isFinite(e[1])||(e[1]=D("".concat(e[1]),0)||1/0),u.maxSize=e}u.transformOrigin=p(b)?b.split(" "):b,u.startOffsetMatrix=d.offsetMatrix,u.startTransformOrigin=d.transformOrigin,u.isWidth=null!==(r=null==e?void 0:e.parentIsWidth)&&void 0!==r?r:!f[0]&&!f[1]||f[0]||!f[1],u.startPositions=ai(t.state),x(h/v),S(l||[-f[0],-f[1]]),u.setFixedDirection=S,u.setFixedPosition=y,u.setMin=E,u.setMax=C;var R=ci(t,e,{direction:f,startRatio:u.ratio,set:function(t){var e=_t(t,2),r=e[0],n=e[1];u.startWidth=r,u.startHeight=n},setMin:E,setMax:C,setRatio:x,setFixedDirection:S,setFixedPosition:y,setOrigin:function(t){u.transformOrigin=t},dragStart:jr.dragStart(t,(new de).dragStart([0,0],e))}),M=c||di(t,"onResizeStart",R);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,!1!==M&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),!!u.isResize&&R},dragControl:function(t,e){var r,n=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,u=e.dragClient,p=e.parentDist,d=e.useSnap,g=e.isRequest,h=e.isGroup,v=e.parentEvent,m=e.resolveMatrix,b=n.isResize,x=n.transformOrigin,S=n.startWidth,y=n.startHeight,E=n.prevWidth,D=n.prevHeight,C=n.minSize,R=n.maxSize,M=n.ratio,O=n.startOffsetWidth,z=n.startOffsetHeight,T=n.isWidth;if(b){if(m){var w=t.state.is3d,P=n.startOffsetMatrix,G=n.startTransformOrigin,B=w?4:3,I=l(Pe(e)),_=Math.sqrt(I.length);B!==_&&(I=c(I,_,B));var A=Re(P,I,G,B),k=Yn(A,O,z,B);n.startPositions=k,n.nextTargetMatrix=I,n.nextAllMatrix=A}var F=Kn(t.props,"resizable"),N=F.resizeFormat,W=F.throttleResize,q=void 0===W?i?0:1:W,H=F.parentMoveable,Y=F.keepRatioFinally,X=n.direction,L=X,j=0,V=0;X[0]||X[1]||(L=[1,1]);var U=M&&(null!=s?s:F.keepRatio)||!1,Z=_t(ut(),2),K=Z[0],J=Z[1];v||(n.setFixedDirection(n.fixedDirection),di(t,"onBeforeResize",ci(t,e,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(t){var e;return n.setFixedDirection(t),e=_t(ut(),2),K=e[0],J=e[1],[K,J]},setFixedPosition:function(t){var e;return n.setFixedPosition(t),e=_t(ut(),2),K=e[0],J=e[1],[K,J]},boundingWidth:K,boundingHeight:J,setSize:function(t){var e;e=_t(t,2),K=e[0],J=e[1]}},!0)));var $=u;u||($=!i&&a?function(t,e){return Ce(ai(t.state),e)}(t,[0,0]):n.fixedPosition);var Q=[0,0];if(a||(Q=function(t,e,r,n,i,a,o){if(!dr(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,l=t.state,c=l.allMatrix,f=l.is3d;return bn(t,function(t,n){return hn(u||c,e+t,r+n,s,i,f)},e,r,n,i,a,o)}(t,K,J,X,$,!d&&g,n)),p&&(!p[0]&&(Q[0]=0),!p[1]&&(Q[1]=0)),U){L[0]&&L[1]&&Q[0]&&Q[1]&&(ki(Q[0])>ki(Q[1])?Q[1]=0:Q[0]=0);var tt=!Q[0]&&!Q[1];tt&&lt(),L[0]&&!L[1]||Q[0]&&!Q[1]||tt&&T?(K+=Q[0],J=K/M):(!L[0]&&L[1]||!Q[0]&&Q[1]||tt&&!T)&&(J+=Q[1],K=J*M)}else K+=Q[0],J+=Q[1],K=Math.max(0,K),J=Math.max(0,J);r=_t(f([K,J],C,R,!!U&&M),2),K=r[0],J=r[1],lt(),U&&(h||Y)&&(T?J=K/M:K=J*M);var et=[(j=K-O)-E,(V=J-z)-D];n.prevWidth=j,n.prevHeight=V;var rt=ke(t,K,J,$,x,n);if(H||!et.every(function(t){return!t})||!rt.every(function(t){return!t})){var nt=jr.drag(t,pe(e,t.state,rt,!!a,0,"draggable")),it=nt.transform,at=S+j,ot=y+V,st=ci(t,e,It({width:at,height:ot,offsetWidth:Math.round(K),offsetHeight:Math.round(J),startRatio:M,boundingWidth:K,boundingHeight:J,direction:X,dist:[j,V],delta:et,isPinch:!!a,drag:nt},li({style:{width:"".concat(at,"px"),height:"".concat(ot,"px")},transform:it},nt,e)));return!v&&di(t,"onResize",st),st}}function ut(){var t=n.fixedDirection,r=Pi(L,U,n,e);j=r.distWidth,V=r.distHeight;var i=L[0]-t[0]||U?Math.max(O+j,ie):O,a=L[1]-t[1]||U?Math.max(z+V,ie):z;return U&&O&&z&&(T?a=i/M:i=a*M),[i,a]}function lt(){var t;N&&(t=_t(N([K,J]),2),K=t[0],J=t[1]),K=o(K,q),J=o(J,q)}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,i=r.startOffsetWidth,a=r.startOffsetHeight,o=r.prevWidth,s=r.prevHeight;if(n&&!1!==t.props.checkResizableError){var u=t.state,l=u.width-(i+o),c=u.height-(a+s),f=ki(l)>3,p=ki(c)>3;return f&&(r.startWidth+=l,r.startOffsetWidth+=l,r.prevWidth+=l),p&&(r.startHeight+=c,r.startOffsetHeight+=c,r.prevHeight+=c),f||p?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var r=e.datas,n=e.parentEvent;if(r.isResize){r.isResize=!1;var i=fi(t,e,{});return!n&&di(t,"onResizeEnd",i),i}},dragGroupControlCondition:Zr,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,It(It({},e),{isGroup:!0}));if(!n)return!1;var i=je(t,"resizable",e),a=r.startOffsetWidth,o=r.startOffsetHeight;function s(){var t=r.minSize;i.forEach(function(e){var r=e.datas,n=r.minSize,i=r.startOffsetWidth,s=r.startOffsetHeight,u=a*(i?n[0]/i:0),l=o*(s?n[1]/s:0);t[0]=Math.max(t[0],u),t[1]=Math.max(t[1],l)})}function u(){var t=r.maxSize;i.forEach(function(e){var r=e.datas,n=r.maxSize,i=r.startOffsetWidth,s=r.startOffsetHeight,u=a*(i?n[0]/i:0),l=o*(s?n[1]/s:0);t[0]=Math.min(t[0],u),t[1]=Math.min(t[1],l)})}var l=Ue(t,this,"dragControlStart",e,function(e,n){return Ze(t,e,r,n)});s(),u();var c=function(e){n.setFixedDirection(e),l.forEach(function(n,a){n.setFixedDirection(e),Ze(t,n.moveable,r,i[a])})};r.setFixedDirection=c;var f=It(It({},n),{targets:t.props.targets,events:l.map(function(t){return It(It({},t),{setMin:function(e){t.setMin(e),s()},setMax:function(e){t.setMax(e),u()}})}),setFixedDirection:c,setMin:function(t){n.setMin(t),s()},setMax:function(t){n.setMax(t),u()}}),p=di(t,"onResizeGroupStart",f);return r.isResize=!1!==p,!!r.isResize&&n},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=Kn(t.props,"resizable");pi(t,"onBeforeResize",function(r){di(t,"onBeforeResizeGroup",ci(t,e,It(It({},r),{targets:n.targets}),!0))});var a=this.dragControl(t,It(It({},e),{isGroup:!0}));if(a){var o=a.boundingWidth,s=a.boundingHeight,u=a.dist,l=n.keepRatio,c=[o/(o-u[0]),s/(s-u[1])],f=r.fixedPosition,p=Ue(t,this,"dragControl",e,function(e,r){var n=_t(x(A(t.rotation/180*Math.PI,3),[r.datas.originalX*c[0],r.datas.originalY*c[1],1],3),2),a=n[0],o=n[1];return It(It({},r),{parentDist:null,parentScale:c,dragClient:i(f,[a,o]),parentKeepRatio:l})}),d=It({targets:n.targets,events:p},a);return di(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var n=Ue(t,this,"dragControlEnd",e);return di(t,"onResizeGroupEnd",fi(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=0,n=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(t){var r;return i=t.useSnap,{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(r=null==t?void 0:t.horizontal)||void 0===r||r,useSnap:i}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-a.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-a.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:e,parentDist:[r,n],parentKeepRatio:t.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function Jr(t,e,r,n,a){var o=t.props.groupable,l=t.state,c=l.is3d?4:3,f=e.origin,p=Hn(t.state.rootMatrix,s([f[0],f[1]],o?[0,0]:[l.left,l.top]),c),d=i([a.left,a.top],p);e.startAbsoluteOrigin=d,e.prevDeg=u(d,[r,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=g(d,[r,n])}function $r(t,e,r){var n=r.defaultDeg,i=r.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var s=e*(360*o+t-n);return r.prevDeg=n+s,s}function Qr(t,e,r,n){return $r(u(n.startAbsoluteOrigin,[t,e])/Math.PI*180,r,n)}function tn(t,e,r,n,i,a){var u=t.props.throttleRotate,l=void 0===u?0:u,c=r.prevSnapDeg,f=0,p=!1;if(a){var d=function(t,e,r,n){var i,a=t.props,o=null!==(i=a[vr])&&void 0!==i?i:5,u=a[mr];if(dr(t,"rotatable")){var l=e.pos1,c=e.pos2,f=e.pos3,p=e.pos4,d=e.origin,g=r*Math.PI/180,h=[l,c,f,p].map(function(t){return s(t,d)}),v=h.map(function(t){return W(t,g)}),m=At(At([],_t(sr(t,h,v,d,r)),!1),_t(Fr(t,h,v,d,r)),!1);m.sort(function(t,e){return ki(t-r)-ki(e-r)});var b=m.length>0;if(b)return{isSnap:b,dist:b?m[0]:r}}if((null==u?void 0:u.length)&&o){var x=u.slice().sort(function(t,e){return yn(t,n)-yn(e,n)})[0];if(yn(x,n)<=o)return{isSnap:!0,dist:r+Sn(n,x)-n}}return{isSnap:!1,dist:r}}(t,e,n,i+n);p=d.isSnap,f=i+d.dist}p||(f=o(i+n,l));var g=f-i;return r.prevSnapDeg=g,[g-c,g,f]}function en(t,e,r){var n=_t(e,4),i=n[0],a=n[1],o=n[2],s=n[3];if("none"===t)return[];if(d(t))return t.map(function(t){return en(t,[i,a,o,s],r)[0]});var u=_t((t||"top").split("-"),2),l=u[0],c=u[1],f=[i,a];"left"===l?f=[o,i]:"right"===l?f=[a,s]:"bottom"===l&&(f=[s,o]);var p=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],g=$n(f,r);if(c){var h="top"===c||"left"===c,v="bottom"===l||"left"===l;p=f[h&&!v||!h&&v?0:1]}return[[p,g]]}function rn(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var r=e.inputEvent.target;if(n(r,On("rotation-control"))||t.props.rotateAroundControls&&n(r,On("around-control"))||n(r,On("control"))&&n(r,On("rotatable")))return!0;var i=t.props.rotationTarget;return!!i&&zi(i,!0).some(function(t){return!!t&&(r===t||r.contains(t))})}var nn={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[".rotation {\nposition: absolute;\nheight: 40px;\nwidth: 1px;\ntransform-origin: 50% 100%;\nheight: calc(40px * var(--zoom));\ntop: auto;\nleft: 0;\nbottom: 100%;\nwill-change: transform;\n}\n.rotation .rotation-line {\ndisplay: block;\nwidth: 100%;\nheight: 100%;\ntransform-origin: 50% 50%;\n}\n.rotation .rotation-control {\nborder-color: #4af;\nborder-color: var(--moveable-color);\nbackground:#fff;\ncursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\ncursor: alias;\n}\n.rotatable.direction.control.move {\ncursor: move;\n}\n"],viewClassName:function(t){return t.isDragging("rotatable")?On("view-rotation-dragging"):""},render:function(t,e){var r=Kn(t.props,"rotatable"),n=r.rotatable,i=r.rotationPosition,a=r.zoom,o=r.renderDirections,s=r.rotateAroundControls,u=r.resolveAblesWithRotatable,l=t.getState(),c=l.renderPoses,f=l.direction;if(!n)return null;var p=en(i,c,f),g=[];if(p.forEach(function(t,r){var n=_t(t,2),i=n[0],o=n[1];g.push(e.createElement("div",{key:"rotation".concat(r),className:On("rotation"),style:{transform:"translate(-50%) translate(".concat(i[0],"px, ").concat(i[1],"px) rotate(").concat(o,"rad)")}},e.createElement("div",{className:On("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:On("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var h=y(u||{}),v={};h.forEach(function(t){u[t].forEach(function(e){v[e]=t})});var m=[];d(o)&&(m=o.map(function(t){var e=v[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}})),g.push.apply(g,At([],_t(Ke(t,"rotatable",m,e)),!1))}return s&&g.push.apply(g,At([],_t(rr(t,e)),!1)),g},dragControlCondition:rn,dragControlStart:function(t,e){var r,a,o=e.datas,u=e.clientX,l=e.clientY,c=e.parentRotate,f=e.parentFlag,p=e.isPinch,d=e.isRequest,g=t.state,h=g.target,v=g.left,m=g.top,b=g.direction,S=g.beforeDirection,y=g.targetTransform,E=g.moveableClientRect,D=g.offsetMatrix,C=g.targetMatrix,R=g.allMatrix,M=g.width,O=g.height;if(!d&&!h)return!1;var z=t.getRect();o.rect=z,o.transform=y,o.left=v,o.top=m;var T=function(e){var r=Ur(t.state,e);o.fixedDirection=r.fixedDirection,o.fixedOffset=r.fixedOffset,o.fixedPosition=r.fixedPosition,H&&H.setFixedPosition(e)},w=function(e){var r=function(t,e){var r=t.allMatrix,n=t.is3d,i=t.width,a=t.height,o=n?4:3;return{fixedPosition:Hn(r,[i/2*(1+e[0]),a/2*(1+e[1])],o),fixedDirection:e,fixedOffset:[0,0]}}(t.state,e);o.fixedDirection=r.fixedDirection,o.fixedOffset=r.fixedOffset,o.fixedPosition=r.fixedPosition,H&&H.setFixedDirection(e)},P=u,G=l;if(d||p||f){var I=c||0;o.beforeInfo={origin:z.beforeOrigin,prevDeg:I,defaultDeg:I,prevSnapDeg:0,startDist:0},o.afterInfo=It(It({},o.beforeInfo),{origin:z.origin}),o.absoluteInfo=It(It({},o.beforeInfo),{origin:z.origin,startValue:I})}else{var _=null===(a=e.inputEvent)||void 0===a?void 0:a.target;if(_){var A=_.getAttribute("data-direction")||"",k=ue[A];if(k){o.isControl=!0,o.isAroundControl=n(_,On("around-control")),o.controlDirection=k;var F=_.getAttribute("data-resolve");F&&(o.resolveAble=F);var N=function(t,e,r){var n=16===t.length?4:3,i=e.map(function(e){return Hn(t,e,n)}),a=r.left,o=r.top;return i.map(function(t){return[t[0]+a,t[1]+o]})}(g.rootMatrix,g.renderPoses,E);r=_t(Ce(N,k),2),P=r[0],G=r[1]}}o.beforeInfo={origin:z.beforeOrigin},o.afterInfo={origin:z.origin},o.absoluteInfo={origin:z.origin,startValue:z.rotation};var W=T;T=function(e){var r=g.is3d?4:3,n=_t(i(ft(C,r),e),2),a=n[0],u=n[1],l=x(D,B([a,u],r)),c=x(R,B([e[0],e[1]],r));W(e);var f=g.posDelta;o.beforeInfo.origin=s(l,f),o.afterInfo.origin=s(c,f),o.absoluteInfo.origin=s(c,f),Jr(t,o.beforeInfo,P,G,E),Jr(t,o.afterInfo,P,G,E),Jr(t,o.absoluteInfo,P,G,E)},w=function(t){var e=Ce([[0,0],[M,0],[0,O],[M,O]],t);T(e)}}o.startClientX=P,o.startClientY=G,o.direction=b,o.beforeDirection=S,o.startValue=0,o.datas={},Oe(t,e,"rotate");var q=!1,H=!1;o.isControl&&o.resolveAble&&("resizable"===o.resolveAble&&(H=Kr.dragControlStart(t,It(It({},new de("resizable").dragStart([0,0],e)),{parentPosition:o.controlPosition,parentFixedPosition:o.fixedPosition}))));H||(q=jr.dragStart(t,(new de).dragStart([0,0],e))),T(function(t){var e=t.props,r=e.groupable,n=e.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,s=i.svg,u=i.transformOrigin;if(!r&&s&&n)return Bi(n,a,o);return u}(t));var Y=ci(t,e,It(It({set:function(t){o.startValue=t*Math.PI/180},setFixedDirection:w,setFixedPosition:T},Me(t,e)),{dragStart:q,resizeStart:H})),X=di(t,"onRotateStart",Y);return o.isRotate=!1!==X,g.snapRenderInfo={request:e.isRequest},!!o.isRotate&&Y},dragControl:function(t,e){var r,n,a,o=e.datas,u=e.clientDistX,l=e.clientDistY,c=e.parentRotate,f=e.parentFlag,p=e.isPinch,d=e.groupDelta,h=e.resolveMatrix,v=o.beforeDirection,m=o.beforeInfo,b=o.afterInfo,x=o.absoluteInfo,S=o.isRotate,y=o.startValue,E=o.rect,D=o.startClientX,C=o.startClientY;if(S){me(t,e,"rotate");var R,M,O,z,T,w,P,G,B,I=function(t){return ge(t.datas.beforeTransform,[50,50],100,100).direction}(e),_=v*I,A=t.props.parentMoveable,k=180/Math.PI*y,F=x.startValue,N=!1,W=D+u,q=C+l;if(!f&&"parentDist"in e){var H=e.parentDist;M=H,T=H,G=H}else p||f?(M=$r(c,v,m),T=$r(c,_,b),G=$r(c,_,x)):(M=Qr(W,q,v,m),T=Qr(W,q,_,b),G=Qr(W,q,_,x),N=!0);if(di(t,"onBeforeRotate",ci(t,e,{beforeRotation:O=k+M,rotation:w=k+T,absoluteRotation:B=F+G,setRotation:function(t){M=T=t-k,G=T}},!0)),R=(r=_t(tn(t,E,m,M,k,N),3))[0],M=r[1],O=r[2],z=(n=_t(tn(t,E,b,T,k,N),3))[0],T=n[1],w=n[2],P=(a=_t(tn(t,E,x,G,F,N),3))[0],G=a[1],B=a[2],P||z||R||A||h){var Y=be(o,"rotate(".concat(w,"deg)"),"rotate(".concat(T,"deg)"));h&&(o.fixedPosition=_e(t,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var X=function(t,e,r){var n=r.fixedDirection,i=r.fixedPosition,a=r.fixedOffset;return Ae(t,"rotate(".concat(e,"deg)"),n,i,a,r)}(t,T,o),L=s(i(d||[0,0],X),o.prevInverseDist||[0,0]);o.prevInverseDist=X,o.requestValue=null;var j=Ie(t,Y,L,p,e),V=j,U=g([W,q],x.startAbsoluteOrigin)-x.startDist,Z=void 0;if("resizable"===o.resolveAble){var K=Kr.dragControl(t,It(It({},pe(e,t.state,[e.deltaX,e.deltaY],!!p,0,"resizable")),{resolveMatrix:!0,parentDistance:U}));K&&(Z=K,V=li(V,K,e))}var J=ci(t,e,It(It({delta:z,dist:T,rotate:w,rotation:w,beforeDist:M,beforeDelta:R,beforeRotate:O,beforeRotation:O,absoluteDist:G,absoluteDelta:P,absoluteRotate:B,absoluteRotation:B,isPinch:!!p,resize:Z},j),V));return di(t,"onRotate",J),J}}},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var n=fi(t,e,{});return di(t,"onRotateEnd",n),n}},dragGroupControlCondition:rn,dragGroupControlStart:function(t,e){var r=e.datas,n=t.state,a=n.left,o=n.top,u=n.beforeOrigin,l=this.dragControlStart(t,e);if(!l)return!1;l.set(r.beforeDirection*t.rotation);var c=Ue(t,this,"dragControlStart",e,function(t,e){var r=t.state,n=r.left,l=r.top,c=r.beforeOrigin,f=i(s([n,l],[a,o]),s(c,u));return e.datas.startGroupClient=f,e.datas.groupClient=f,It(It({},e),{parentRotate:0})}),f=di(t,"onRotateGroupStart",It(It({},l),{targets:t.props.targets,events:c}));return r.isRotate=!1!==f,!!r.isRotate&&l},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){pi(t,"onBeforeRotate",function(r){di(t,"onBeforeRotateGroup",ci(t,e,It(It({},r),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var i=r.beforeDirection,a=n.beforeDist,o=a/180*Math.PI,s=Ue(t,this,"dragControl",e,function(t,e){var r=e.datas.startGroupClient,n=_t(e.datas.groupClient,2),s=n[0],u=n[1],l=_t(W(r,o*i),2),c=l[0],f=l[1],p=[c-s,f-u];return e.datas.groupClient=[c,f],It(It({},e),{parentRotate:a,groupDelta:p})});t.rotation=i*n.beforeRotation;var u=It({targets:t.props.targets,events:s,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},n);return di(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var n=Ue(t,this,"dragControlEnd",e);return di(t,"onRotateGroupEnd",fi(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-n),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function an(t,e){return function(t,e){var r,n=t.direction,i=t.classNames,a=t.size,o=t.pos,s=t.zoom,u=t.key,l="horizontal"===n,c=l?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(r={},r[l?"width":"height"]="".concat(a),r.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(s,")"),r)})}(It(It({},t),{classNames:At([On("line","guideline",t.direction)],_t(t.classNames),!1).filter(function(t){return t}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(t){return"".concat(o(t,.1),"px")})}),e)}function on(t,e,r,n,i,a,o,s){var u=t.props.zoom;return r.map(function(t,r){var l=t.type,c=t.pos,f=[0,0];return f[o]=n,f[o?0:1]=-i+c,an({key:"".concat(e,"TargetGuideline").concat(r),classNames:[On("target","bold",l)],posValue:f,sizeValue:a,zoom:u,direction:e},s)})}function sn(t,e,r,n,i,a){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,l="horizontal"===e?fr:pr,c=i[l.start],f=i[l.end];return r.filter(function(t){var e=t.hide,r=t.elementRect;if(e)return!1;if(u&&r){var n=r.rect;if(n[l.start]<=c&&f<=n[l.end])return!1}return!0}).map(function(t,r){var i=t.pos,o=t.size,u=t.element,l=t.className,c=[-n[0]+i[0],-n[1]+i[1]];return an({key:"".concat(e,"-default-guideline-").concat(r),classNames:u?[On("bold"),l]:[On("normal"),l],direction:e,posValue:c,sizeValue:o,zoom:s},a)})}function un(t,e,r,n,i,a,o,s){var u,l=t.props,c=l.snapDigit,f=void 0===c?0:c,p=l.isDisplaySnapDigit,d=void 0===p||p,g=l.snapDistFormat,h=void 0===g?function(t,e){return t}:g,v=l.zoom,m="horizontal"===e?"X":"Y",b="vertical"===e?"height":"width",x=Math.abs(i),S=d?parseFloat(x.toFixed(f)):0;return s.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(n),className:On("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[b]="".concat(x,"px"),u)},an({direction:e,classNames:[On(r),o],size:"100%",posValue:[0,0],sizeValue:x,zoom:v},s),s.createElement("div",{className:On("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(v,")")}},S>0?h(S,e):""))}function ln(t,e,r,n,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=e.filter(function(t){return t.type===s}),l="vertical"===s?1:0,c=l?0:1,f=function(t,e,r,n){var i="vertical"===t?0:1,a="vertical"===t?1:0,o=i?fr:pr,s=r[o.start],u=r[o.end];return bi(e,function(t){return t.pos[i]}).map(function(e){var r=[],l=[];return e.forEach(function(e){var c,f,p=e.element,d=e.elementRect.rect;if(d[o.end]<s)r.push(e);else if(u<d[o.start])l.push(e);else if(d[o.start]<=s&&u<=d[o.end]&&n){var g=e.pos,h={element:p,rect:It(It({},d),(c={},c[o.end]=d[o.start],c))},v={element:p,rect:It(It({},d),(f={},f[o.start]=d[o.end],f))},m=[0,0],b=[0,0];m[i]=g[i],m[a]=g[a],b[i]=g[i],b[a]=g[a]+e.size,r.push({type:t,pos:m,size:0,elementRect:h,direction:"",elementDirection:"end"}),l.push({type:t,pos:b,size:0,elementRect:v,direction:"",elementDirection:"start"})}}),r.sort(function(t,e){return e.pos[a]-t.pos[a]}),l.sort(function(t,e){return t.pos[a]-e.pos[a]}),{total:e,start:r,end:l,inner:[]}})}(s,u,n,a),p=l?pr:fr,d=l?fr:pr,g=n[p.start],h=n[p.end];f.forEach(function(e){var a=e.total,u=e.start,f=e.end,v=e.inner,m=r[c]+a[0].pos[c]-n[d.start],b=n;u.forEach(function(e){var n=e.elementRect.rect,a=b[p.start]-n[p.end];if(a>0){var u=[0,0];u[l]=r[l]+b[p.start]-g-a,u[c]=m,o.push(un(t,s,"dashed",o.length,a,u,e.className,i))}b=n}),b=n,f.forEach(function(e){var n=e.elementRect.rect,a=n[p.start]-b[p.end];if(a>0){var u=[0,0];u[l]=r[l]+b[p.end]-g,u[c]=m,o.push(un(t,s,"dashed",o.length,a,u,e.className,i))}b=n}),v.forEach(function(e){var n=e.elementRect.rect,a=g-n[p.start],u=n[p.end]-h,f=[0,0],d=[0,0];f[l]=r[l]-a,f[c]=m,d[l]=r[l]+h-g,d[c]=m,o.push(un(t,s,"dashed",o.length,a,f,e.className,i)),o.push(un(t,s,"dashed",o.length,u,d,e.className,i))})})}),o}function cn(t){var e,r,n=t.state,i=n.containerClientRect,a=n.hasFixed,s=i.overflow,u=i.scrollHeight,l=i.scrollWidth,c=i.clientHeight,f=i.clientWidth,p=i.clientLeft,d=i.clientTop,g=t.props,h=g.snapGap,v=void 0===h||h,m=g.verticalGuidelines,b=g.horizontalGuidelines,x=g.snapThreshold,S=void 0===x?5:x,y=g.maxSnapElementGuidelineDistance,E=void 0===y?1/0:y,D=g.isDisplayGridGuidelines,C=Xn(ai(t.state)),R=C.top,M=C.left,O=C.bottom,z=C.right,T={top:R,left:M,bottom:O,right:z,center:(M+z)/2,middle:(R+O)/2},w=function(t){var e=t.state,r=t.props.elementGuidelines,n=void 0===r?[]:r;if(!n.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(t){return!t.refresh}),a=n.map(function(t){return _(t)&&"element"in t?It(It({},t),{element:Oi(t.element,!0)}):{element:Oi(t,!0)}}).filter(function(t){return t.element}),s=ot(i.map(function(t){return t.element}),a.map(function(t){return t.element})),u=s.maintained,l=s.added,c=[];u.forEach(function(t){var e=_t(t,2),r=e[0],n=e[1];c[n]=i[r]}),function(t,e){if(!e.length)return[];var r=t.props.groupable,n=t.state,i=n.containerClientRect,a=n.rootMatrix,o=n.is3d,s=n.offsetDelta,u=o?4:3,l=_t(function(t,e,r){var n=Hn(t,[e.clientLeft,e.clientTop],r);return[e.left+n[0],e.top+n[1]]}(a,i,u),2),c=l[0],f=l[1],p=r?0:s[0],d=r?0:s[1];return e.map(function(t){var e=t.element.getBoundingClientRect(),r=e.left-c-p,n=e.top-f-d,i=n+e.height,o=r+e.width,s=_t(yi(a,[r,n],u),2),l=s[0],g=s[1],h=_t(yi(a,[o,i],u),2),v=h[0],m=h[1];return It(It({},t),{rect:{left:l,right:v,top:g,bottom:m,center:(l+v)/2,middle:(g+m)/2}})})}(t,l.map(function(t){return a[t]})).map(function(t,e){c[l[e]]=t}),e.elementRects=c;var f=gr(t.props.elementSnapDirections),p=[];return c.forEach(function(t){var e=t.element,r=t.top,n=void 0===r?f.top:r,i=t.left,a=void 0===i?f.left:i,s=t.right,u=void 0===s?f.right:s,l=t.bottom,c=void 0===l?f.bottom:l,d=t.center,g=void 0===d?f.center:d,h=t.middle,v=void 0===h?f.middle:h,m=t.className,b=t.rect,x=hr({top:n,right:u,left:a,bottom:c,center:g,middle:v},b),S=x.horizontal,y=x.vertical,E=x.horizontalNames,D=x.verticalNames,C=b.top,R=b.left,M=b.right-R,O=b.bottom-C,z=[M,O];y.forEach(function(r,n){p.push({type:"vertical",element:e,pos:[o(r,.1),C],size:O,sizes:z,className:m,elementRect:t,elementDirection:cr[D[n]]||D[n],direction:""})}),S.forEach(function(r,n){p.push({type:"horizontal",element:e,pos:[R,o(r,.1)],size:M,sizes:z,className:m,elementRect:t,elementDirection:cr[E[n]]||E[n],direction:""})})}),p}(t),P=At([],_t(w),!1),G=(null!==(r=null===(e=n.snapThresholdInfo)||void 0===e?void 0:e.multiples)&&void 0!==r?r:[1,1]).map(function(t){return t*S});v&&P.push.apply(P,At([],_t(function(t,e,r){var n=t.props,i=n.maxSnapElementGuidelineDistance,a=void 0===i?1/0:i,o=n.maxSnapElementGapDistance,s=void 0===o?1/0:o,u=t.state.elementRects,l=[];return[["vertical",fr,pr],["horizontal",pr,fr]].forEach(function(t){var n=_t(t,3),i=n[0],o=n[1],c=n[2],f=e[o.start],p=e[o.end],d=e[o.center],g=e[c.start],h=e[c.end],v={left:r[0],top:r[1]};function m(t){var e=t.rect,r=v[o.start];return e[o.end]<f+r?f-e[o.end]:p-r<e[o.start]?e[o.start]-p:-1}var b=u.filter(function(t){var e=t.rect;return!(e[c.start]>h||e[c.end]<g)&&m(t)>0}).sort(function(t,e){return m(t)-m(e)}),x=[];b.forEach(function(t){b.forEach(function(e){if(t!==e){var r=t.rect,n=e.rect,i=r[c.start],a=r[c.end],o=n[c.start];i>n[c.end]||o>a||x.push([t,e])}})}),x.forEach(function(t){var r=_t(t,2),n=r[0],u=r[1],c=n.rect,g=u.rect,h=c[o.start],m=c[o.end],b=g[o.start],x=g[o.end],S=v[o.start],y=0,E=0,D=!1,C=!1,R=!1;if(m<=f&&p<=b){if(C=!0,ki((E=m+(y=(b-m-(p-f))/2)+(p-f)/2)-d)>S)return}else if(m<b&&x<f+S){if(D=!0,ki((E=x+(y=b-m))-f)>S)return}else{if(!(m<b&&p-S<h))return;if(R=!0,ki((E=h-(y=b-m))-p)>S)return}y&&fn(e,g,i,a)&&(y>s||l.push({type:i,pos:"vertical"===i?[E,0]:[0,E],element:u.element,size:0,className:u.className,isStart:D,isCenter:C,isEnd:R,gap:y,hide:!0,gapRects:[n,u],direction:"",elementDirection:""}))})}),l}(t,T,G)),!1));var B=It({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(P.push.apply(P,At([],_t(function(t,e,r,n,i,a,s){void 0===n&&(n=0);void 0===i&&(i=0);var u=t.props,l=t.state,c=u.snapGridWidth,f=void 0===c?0:c,p=u.snapGridHeight,d=void 0===p?0:p,g=[],h=a.left,v=a.top,m=[0,0];!function(t,e,r,n){var i,a,s=t.props,u=t.state,l=s.snapGridAll,c=s.snapGridWidth,f=void 0===c?0:c,p=s.snapGridHeight,d=void 0===p?0:p,g=u.snapRenderInfo,h=g&&((null===(i=g.direction)||void 0===i?void 0:i[0])||(null===(a=g.direction)||void 0===a?void 0:a[1])),v=t.moveables;if(l&&v&&h&&(f||d)){if(u.snapThresholdInfo)return;u.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var m=t.getRect(),b=m.children,x=g.direction;if(b){var S=x.map(function(t,i){var a=0===i?{snapSize:f,posName:"left",sizeName:"width",clientOffset:n.left-e}:{snapSize:d,posName:"top",sizeName:"height",clientOffset:n.top-r},s=a.snapSize,u=a.posName,l=a.sizeName,c=a.clientOffset;if(!s)return{dir:t,multiple:1,snapSize:s,snapOffset:0};var p=m[l],g=m[u],h=pt(b.map(function(t){return[t[u]-g,t[l],p-t[l]-t[u]+g]})).filter(function(t){return t}).sort(function(t,e){return t-e}),v=h[0],x=h.map(function(t){return o(t/v,.1)*s}),S=1,y=o(p/v,.1);for(S=1;S<=10&&!x.every(function(t){return t*S%1==0});++S);var E=(1-t)/2,D=N(g-c,g-c+p,E,1-E);return{multiple:y*S,dir:t,snapSize:s,snapOffset:Math.round(D/s)}}),y=S.map(function(t){return t.multiple||1});u.snapThresholdInfo.multiples=y,u.snapThresholdInfo.offset=S.map(function(t){return t.snapOffset}),S.forEach(function(t,e){t.snapSize})}}else u.snapThresholdInfo=null}(t,n,i,a);var b=l.snapThresholdInfo,x=f,S=d;b&&(f*=b.multiples[0]||1,d*=b.multiples[1]||1,m=b.offset);if(d){for(var y=function(t){g.push({type:"horizontal",pos:[h,o(m[1]*S+t-i+v,.1)],className:On("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},E=0;E<=2*r;E+=d)y(E);for(E=-d;E>=-r;E-=d)y(E)}if(f){for(y=function(t){g.push({type:"vertical",pos:[o(m[0]*x+t-n+h,.1),v],className:On("grid-guideline"),size:r,hide:!s,direction:"",grid:!0})},E=0;E<=2*e;E+=f)y(E);for(E=-f;E>=-e;E-=f)y(E)}return g}(t,s?l:f,s?u:c,p,d,B,D)),!1)),a){var I=i.left,A=i.top;B.left+=I,B.top+=A,B.right+=I,B.bottom+=A}return P.push.apply(P,At([],_t(dn(b||!1,m||!1,s?l:f,s?u:c,p,d,B)),!1)),P=P.filter(function(t){var e=t.element,r=t.elementRect,n=t.type;if(!e||!r)return!0;var i=r.rect;return fn(T,i,n,E)})}function fn(t,e,r,n){return"horizontal"===r?ki(t.right-e.left)<=n||ki(t.left-e.right)<=n||t.left<=e.right&&e.left<=t.right:"vertical"!==r||(ki(t.bottom-e.top)<=n||ki(t.top-e.bottom)<=n||t.top<=e.bottom&&e.top<=t.bottom)}function pn(t,e){return t?t.map(function(t){var r=_(t)?t:{pos:t},n=r.pos;return k(n)?r:It(It({},r),{pos:D(n,e)})}):[]}function dn(t,e,r,n,i,a,s){void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s={left:0,top:0,right:0,bottom:0});var u=[],l=s.left,c=s.top,f=s.bottom,p=r+s.right-l,d=n+f-c;return pn(t,d).forEach(function(t){u.push({type:"horizontal",pos:[l,o(t.pos-a+c,.1)],size:p,className:t.className,direction:""})}),pn(e,p).forEach(function(t){u.push({type:"vertical",pos:[o(t.pos-i+l,.1),c],size:d,className:t.className,direction:""})}),u}function gn(t){var e=t.state,r=e.container,n=t.props.snapContainer||r;if(e.snapContainer===n&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(r!==n){var s=Oi(n,!0);if(s){var u=ei(s),l=Ti(e,[u.left-i.left,u.top-i.top]),c=Ti(e,[u.right-i.right,u.bottom-i.bottom]);a.left=o(l[0],1e-5),a.top=o(l[1],1e-5),a.right=o(c[0],1e-5),a.bottom=o(c[1],1e-5)}}return e.snapContainer=n,e.snapOffset=a,e.guidelines=cn(t),e.enableSnap=!0,!0}function hn(t,e,r,n,i,a){var o=Yn(t,e,r,a?4:3),u=Ce(o,n);return ii(o,s(i,u))}function vn(t){return t?t/ki(t):0}function mn(t,e,r,n,i,a){var o=function(t,e,r){var n=[];if(r)1!==ki(e[0])||1!==ki(e[1])?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(t){[1,-1].forEach(function(r){var a=[t*i[0],r*i[1]];e[0]===a[0]&&e[1]===a[1]||n.push([e,a])})})}else t[0]?(1===ki(e[0])?[1]:[1,-1]).forEach(function(r){n.push([[e[0],-1],[r*t[0],-1]],[[e[0],0],[r*t[0],0]],[[e[0],1],[r*t[0],1]])}):t[1]&&(1===ki(e[1])?[1]:[1,-1]).forEach(function(r){n.push([[-1,e[1]],[-1,r*t[1]]],[[0,e[1]],[0,r*t[1]]],[[1,e[1]],[1,r*t[1]]])});return n}(r,a.fixedDirection,n),s=Ar(t,e,r,n),u=At(At([],_t(Xr(t,e,o,n,i,a)),!1),_t(Ir(t,s,a)),!1),l=zr(u,0),c=zr(u,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function bn(t,e,r,n,i,a,s,l){for(var c=ai(t.state),f=t.props.keepRatio,p=0,d=0,g=0;g<2;++g){var h=mn(t,e(p,d),i,f,s,l),v=h.width,m=h.height,b=v.isBound,x=m.isBound,S=v.offset,y=m.offset;if(1===g&&(b||(S=0),x||(y=0)),0===g&&s&&!b&&!x)return[0,0];if(f){var E=ki(S)*(r?1/r:1),D=ki(y)*(n?1/n:1);(b&&x?E<D:x||!b&&E<D)?S=r*y/n:y=n*S/r}p+=S,d+=y}if(!f&&i[0]&&i[1]){var C=function(t,e,r,n,i){var a=[-r[0],-r[1]],o=t.state,s=o.width,l=o.height,c=t.props.bounds,f=1/0,p=1/0;if(c){var d=[[r[0],-r[1]],[-r[0],r[1]]],g=c.left,h=void 0===g?-1/0:g,v=c.top,m=void 0===v?-1/0:v,b=c.right,x=void 0===b?1/0:b,S=c.bottom,y=void 0===S?1/0:S;d.forEach(function(t){var r=t[0]!==a[0],o=t[1]!==a[1],c=Ce(e,t),d=360*u(n,c)/Math.PI;if(o){var g=c.slice();(ki(d-360)<2||ki(d-180)<2)&&(g[1]=n[1]);var v=Nr(n,g,(n[1]<c[1]?y:m)-c[1],!1,i),b=_t(v.offset,2)[1],S=v.isOutside;isNaN(b)||(p=l+(S?1:-1)*ki(b))}if(r){g=c.slice(),(ki(d-90)<2||ki(d-270)<2)&&(g[0]=n[0]);var E=Nr(n,g,(n[0]<c[0]?x:h)-c[0],!0,i),D=_t(E.offset,1)[0],C=E.isOutside;isNaN(D)||(f=s+(C?1:-1)*ki(D))}})}return{maxWidth:f,maxHeight:p}}(t,c,i,a,l),R=C.maxWidth,M=C.maxHeight,O=_t(function(t,e,r,n,i,a,s,u,l){var c=Ce(e,s),f=Hr(t,u,{vertical:[c[0]],horizontal:[c[1]]}),p=f.horizontal.offset,d=f.vertical.offset;if(o(d,ne)||o(p,ne)){var g=_t(ye({datas:l,distX:-d,distY:-p}),2),h=g[0],v=g[1];return[Math.min(i||1/0,r+s[0]*h)-r,Math.min(a||1/0,n+s[1]*v)-n]}return[0,0]}(t,e(p,d).map(function(t){return t.map(function(t){return o(t,ne)})}),r+p,n+d,R,M,i,s,l),2);p+=S=O[0],d+=y=O[1]}return[p,d]}function xn(t){return t<0&&(t=t%360+360),t%=360}function Sn(t,e){e=xn(e);var r=Math.floor(t/360),n=360*r+360-e,i=360*r+e;return ki(t-n)<ki(t-i)?n:i}function yn(t,e){t=xn(t),e=xn(e);var r=xn(t-e);return Math.min(r,360-r)}function En(t,e,r,n,a){if(!dr(t,"scalable"))return[0,0];var o=a.startOffsetWidth,s=a.startOffsetHeight,u=a.fixedPosition,l=a.fixedDirection,c=a.is3d,f=bn(t,function(t,r){return hn(function(t,e){var r=t.transformOrigin,n=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,s=i?4:3;return Re(n,v(o||a,ht(e,s),s),r,s)}(a,i(e,[t/o,r/s])),o,s,l,u,c)},o,s,r,u,n,a);return[f[0]/o,f[1]/s]}function Dn(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(r){var n=r.guideline;w(e,function(t){return t.guideline===n})||(n.direction="",e.push({guideline:n,posInfo:t}))})}),e.map(function(t){var e=t.guideline,r=t.posInfo;return It(It({},e),{direction:r.direction})})}function Cn(t,e,r,n,i,a){var o=nr(ir(t,a),e,r),s=o.vertical,u=o.horizontal,l={left:!1,top:!1,right:!1,bottom:!1};s.forEach(function(t){t.isBound&&("start"===t.direction&&(l.left=!0),"end"===t.direction&&(l.right=!0),n.push({type:"bounds",pos:t.pos}))}),u.forEach(function(t){t.isBound&&("start"===t.direction&&(l.top=!0),"end"===t.direction&&(l.bottom=!0),i.push({type:"bounds",pos:t.pos}))});var c=function(t){var e=t.props.innerBounds,r={left:!1,top:!1,right:!1,bottom:!1};if(!e)return{boundMap:r,vertical:[],horizontal:[]};var n=t.getRect(),i=[n.pos1,n.pos2,n.pos3,n.pos4],a=Ce(i,[0,0]),o=e.left,s=e.top,u=e.width,l=e.height,c=[[o,s],[o,s+l]],f=[[o,s],[o+u,s]],p=[[o+u,s],[o+u,s+l]],d=[[o,s+l],[o+u,s+l]],g=Ar(t,i,[0,0],!1),h=[],v=[];return g.forEach(function(t){var e=t.line,n=t.lineConstants,i=Tr(a,e),g=i.horizontal,m=i.vertical,b=Br(e,n,f,m,1,!0),x=Br(e,n,d,m,1,!0),S=Br(e,n,c,g,1,!0),y=Br(e,n,p,g,1,!0);b.isBound&&!r.top&&(h.push(s),r.top=!0),x.isBound&&!r.bottom&&(h.push(s+l),r.bottom=!0),S.isBound&&!r.left&&(v.push(o),r.left=!0),y.isBound&&!r.right&&(v.push(o+u),r.right=!0)}),{boundMap:r,horizontal:h,vertical:v}}(t),f=c.boundMap,p=c.vertical,d=c.horizontal;return p.forEach(function(t){P(n,function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t})>=0||n.push({type:"bounds",pos:t})}),d.forEach(function(t){P(i,function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t})>=0||i.push({type:"bounds",pos:t})}),{boundMap:l,innerBoundMap:f}}var Rn=Mi("",["resizable","scalable"]),Mn={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",vr,mr,br,xr,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[":host {\n--bounds-color: #d66;\n}\n.guideline {\npointer-events: none;\nz-index: 2;\n}\n.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}\n.guideline-group {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.guideline-group .size-value {\nposition: absolute;\ncolor: #f55;\nfont-size: 12px;\nfont-size: calc(12px * var(--zoom));\nfont-weight: bold;\n}\n.guideline-group.horizontal .size-value {\ntransform-origin: 50% 100%;\ntransform: translateX(-50%);\nleft: 50%;\nbottom: 5px;\nbottom: calc(2px + 3px * var(--zoom));\n}\n.guideline-group.vertical .size-value {\ntransform-origin: 0% 50%;\ntop: 50%;\ntransform: translateY(-50%);\nleft: 5px;\nleft: calc(2px + 3px * var(--zoom));\n}\n.guideline.gap {\nbackground: #f55;\n}\n.size-value.gap {\ncolor: #f55;\n}\n"],render:function(t,e){var r=t.state,n=r.top,i=r.left,a=r.pos1,o=r.pos2,s=r.pos3,u=r.pos4,l=r.snapRenderInfo,c=t.props.snapRenderThreshold,f=void 0===c?1:c;if(!l||!l.render||!dr(t,""))return _i(t,"boundMap",{left:!1,top:!1,right:!1,bottom:!1},function(t){return JSON.stringify(t)}),_i(t,"innerBoundMap",{left:!1,top:!1,right:!1,bottom:!1},function(t){return JSON.stringify(t)}),[];r.guidelines=cn(t);var p=Math.min(a[0],o[0],s[0],u[0]),d=Math.min(a[1],o[1],s[1],u[1]),g=l.externalPoses||[],h=ai(t.state),v=[],m=[],b=[],x=[],S=[],y=Xn(h),E=y.width,D=y.height,C=y.top,R=y.left,M=y.bottom,O=y.right,z={left:R,right:O,top:C,bottom:M,center:(R+O)/2,middle:(C+M)/2},T=g.length>0,w=T?Xn(g):{};if(!l.request){if(l.direction&&S.push(Mr(t,h,l.direction,f,f)),l.snap){var P=Xn(h);l.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),S.push(Dr(t,P,f,f))}T&&(l.center&&(w.middle=(w.top+w.bottom)/2,w.center=(w.left+w.right)/2),S.push(Dr(t,w,f,f))),S.forEach(function(t){var e=t.vertical.posInfos,r=t.horizontal.posInfos;v.push.apply(v,At([],_t(e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),!1)),m.push.apply(m,At([],_t(r.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),!1)),b.push.apply(b,At([],_t(Dn(e)),!1)),x.push.apply(x,At([],_t(Dn(r)),!1))})}var G=Cn(t,[R,O],[C,M],v,m),B=G.boundMap,I=G.innerBoundMap;T&&Cn(t,[w.left,w.right],[w.top,w.bottom],v,m,l.externalBounds);var _=At(At([],_t(b),!1),_t(x),!1),A=_.filter(function(t){return t.element&&!t.gapRects}),k=_.filter(function(t){return t.gapRects}).sort(function(t,e){return t.gap-e.gap});di(t,"onSnap",{guidelines:_.filter(function(t){return!t.element}),elements:A,gaps:k},!0);var F=_i(t,"boundMap",B,function(t){return JSON.stringify(t)},{left:!1,top:!1,right:!1,bottom:!1}),N=_i(t,"innerBoundMap",I,function(t){return JSON.stringify(t)},{left:!1,top:!1,right:!1,bottom:!1});return B!==F&&I!==N||di(t,"onBound",{bounds:B,innerBounds:I},!0),At(At(At(At(At(At([],_t(ln(t,A,[p,d],z,e)),!1),_t(function(t,e,r,n,i){var a=[];return["horizontal","vertical"].forEach(function(o){var s=e.filter(function(t){return t.type===o}).slice(0,1),u="vertical"===o?0:1,l=u?0:1,c=u?pr:fr,f=u?fr:pr,p=n[c.start],d=n[c.end],g=n[f.start],h=n[f.end];s.forEach(function(e){var n=e.gap,o=e.gapRects,s=Math.max.apply(Math,At([g],_t(o.map(function(t){return t.rect[f.start]})),!1)),v=Math.min.apply(Math,At([h],_t(o.map(function(t){return t.rect[f.end]})),!1)),m=(s+v)/2;s!==v&&m!==(g+h)/2&&o.forEach(function(e){var o=e.rect,s=e.className,f=[r[0],r[1]];if(o[c.end]<p)f[u]+=o[c.end]-p;else{if(!(d<o[c.start]))return;f[u]+=o[c.start]-p-n}f[l]+=m-g,a.push(un(t,u?"vertical":"horizontal","gap",a.length,n,f,s,i))})})}),a}(t,k,[p,d],z,e)),!1),_t(sn(t,"horizontal",x,[i,n],z,e)),!1),_t(sn(t,"vertical",b,[i,n],z,e)),!1),_t(on(t,"horizontal",m,p,n,E,0,e)),!1),_t(on(t,"vertical",v,d,i,D,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},gn(t)},drag:function(t){var e=t.state;gn(t)||(e.guidelines=cn(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!Rn(t,e)&&!rn(t,e))||(!e.isRequest&&e.inputEvent?n(e.inputEvent.target,On("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,gn(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,gn(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function On(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T.apply(void 0,At([Qt],_t(t),!1))}function zn(t){t()}function Tn(t){return t&&"none"!==t?_(t)?t:l(t):[1,0,0,1,0,0]}function wn(t,e,r){return Q(e,tt(r,e),t,tt(r.map(function(t){return-t}),e))}function Pn(t){return Gn(gi(t,":before").transformOrigin).map(function(e,r){var n=V(e),i=n.value,a=n.unit;return i*function(t,e,r){return"%"===e?Wn(t.ownerSVGElement)[r?"width":"height"]/100:1}(t,a,0===r)})}function Gn(t){return t?t.split(" "):["0","0"]}function Bn(t){var e=Le(t)("transform");if(e&&"none"!==e)return e;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var n=r.length;if(!n)return"";for(var i=[],a=function(t){var e=r[t].matrix;i.push("matrix(".concat(["a","b","c","d","e","f"].map(function(t){return e[t]}).join(", "),")"))},o=0;o<n;++o)a(o);return i.join(" ")}return""}function In(t,e,r,n,i){var a,o,s,u,l=vt(t)||mt(t),c=!1;if(!t||r)s=t;else{var f=null===(a=null==t?void 0:t.assignedSlot)||void 0===a?void 0:a.parentElement,p=t.parentElement;f?(c=!0,u=p,s=f):s=p}for(var d=!1,g=t===e||s===e,h="relative",v=1,m=parseFloat(null==i?void 0:i("zoom"))||1,b=null==i?void 0:i("position");s&&s!==l;){e===s&&(g=!0);var x=Le(s),S=s.tagName.toLowerCase(),y=Bn(s),E=x("willChange"),D=parseFloat(x("zoom"))||1;if(h=x("position"),n&&1!==D){v=D;break}if(!r&&n&&1!==m&&b&&"absolute"!==b||"svg"===S||"foreignobject"===S||"static"!==h||y&&"none"!==y||"transform"===E)break;var C=null===(o=null==t?void 0:t.assignedSlot)||void 0===o?void 0:o.parentNode,R=s.parentNode;C&&(c=!0,u=R);var M=R;if(M&&11===M.nodeType){d=!0,h=Le(s=M.host)("position");break}s=M,h="relative"}return{offsetZoom:v,hasSlot:c,parentSlotElement:u,isCustomElement:d,isStatic:"static"===h,isEnd:g||!s||s===l,offsetParent:s||l}}function _n(t,e){var r,n,i,a=t.tagName.toLowerCase(),o=t.offsetLeft,s=t.offsetTop,u=Le(t),l=dt(o),c=!l;return c||"svg"===a&&!t.ownerSVGElement?i=(n=Gn(u("transformOrigin")).map(function(t){return parseFloat(t)})).slice():(i=(n=Xt?Pn(t):Gn(u("transformOrigin")).map(function(t){return parseFloat(t)})).slice(),c=!0,"svg"===a?(o=0,s=0):(r=_t(function(t,e,r){var n=t.tagName.toLowerCase();if(!t.getBBox||!r&&"g"===n)return[0,0,0,0];var i=Le(t),a="fill-box"===i("transform-box"),o=t.getBBox(),s=Wn(t.ownerSVGElement),u=o.x,l=o.y;"foreignobject"!==n||u||l||(u=parseFloat(t.getAttribute("x"))||0,l=parseFloat(t.getAttribute("y"))||0);var c=u-s.x,f=l-s.y,p=a?e[0]:e[0]-c,d=a?e[1]:e[1]-f;return[c,f,p,d]}(t,n,t===e&&"g"===e.tagName.toLowerCase()),4),o=r[0],s=r[1],n[0]=r[2],n[1]=r[3])),{tagName:a,isSVG:l,hasOffset:c,offset:[o||0,s||0],origin:n,targetOrigin:i}}function An(t,e){var r=Le(t),n=Le(mt(t)),i=n("position");if(!(e||i&&"static"!==i))return[0,0];var a=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return"absolute"===r("position")&&("auto"===r("top")&&"auto"===r("bottom")||(o=0),"auto"===r("left")&&"auto"===r("right")||(a=0)),[a,o]}function kn(t){t.forEach(function(t){var e=t.matrix;e&&(t.matrix=c(e,3,4))})}function Fn(t){for(var e=t.parentElement,r=!1,n=mt(t);e;){var i=gi(e).transform;if(i&&"none"!==i){r=!0;break}if(e===n)break;e=e.parentElement}return{fixedContainer:e||n,hasTransform:r}}function Nn(t,r){return void 0===r&&(r=t.length>9),"".concat(r?"matrix3d":"matrix","(").concat(e(t,!r).join(","),")")}function Wn(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||r,clientWidth:e,clientHeight:r}}function qn(t,e){var r,n=Wn(t),i=n.width,a=n.height,o=n.clientWidth,s=n.clientHeight,u=o/i,l=s/a,c=t.preserveAspectRatio.baseVal,f=c.align,p=c.meetOrSlice,d=[0,0],g=[u,l],h=[0,0];if(1!==f){var v=(f-2)%3,m=Math.floor((f-2)/3);d[0]=i*v/2,d[1]=a*m/2;var b=2===p?Math.max(l,u):Math.min(u,l);g[0]=b,g[1]=b,h[0]=(o-i)/2*v,h[1]=(s-a)/2*m}var x=ht(g,e);return r=_t(h,2),x[e*(e-1)]=r[0],x[e*(e-1)+1]=r[1],wn(x,e,d)}function Hn(t,e,r){return x(t,B(e,r),r)}function Yn(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map(function(e){return Hn(t,e,n)})}function Xn(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]}),n=Math.min.apply(Math,At([],_t(e),!1)),i=Math.min.apply(Math,At([],_t(r),!1)),a=Math.max.apply(Math,At([],_t(e),!1)),o=Math.max.apply(Math,At([],_t(r),!1));return{left:n,top:i,right:a,bottom:o,width:a-n,height:o-i}}function Ln(t,e,r,n){return Xn(Yn(t,e,r,n))}function jn(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Vn(t,e){return jn([e[0]-t[0],e[1]-t[1]])}function Un(t,e,r,n){void 0===r&&(r=1),void 0===n&&(n=u(t,e));var i=Vn(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function Zn(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,a=r.reduce(function(t,e){return t+e[0]},0)/i,o=r.reduce(function(t,e){return t+e[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Kn(t,e){var r=t[e];return _(r)?It(It({},t),r):t}function Jn(t){var e=t&&!dt(t.offsetWidth),r=0,n=0,i=0,a=0,o=0,s=0,u=0,l=0,c=0,f=0,p=0,d=0,g=1/0,h=1/0,v=1/0,m=1/0,b=0,x=0,S=!1;if(t)if(!e&&t.ownerSVGElement){var y=t.getBBox();S=!0,o=r=y.width,s=n=y.height,u=r,l=n,i=r,a=n}else{var E=Le(t),C=t.style,R="border-box"===E("boxSizing"),M=parseFloat(E("borderLeftWidth"))||0,O=parseFloat(E("borderRightWidth"))||0,z=parseFloat(E("borderTopWidth"))||0,T=parseFloat(E("borderBottomWidth"))||0,w=(parseFloat(E("paddingLeft"))||0)+(parseFloat(E("paddingRight"))||0),P=(parseFloat(E("paddingTop"))||0)+(parseFloat(E("paddingBottom"))||0),G=w+(M+O),B=P+(z+T),I=E("position"),_=0,A=0;if("clientLeft"in t){var k=null;if("absolute"===I)k=In(t,mt(t)).offsetParent;else k=t.parentElement;if(k){var F=Le(k);_=parseFloat(F("width")),A=parseFloat(F("height"))}}c=Math.max(w,D(E("minWidth"),_)||0),f=Math.max(P,D(E("minHeight"),A)||0),g=D(E("maxWidth"),_),h=D(E("maxHeight"),A),isNaN(g)&&(g=1/0),isNaN(h)&&(h=1/0),b=D(C.width,0)||0,x=D(C.height,0)||0,o=parseFloat(E("width"))||0,s=parseFloat(E("height"))||0,r=u=ki(o-b)<1?yt(c,b||o,g):o,n=l=ki(s-x)<1?yt(f,x||s,h):s,i=u,a=l,R?(v=g,m=h,p=c,d=f,u=r-G,l=n-B):(v=g+G,m=h+B,p=c+G,d=f+B,r=u+G,n=l+B),i=u+w,a=l+P}return{svg:S,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:l,inlineCSSWidth:b,inlineCSSHeight:x,cssWidth:o,cssHeight:s,minWidth:c,minHeight:f,maxWidth:g,maxHeight:h,minOffsetWidth:p,minOffsetHeight:d,maxOffsetWidth:v,maxOffsetHeight:m}}function $n(t,e){return u(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Qn(t,e){var r=t===mt(t)||t===vt(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(e.height,n.clientHeight),n.scrollHeight=Math.max(e.height,n.scrollHeight)),n.overflow="visible"!==Le(t)("overflow"),It(It({},e),n)}function ti(t,e,r,n){var i=t.left,a=t.right,o=t.top,s=t.bottom,u=e.top,l=e.left,c={left:l+i,top:u+o,right:l+a,bottom:u+s,width:a-i,height:s-o};return r&&n?Qn(r,c):c}function ei(t,e){var r=0,n=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();r=o.left,n=o.top,i=o.width,a=o.height}var s={left:r,top:n,width:i,height:a,right:r+i,bottom:n+a};return t&&e?Qn(t,s):s}function ri(t,e,r,n){var i;if(t)i=t;else if(e)i=[0,0];else{i=ni(r.target,n)}return i}function ni(t,e){if(t){var r=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(e.deg=r,n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function ii(t,e){return[i(e,t[0]),i(e,t[1]),i(e,t[2]),i(e,t[3])]}function ai(t){var e=t.left,r=t.top;return ii([t.pos1,t.pos2,t.pos3,t.pos4],[e,r])}function oi(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(e){e.unset&&e.unset(t)})}function si(t,e){var r=e?"controlGesto":"targetGesto",n=t[r];!1===(null==n?void 0:n.isIdle())&&oi(t,e),null==n||n.unset(),t[r]=null}function ui(t,e){if(e){var r=we(e);r.nextStyle=It(It({},r.nextStyle),t)}return{style:t,cssText:y(t).map(function(e){return"".concat(I(e,"-"),": ").concat(t[e],";")}).join("")}}function li(t,e,r){var n=e.afterTransform||e.transform;return It(It({},ui(It(It(It({},t.style),e.style),{transform:n}),r)),{afterTransform:n,transform:t.transform})}function ci(t,e,r,n){var i=e.datas;i.datas||(i.datas={});var a=It(It({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:!1!==e.isTrusted,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return i.isStartEvent?n||(i.lastEvent=a):i.isStartEvent=!0,a}function fi(t,e,r){var n=e.datas,i="isDrag"in r?r.isDrag:e.isDrag;return n.datas||(n.datas={}),It(It({isDrag:i},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas,isFirstDrag:!!e.isFirstDrag})}function pi(t,e,r){t._emitter.on(e,r)}function di(t,e,r,n,i){return t.triggerEvent(e,r,n,i)}function gi(t,e){return it(t).getComputedStyle(t,e)}function hi(t,e,r){var n={},i={};return t.filter(function(t){var a=t.name;if(n[a]||!e.some(function(e){return t[e]}))return!1;if(!r&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return n[a]=!0,!0})}function vi(t,e){return t===e||null==t&&null==e}function mi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var i=t[n];if(!dt(i))return i}return t[r]}function bi(t,e){var r=[],n=[];return t.forEach(function(i,a){var o=e(i,a,t),s=n.indexOf(o),u=r[s]||[];-1===s&&(n.push(o),r.push(u)),u.push(i)}),r}function xi(t){return t.reduce(function(t,e){return t.concat(e)},[])}function Si(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return ki(e)-ki(t)}),t[0]}function yi(t,e,r){return x(m(t,r),B(e,r),r)}function Ei(t,e,r,n){if(!r[0]&&!r[1])return e;var a=Hn(t,[vn(r[0]||1),0],n),o=Hn(t,[0,vn(r[1]||1)],n),s=Hn(t,[r[0]/jn(a),r[1]/jn(o)],n);return i(e,s)}function Di(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function Ci(t){return ki(t)<=ie?0:t}function Ri(t){return function(e){if(!e.isDragging(t))return"";var r=function(t,e){var r,n=t.targetGesto,i=t.controlGesto;return(null==n?void 0:n.isFlag())&&(r=n.getEventData()[e]),!r&&(null==i?void 0:i.isFlag())&&(r=i.getEventData()[e]),r||{}}(e,t),n=r.deg;return n?On("view-control-rotation".concat(n)):""}}function Mi(t,e){return void 0===e&&(e=[t]),function(r,i){if(i.isRequest)return!!e.some(function(t){return i.requestAble===t})&&i.parentDirection;var a=i.inputEvent.target;return n(a,On("direction"))&&(!t||n(a,On(t)))}}function Oi(t,e){return t?q(t)?t:p(t)?e?document.querySelector(t):t:H(t)?t():Y(t)?t:"current"in t?t.current:t:null}function zi(t,e){return t?((r=t)&&_(r)&&!q(r)&&(d(r)||"length"in r)?[].slice.call(t):[t]).reduce(function(t,r){return p(r)&&e?At(At([],_t(t),!1),_t([].slice.call(document.querySelectorAll(r))),!1):(d(r)?t.push(zi(r,e)):t.push(Oi(r,e)),t)},[]):[];var r}function Ti(t,e){var r=t.rootMatrix,n=t.is3d,i=m(r,n?4:3);return n||(i=c(i,3,4)),i[12]=0,i[13]=0,i[14]=0,at(i,e)}function wi(t,e,r,n,i){var a=_t(t,2),o=a[0],s=a[1],l=0,c=0;if(i&&o&&s){var f=u([0,0],e),p=u([0,0],n),d=jn(e),g=Math.cos(f-p)*d;if(n[0])if(n[1]){var h=n[0]*o,v=n[1]*s,m=Math.atan2(h+e[0],v+e[1]),b=Math.atan2(h,v);m<0&&(m+=2*Math.PI),b<0&&(b+=2*Math.PI);var x=0;(x=ki(m-b)<Math.PI/2||ki(m-b)>Math.PI/2*3?m-b:m-(b+=Math.PI))>2*Math.PI?x-=2*Math.PI:x>Math.PI?x=2*Math.PI-x:x<-Math.PI&&(x=-2*Math.PI-x);var S=jn([h+e[0],v+e[1]])*Math.cos(x);l=S*Math.sin(b)-h,c=S*Math.cos(b)-v,n[0]<0&&(l*=-1),n[1]<0&&(c*=-1)}else c=(l=g)/r;else l=(c=g)*r}else l=n[0]*e[0],c=n[1]*e[1];return[l,c]}function Pi(t,e,r,n){var i,a=r.ratio,o=r.startOffsetWidth,s=r.startOffsetHeight,u=0,l=0,c=n.distX,f=n.distY,p=n.pinchScale,d=n.parentDistance,g=n.parentDist,h=n.parentScale,v=r.fixedDirection,m=[0,1].map(function(e){return ki(t[e]-v[e])}),b=[0,1].map(function(t){var e=m[t];return 0!==e&&(e=2/e),e});if(g)u=g[0],l=g[1],e&&(u?l||(l=u/a):u=l*a);else if(k(p))u=(p-1)*o,l=(p-1)*s;else if(h)u=(h[0]-1)*o,l=(h[1]-1)*s;else if(d){var x=o*m[0],S=s*m[1],y=jn([x,S]);u=d/y*x*b[0],l=d/y*S*b[1]}else{var E=ye({datas:r,distX:c,distY:f});u=(i=_t(wi([o,s],E=b.map(function(t,e){return E[e]*t}),a,t,e),2))[0],l=i[1]}return{distWidth:u,distHeight:l}}function Gi(t,e){if(e){if("left"===t)return{x:"0%",y:"50%"};if("top"===t)return{x:"50%",y:"50%"};if("center"===t)return{x:"50%",y:"50%"};if("right"===t)return{x:"100%",y:"50%"};if("bottom"===t)return{x:"50%",y:"100%"};var r=_t(t.split(" "),2),n=r[0],i=r[1],a=Gi(n||""),o=Gi(i||""),s=It(It({},a),o),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return"left"===t?{x:"0%"}:"right"===t?{x:"100%"}:"top"===t?{y:"0%"}:"bottom"===t?{y:"100%"}:t?"center"===t?{value:"50%"}:{value:t}:{}}function Bi(t,e,r){var n=Gi(t,!0),i=n.x,a=n.y;return[D(i,e)||0,D(a,r)||0]}function Ii(t,e){return t.length===e.length&&t.every(function(t,r){var n=e[r],i=d(t),a=d(n);return i&&a?Ii(t,n):!i&&!a&&t===n})}function _i(t,e,r,n,i){var a=t._store,o=a[e];if(!(e in a)){if(null==i)return a[e]=r,r;a[e]=i,o=i}return o===r||n(o)===n(r)?o:(a[e]=r,r)}function Ai(t){return t>=0?1:-1}function ki(t){return Math.abs(t)}function Fi(t,e){return F(t).map(function(t){return e(t)})}function Ni(t){return k(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var Wi=kt("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,n=e.targets,i=e.angle,a=e.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var l="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),f=(!0===s?t.controlAbles:u.filter(function(t){return s.indexOf(t.name)>-1})).filter(function(t){return t.canPinch&&t[c]}),p=ci(t,e,{});n&&(p.targets=n);var d=di(t,l,p);r.isPinch=!1!==d,r.ables=f;var g=r.isPinch;return!!g&&(f.forEach(function(r){if(a[r.name]=a[r.name]||{},r[c]){var n=It(It({},e),{datas:a[r.name],parentRotate:i,isPinch:!0});r[c](t,n)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},g)},pinch:function(t,e){var r=e.datas,n=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,s=e.targets,u=e.angle;if(r.isPinch){var l=i*(1-1/n),c=ci(t,e,{});s&&(c.targets=s);var f="onPinch".concat(s?"Group":"");di(t,f,c);var p=r.ables,d="drag".concat(s?"Group":"","Control");return p.forEach(function(r){r[d]&&r[d](t,It(It({},e),{datas:a[r.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(r.isPinch){var s="onPinch".concat(a?"Group":"","End"),u=fi(t,e,{isDrag:n});a&&(u.targets=a),di(t,s,u);var l=r.ables,c="drag".concat(a?"Group":"","ControlEnd");return l.forEach(function(r){r[c]&&r[c](t,It(It({},e),{isDrag:n,datas:o[r.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,It(It({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,It(It({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,It(It({},e),{targets:t.props.targets}))}}),qi=Mi("scalable"),Hi={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:tr("scalable"),dragControlCondition:qi,viewClassName:Ri("scalable"),dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,a=ri(e.parentDirection,n,i,r),o=t.state,s=o.width,u=o.height,l=o.targetTransform,c=o.target,f=o.pos1,p=o.pos2,d=o.pos4;if(!a||!c)return!1;n||ve(t,e),r.datas={},r.transform=l,r.prevDist=[1,1],r.direction=a,r.startOffsetWidth=s,r.startOffsetHeight=u,r.startValue=[1,1];var h=!a[0]&&!a[1]||a[0]||!a[1];function v(t){r.ratio=t&&isFinite(t)?t:0}function m(t){var e=Vr(r.startPositions,t);r.fixedDirection=e.fixedDirection,r.fixedPosition=e.fixedPosition,r.fixedOffset=e.fixedOffset}Oe(t,e,"scale"),r.isWidth=h,r.startPositions=ai(t.state),r.setFixedDirection=m,v(g(f,p)/g(p,d)),m([-a[0],-a[1]]);var b=function(t){r.minScaleSize=t},x=function(t){r.maxScaleSize=t};b([-1/0,-1/0]),x([1/0,1/0]);var S=ci(t,e,It(It({direction:a,set:function(t){r.startValue=t},setRatio:v,setFixedDirection:m,setMinScaleSize:b,setMaxScaleSize:x},Me(t,e)),{dragStart:jr.dragStart(t,(new de).dragStart([0,0],e))})),y=di(t,"onScaleStart",S);return r.startFixedDirection=r.fixedDirection,!1!==y&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:a}),!!r.isScale&&S},dragControl:function(t,e){me(t,e,"scale");var r=e.datas,n=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,u=e.dragClient,l=e.isRequest,c=e.useSnap,p=e.resolveMatrix,g=r.prevDist,h=r.direction,v=r.startOffsetWidth,m=r.startOffsetHeight,b=r.isScale,x=r.startValue,S=r.isWidth,y=r.ratio;if(!b)return!1;var E=t.props,D=E.throttleScale,C=E.parentMoveable,R=h;h[0]||h[1]||(R=[1,1]);var M=y&&(null!=n?n:E.keepRatio)||!1,O=t.state,z=[x[0],x[1]];function T(){var t=Pi(R,M,r,e),n=t.distWidth,i=t.distHeight,a=v?(v+n)/v:1,o=m?(m+i)/m:1;x[0]||(z[0]=n/v),x[1]||(z[1]=i/m);var s=(R[0]||M?a:1)*z[0],u=(R[1]||M?o:1)*z[1];return 0===s&&(s=Ai(g[0])*ae),0===u&&(u=Ai(g[1])*ae),[s,u]}var w=T();if(!a&&t.props.groupable){var P=(O.snapRenderInfo||{}).direction;d(P)&&(P[0]||P[1])&&(O.snapRenderInfo={direction:h,request:e.isRequest})}di(t,"onBeforeScale",ci(t,e,{scale:w,setFixedDirection:function(t){return r.setFixedDirection(t),w=T()},startFixedDirection:r.startFixedDirection,setScale:function(t){w=t}},!0));var G,B,I=[w[0]/z[0],w[1]/z[1]],_=u,A=[0,0],k=Ai(I[0]*I[1]),F=!u&&!i&&a;if(F||p?_=_e(t,r.targetAllTransform,[0,0],[0,0],r):u||(_=r.fixedPosition),a||(A=En(t,I,h,!c&&l,r)),M){R[0]&&R[1]&&A[0]&&A[1]&&(Math.abs(A[0]*v)>Math.abs(A[1]*m)?A[1]=0:A[0]=0);var N=!A[0]&&!A[1];if(N&&(S?I[0]=o(I[0]*z[0],D)/z[0]:I[1]=o(I[1]*z[1],D)/z[1]),R[0]&&!R[1]||A[0]&&!A[1]||N&&S){I[0]+=A[0];var W=v*I[0]*z[0]/y;I[1]=Ai(k*I[0])*ki(W/m/z[1])}else if(!R[0]&&R[1]||!A[0]&&A[1]||N&&!S){I[1]+=A[1];var q=m*I[1]*z[1]*y;I[0]=Ai(k*I[1])*ki(q/v/z[0])}}else I[0]+=A[0],I[1]+=A[1],A[0]||(I[0]=o(I[0]*z[0],D)/z[0]),A[1]||(I[1]=o(I[1]*z[1],D)/z[1]);0===I[0]&&(I[0]=Ai(g[0])*ae),0===I[1]&&(I[1]=Ai(g[1])*ae),G=I,B=[z[0],z[1]],w=[G[0]*B[0],G[1]*B[1]];var H=[v,m],Y=[v*w[0],m*w[1]];Y=f(Y,r.minScaleSize,r.maxScaleSize,!!M&&y),w=Fi(2,function(t){return H[t]?Y[t]/H[t]:Y[t]}),I=Fi(2,function(t){return w[t]/z[t]});var X=Fi(2,function(t){return g[t]?I[t]/g[t]:I[t]}),L="scale(".concat(I.join(", "),")"),j="scale(".concat(w.join(", "),")"),V=be(r,j,L),U=!x[0]||!x[1],Z=function(t,e,r,n,i,a,o){return Ae(t,e,r,n,i,a,o)}(t,U?j:L,r.fixedDirection,_,r.fixedOffset,r,U),K=F?Z:s(Z,r.prevInverseDist||[0,0]);if(r.prevDist=I,r.prevInverseDist=Z,w[0]===g[0]&&w[1]===g[1]&&K.every(function(t){return!t})&&!C&&!F)return!1;var J=ci(t,e,It({offsetWidth:v,offsetHeight:m,direction:h,scale:w,dist:I,delta:X,isPinch:!!a},Ie(t,V,K,a,e)));return di(t,"onScale",J),J},dragControlEnd:function(t,e){var r=e.datas;if(!r.isScale)return!1;r.isScale=!1;var n=fi(t,e,{});return di(t,"onScaleEnd",n),n},dragGroupControlCondition:qi,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var i=je(t,"resizable",e);r.moveableScale=t.scale;var a=Ue(t,this,"dragControlStart",e,function(e,n){return Ze(t,e,r,n)}),o=function(e){n.setFixedDirection(e),a.forEach(function(n,a){n.setFixedDirection(e),Ze(t,n.moveable,r,i[a])})};r.setFixedDirection=o;var s=It(It({},n),{targets:t.props.targets,events:a,setFixedDirection:o}),u=di(t,"onScaleGroupStart",s);return r.isScale=!1!==u,!!r.isScale&&s},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){pi(t,"onBeforeScale",function(r){di(t,"onBeforeScaleGroup",ci(t,e,It(It({},r),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var a=n.dist,o=r.moveableScale;t.scale=[a[0]*o[0],a[1]*o[1]];var s=t.props.keepRatio,u=r.fixedPosition,l=Ue(t,this,"dragControl",e,function(e,r){var n=_t(x(A(t.rotation/180*Math.PI,3),[r.datas.originalX*a[0],r.datas.originalY*a[1],1],3),2),o=n[0],l=n[1];return It(It({},r),{parentDist:null,parentScale:a,parentKeepRatio:s,dragClient:i(u,[o,l])})}),c=It({targets:t.props.targets,events:l},n);return di(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var n=Ue(t,this,"dragControlEnd",e);return di(t,"onScaleGroupEnd",fi(t,e,{targets:t.props.targets,events:n})),r}},request:function(){var t={},e=0,r=0,n=!1;return{isControl:!0,requestStart:function(e){return n=e.useSnap,{datas:t,parentDirection:e.direction||[1,1],useSnap:n}},request:function(i){return e+=i.deltaWidth,r+=i.deltaHeight,{datas:t,parentDist:[e,r],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function Yi(t,e){return t.map(function(t,r){return N(t,e[r],1,2)})}function Xi(t,e,r){var n=u(t,e),i=u(t,r)-n;return i>=0?i:i+2*Math.PI}var Li={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Ri("warpable"),render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,a=r.warpable,o=r.zoom;if(n||i||!a)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,f=s.pos4,p=Yi(u,l),d=Yi(l,u),g=Yi(u,c),h=Yi(c,u),v=Yi(c,f),m=Yi(f,c),b=Yi(l,f),x=Yi(f,l);return At([e.createElement("div",{className:On("line"),key:"middeLine1",style:Un(p,v,o)}),e.createElement("div",{className:On("line"),key:"middeLine2",style:Un(d,m,o)}),e.createElement("div",{className:On("line"),key:"middeLine3",style:Un(g,b,o)}),e.createElement("div",{className:On("line"),key:"middeLine4",style:Un(h,x,o)})],_t(er(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return n(r,On("direction"))&&n(r,On("warpable"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.props.target,a=ni(n.target,r);if(!a||!i)return!1;var o=t.state,u=o.transformOrigin,l=o.is3d,f=o.targetTransform,p=o.targetMatrix,d=o.width,g=o.height,h=o.left,v=o.top;return r.datas={},r.targetTransform=f,r.warpTargetMatrix=l?p:c(p,3,4),r.targetInverseMatrix=b(m(r.warpTargetMatrix,4),3,4),r.direction=a,r.left=h,r.top=v,r.poses=[[0,0],[d,0],[0,g],[d,g]].map(function(t){return s(t,u)}),r.nextPoses=r.poses.map(function(t){var e=_t(t,2),n=e[0],i=e[1];return x(r.warpTargetMatrix,[n,i,0,1],4)}),r.startValue=S(4),r.prevMatrix=S(4),r.absolutePoses=ai(o),r.posIndexes=Ee(a),ve(t,e),Oe(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:a},!1!==di(t,"onWarpStart",ci(t,e,It({set:function(t){r.startValue=t}},Me(t,e))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,a=e.distX,o=e.distY,s=r.targetInverseMatrix,u=r.prevMatrix,l=r.isWarp,c=r.startValue,f=r.poses,p=r.posIndexes,d=r.absolutePoses;if(!l)return!1;if(me(t,e,"matrix3d"),dr(t,"warpable")){var g=p.map(function(t){return d[t]});g.length>1&&g.push([(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2]);var b=Hr(t,n,{horizontal:g.map(function(t){return t[1]+o}),vertical:g.map(function(t){return t[0]+a})}),x=b.horizontal,S=b.vertical;o-=x.offset,a-=S.offset}var y=ye({datas:r,distX:a,distY:o},!0),E=r.nextPoses.slice();if(p.forEach(function(t){E[t]=i(E[t],y)}),!re.every(function(t){return e=t.map(function(t){return f[t]}),r=t.map(function(t){return E[t]}),n=Xi(e[0],e[1],e[2]),i=Xi(r[0],r[1],r[2]),a=Math.PI,!(n>=a&&i<=a||n<=a&&i>=a);var e,r,n,i,a}))return!1;var D=h(f[0],f[2],f[1],f[3],E[0],E[2],E[1],E[3]);if(!D.length)return!1;var C=xe(r,v(s,D,4),!0),R=v(m(u,4),C,4);r.prevMatrix=C;var M=v(c,C,4),O=be(r,"matrix3d(".concat(M.join(", "),")"),"matrix3d(".concat(C.join(", "),")"));return Te(e,O),di(t,"onWarp",ci(t,e,It({delta:R,matrix:M,dist:C,multiply:v,transform:O},ui({transform:O},e)))),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,di(t,"onWarpEnd",fi(t,e,{})),n)}},ji=On("area-pieces"),Vi=On("area-piece"),Ui=On("avoid"),Zi=On("view-dragging");function Ki(t){var e=t.areaElement;if(e){var r=t.state,n=r.width,i=r.height;nt(e,Ui),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function Ji(t){return t.createElement("div",{key:"area_pieces",className:ji},t.createElement("div",{className:Vi}),t.createElement("div",{className:Vi}),t.createElement("div",{className:Vi}),t.createElement("div",{className:Vi}))}var $i={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var r=t.props,n=r.target,i=r.dragArea,a=r.groupable,o=r.passDragArea,s=t.getState(),u=s.width,l=s.height,c=s.renderPoses,f=o?On("area","pass"):On("area");if(a)return[e.createElement("div",{key:"area",ref:O(t,"areaElement"),className:f}),Ji(e)];if(!n||!i)return[];var p=h([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=p.length?Nn(p,!0):"none";return[e.createElement("div",{key:"area",ref:O(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:d}}),Ji(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;r.isDragArea=!1;var a=t.areaElement,o=t.state,s=o.moveableClientRect,u=o.renderPoses,l=o.rootMatrix,c=o.is3d,f=s.left,p=s.top,d=Xn(u),g=d.left,h=d.top,v=d.width,m=d.height,b=_t(yi(l,[n-f,i-p],c?4:3),2),x=b[0],S=b[1],y=[{left:g,top:h,width:v,height:(S-=h)-10},{left:g,top:h,width:(x-=g)-10,height:m},{left:g,top:h+S+10,width:v,height:m-S-10},{left:g+x+10,top:h,width:v-x-10,height:m}],E=[].slice.call(a.nextElementSibling.children);y.forEach(function(t,e){E[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")}),M(a,Ui),o.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,n=e.inputEvent;if(this.enableNativeEvent(t),!n)return!1;r.isDragArea||(r.isDragArea=!0,Ki(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var r=e.inputEvent,n=e.datas;if(!r)return!1;n.isDragArea||Ki(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Ki(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&R(function(){e.disableNativeEvent=!1})}},Qi=kt("origin",{props:["origin","svgOrigin"],render:function(t,e){var r,n=t.props,i=n.zoom,a=n.svgOrigin,o=n.groupable,u=t.getState(),l=u.beforeOrigin,c=u.rotation,f=u.svg,p=u.allMatrix,d=u.is3d,g=u.left,h=u.top,v=u.offsetWidth,m=u.offsetHeight;if(!o&&f&&a){var b=_t(Bi(a,v,m),2),x=Hn(p,[b[0],b[1]],d?4:3);r=Zn(c,i,s(x,[g,h]))}else r=Zn(c,i,l);return[e.createElement("div",{className:On("control","origin"),style:r,key:"beforeOrigin"})]}});function ta(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var ea={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var r=t.props,n=r.scrollContainer,i=void 0===n?t.getContainer():n,a=r.scrollOptions,o=new E,s=Oi(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",l=e.targets;o.on("scroll",function(r){var n=r.container,i=r.direction,a=ci(t,e,{scrollContainer:n,direction:i}),o=l?"onScrollGroup":"onScroll";l&&(a.targets=l),di(t,o,a)}).on("move",function(e){var r=e.offsetX,n=e.offsetY,i=e.inputEvent;t[u].scrollBy(r,n,i.inputEvent,!1)}).on("scrollDrag",function(e){(0,e.next)(t[u].getCurrentEvent())}),o.dragStart(e,It({container:s},a))},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,i=n.scrollContainer,a=void 0===i?t.getContainer():i,o=n.scrollThreshold,s=void 0===o?0:o,u=n.scrollThrottleTime,l=void 0===u?0:u,c=n.getScrollPosition,f=void 0===c?ta:c,p=n.scrollOptions;return r.drag(e,It({container:a,threshold:s,throttleTime:l,getScrollPosition:function(t){return f({scrollContainer:t.container,direction:t.direction})}},p)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,It(It({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,It(It({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,It(It({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,It(It({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,It(It({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,It(It({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,It(It({},e),{targets:t.props.targets}))},unset:function(t){var e,r=t.state;null===(e=r.dragScroll)||void 0===e||e.dragEnd(),r.dragScroll=null}},ra={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},na=kt("padding",{props:["padding"],render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=Ni(r.padding||{}),i=n.left,a=n.top,o=n.right,s=n.bottom,u=t.getState(),l=u.renderPoses,c=[u.pos1,u.pos2,u.pos3,u.pos4],f=[];return i>0&&f.push([0,2]),a>0&&f.push([0,1]),o>0&&f.push([1,3]),s>0&&f.push([2,3]),f.map(function(t,r){var n=_t(t,2),i=n[0],a=n[1],o=c[i],s=c[a],u=l[i],f=l[a],p=h([0,0],[100,0],[0,100],[100,100],o,s,u,f);if(p.length)return e.createElement("div",{key:"padding".concat(r),className:On("padding"),style:{transform:Nn(p,!0)}})})}}),ia=["nw","ne","se","sw"];function aa(t,e){var r=t[0]+t[1],n=r>e?e/r:1;return t[0]*=n,t[1]=e-t[1]*n,t}var oa=[1,2,5,6],sa=[0,3,4,7],ua=[1,-1,-1,1],la=[1,1,-1,-1];function ca(t,e,r,n,i,a,o,s){void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=r),void 0===s&&(s=n);var u=[],l=!1,c=t.filter(function(t){return!t.virtual}),f=c.map(function(t){var c=t.horizontal,f=t.vertical,p=t.pos;if(f&&!l&&(l=!0,u.push("/")),l){var d=Math.max(0,1===f?p[1]-a:s-p[1]);return u.push(Di(d,n,e)),d}d=Math.max(0,1===c?p[0]-i:o-p[0]);return u.push(Di(d,r,e)),d});return{radiusPoses:c,styles:u,raws:f}}function fa(t){for(var e=[0,0],r=[0,0],n=t.length,i=0;i<n;++i){var a=t[i];a.sub&&(a.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,r[0]=i+1),a.vertical&&(0===r[1]&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function pa(t,e,r,n,i,a,o){var s,u,l,c;void 0===a&&(a=[0,0]),void 0===o&&(o=!1);var f=t.indexOf("/"),p=(f>-1?t.slice(0,f):t).length,d=t.slice(0,p),g=t.slice(p+1),h=d.length,v=g.length,m=v>0,b=_t(d,4),x=b[0],S=void 0===x?"0px":x,y=b[1],E=void 0===y?S:y,C=b[2],R=void 0===C?S:C,M=b[3],O=void 0===M?E:M,z=_t(g,4),T=z[0],w=void 0===T?S:T,P=z[1],G=void 0===P?m?w:E:P,B=z[2],I=void 0===B?m?w:R:B,_=z[3],A=void 0===_?m?G:O:_,k=[S,E,R,O].map(function(t){return D(t,e)}),F=[w,G,I,A].map(function(t){return D(t,r)}),N=k.slice(),W=F.slice();s=_t(aa([N[0],N[1]],e),2),N[0]=s[0],N[1]=s[1],u=_t(aa([N[3],N[2]],e),2),N[3]=u[0],N[2]=u[1],l=_t(aa([W[0],W[3]],r),2),W[0]=l[0],W[3]=l[1],c=_t(aa([W[1],W[2]],r),2),W[1]=c[0],W[2]=c[1];var q=o?N:N.slice(0,Math.max(a[0],h)),H=o?W:W.slice(0,Math.max(a[1],v));return At(At([],_t(q.map(function(t,e){var a=ia[e];return{virtual:e>=h,horizontal:ua[e],vertical:0,pos:[n+t,i+(-1===la[e]?r:0)],sub:!0,raw:k[e],direction:a}})),!1),_t(H.map(function(t,r){var a=ia[r];return{virtual:r>=v,horizontal:0,vertical:la[r],pos:[n+(-1===ua[r]?e:0),i+t],sub:!0,raw:F[r],direction:a}})),!1)}var da=[[0,-1,"n"],[1,0,"e"]],ga=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function ha(t,e,r){var n=t.props.clipRelative,i=t.state,a=i.width,o=i.height,u=e,l=u.type,c=u.poses,f="rect"===l,p="circle"===l;if("polygon"===l)return r.map(function(t){return"".concat(Di(t[0],a,n)," ").concat(Di(t[1],o,n))});if(f||"inset"===l){var d=r[1][1],g=r[3][0],h=r[7][0],v=r[5][1];if(f)return[d,g,v,h].map(function(t){return"".concat(t,"px")});var m=[d,a-g,o-v,h].map(function(t,e){return Di(t,e%2?a:o,n)});if(r.length>8){var b=_t(s(r[4],r[0]),2),x=b[0],S=b[1];m.push.apply(m,At(["round"],_t(ca(c.slice(8).map(function(t,e){return It(It({},t),{pos:r[e]})}),n,x,S,h,d,g,v).styles),!1))}return m}if(p||"ellipse"===l){var y=r[0],E=Di(ki(r[1][1]-y[1]),p?Math.sqrt((a*a+o*o)/2):o,n);return(m=p?[E]:[Di(ki(r[2][0]-y[0]),a,n),E]).push("at",Di(y[0],a,n),Di(y[1],o,n)),m}}function va(t,e,r,n){var i=[n,(n+e)/2,e],a=[t,(t+r)/2,r];return ga.map(function(t){var e=_t(t,3),r=e[0],n=e[1],o=e[2],s=i[r+1],u=a[n+1];return{vertical:ki(n),horizontal:ki(r),direction:o,pos:[s,u]}})}function ma(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach(function(t){var n=t.pos;e[0]=Math.min(e[0],n[0]),e[1]=Math.max(e[1],n[0]),r[0]=Math.min(r[0],n[1]),r[1]=Math.max(r[1],n[1])}),[ki(e[1]-e[0]),ki(r[1]-r[0])]}function ba(t,e,n,i,a){var o,s,u,l,c,f,p,d,g;if(t){var h=a;if(!h){var v=Le(t),m=v("clipPath");h="none"!==m?m:v("clip")}if(h&&"none"!==h&&"auto"!==h||(h=i)){var b=X(h),x=b.prefix,S=void 0===x?h:x,y=b.value,E=void 0===y?"":y,C="circle"===S,R=" ";if("polygon"===S){R=",";var M=(G=L(E||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var r=_t(t.split(" "),2),i=r[0],a=r[1];return{vertical:1,horizontal:1,pos:[D(i,e),D(a,n)]}}),O=j(M.map(function(t){return t.pos}));return{type:S,clipText:h,poses:M,splitter:R,left:O.minX,right:O.maxX,top:O.minY,bottom:O.maxY}}if(C||"ellipse"===S){var z="",T="",w=0,P=0,G=r(E);if(C){var B;B=void 0===(s=(o=_t(G,4))[0])?"50%":s,z=void 0===(u=o[2])?"50%":u,T=void 0===(l=o[3])?"50%":l,w=D(B,Math.sqrt((e*e+n*n)/2)),P=w}else{var I,_;I=void 0===(f=(c=_t(G,5))[0])?"50%":f,_=void 0===(p=c[1])?"50%":p,z=void 0===(d=c[3])?"50%":d,T=void 0===(g=c[4])?"50%":g,w=D(I,e),P=D(_,n)}var A=[D(z,e),D(T,n)];M=At([{vertical:1,horizontal:1,pos:A,direction:"nesw"}],_t(da.slice(0,C?1:2).map(function(t){return{vertical:ki(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[A[0]+t[0]*w,A[1]+t[1]*P]}})),!1);return{type:S,clipText:h,radiusX:w,radiusY:P,left:A[0]-w,top:A[1]-P,right:A[0]+w,bottom:A[1]+P,poses:M,splitter:R}}if("inset"===S){var k=(G=r(E||"0 0 0 0")).indexOf("round"),F=(k>-1?G.slice(0,k):G).length,N=G.slice(F+1),W=_t(G.slice(0,F),4),q=W[0],H=W[1],Y=void 0===H?q:H,U=W[2],Z=void 0===U?q:U,K=W[3],J=void 0===K?Y:K,$=_t([q,Z].map(function(t){return D(t,n)}),2),Q=$[0],tt=$[1],et=_t([J,Y].map(function(t){return D(t,e)}),2),rt=et[0],nt=et[1],it=e-nt,at=n-tt,ot=pa(N,it-rt,at-Q,rt,Q);return{type:"inset",clipText:h,poses:M=At(At([],_t(va(Q,it,at,rt)),!1),_t(ot),!1),top:Q,left:rt,right:it,bottom:at,radius:N,splitter:R}}if("rect"===S){R=",";var st=_t((G=L(E||"0px, ".concat(e,"px, ").concat(n,"px, 0px"))).map(function(t){return V(t).value}),4),ut=st[0];return{type:"rect",clipText:h,poses:M=va(ut,nt=st[1],tt=st[2],rt=st[3]),top:ut,right:nt,bottom:tt,left:rt,values:G,splitter:R}}}}}function xa(t,e){var r=_t(he(t,e),2),n=r[0],i=r[1],a=e.datas,o=a.clipPath,s=a.clipIndex,u=o,l=u.type,c=u.poses,f=u.splitter,p=c.map(function(t){return t.pos});if("polygon"===l)p.splice(s,0,[n,i]);else{if("inset"!==l)return;var d=oa.indexOf(s),g=sa.indexOf(s),h=c.length;if(function(t,e,r,n,i,a,o,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=fa(t.slice(r)),p=f.horizontalRange,d=f.verticalRange;if(n>-1)for(var g=1===ua[n]?a-l:s-a,h=p[1];h<=n;++h){var v=1===la[h]?c:u,m=0;if(n===h?m=a:0===h?m=l+g:-1===ua[h]&&(m=s-(e[r][0]-l)),t.splice(r+h,0,{horizontal:ua[h],vertical:0,pos:[m,v]}),e.splice(r+h,0,[m,v]),0===h)break}else if(i>-1){var b=1===la[i]?o-c:u-o;if(0===p[1]&&0===d[1]){var x=[l+b,c];t.push({horizontal:ua[0],vertical:0,pos:x}),e.push(x)}var S=d[0];for(h=d[1];h<=i&&(m=1===ua[h]?l:s,v=0,i===h?v=o:0===h?v=c+b:1===la[h]?v=e[r+S][1]:-1===la[h]&&(v=u-(e[r+S][1]-c)),t.push({horizontal:0,vertical:la[h],pos:[m,v]}),e.push([m,v]),0!==h);++h);}}(c,p,8,d,g,n,i,p[4][0],p[4][1],p[0][0],p[0][1]),h===c.length)return}var v=ha(t,o,p),m="".concat(l,"(").concat(v.join(f),")");di(t,"onClip",ci(t,e,It({clipEventType:"added",clipType:l,poses:p,clipStyles:v,clipStyle:m,distX:0,distY:0},ui({clipPath:m},e))))}function Sa(t,e){var r=e.datas,n=r.clipPath,i=r.clipIndex,a=n,o=a.type,s=a.poses,u=a.splitter,l=s.map(function(t){return t.pos}),c=l.length;if("polygon"===o)s.splice(i,1),l.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(function(t,e,r,n,i){void 0===i&&(i=e.length);var a=fa(t.slice(n)),o=a.horizontalRange,s=a.verticalRange,u=r-n,l=0;if(0===u)l=i;else if(u>0&&u<o[1])l=o[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),e.splice(r,l)}(s,l,i,8,c),c===s.length)return}var f=ha(t,n,l),p="".concat(o,"(").concat(f.join(u),")");di(t,"onClip",ci(t,e,It({clipEventType:"removed",clipType:o,poses:l,clipStyles:f,clipStyle:p,distX:0,distY:0},ui({clipPath:p},e))))}var ya={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[".control.clip-control {\nbackground: #6d6;\ncursor: pointer;\n}\n.control.clip-control.clip-radius {\nbackground: #d66;\n}\n.line.clip-line {\nbackground: #6e6;\ncursor: move;\nz-index: 1;\n}\n.clip-area {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.clip-ellipse {\nposition: absolute;\ncursor: move;\nborder: 1px solid #6d6;\nborder: var(--zoompx) solid #6d6;\nborder-radius: 50%;\ntransform-origin: 0px 0px;\n}",":host {\n--bounds-color: #d66;\n}",".guideline {\npointer-events: none;\nz-index: 2;\n}",".line.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}"],render:function(t,e){var r=t.props,n=r.customClipPath,i=r.defaultClipPath,a=r.clipArea,o=r.zoom,l=r.groupable,c=t.getState(),f=c.target,p=c.width,d=c.height,g=c.allMatrix,h=c.is3d,v=c.left,m=c.top,b=c.pos1,x=c.pos2,S=c.pos3,y=c.pos4,E=c.clipPathState,D=c.snapBoundInfos,C=c.rotation;if(!f||l)return[];var R=ba(f,p,d,i||"inset",E||n);if(!R)return[];var M=h?4:3,O=R.type,z=R.poses.map(function(t){var e=Hn(g,t.pos,M);return[e[0]-v,e[1]-m]}),T=[],w=[],P="rect"===O,G="inset"===O,B="polygon"===O;if(P||G||B){var I=G?z.slice(0,8):z;w=I.map(function(t,r){var n=0===r?I[I.length-1]:I[r-1],i=u(n,t),a=Vn(n,t);return e.createElement("div",{key:"clipLine".concat(r),className:On("line","clip-line","snap-control"),"data-clip-index":r,style:{width:"".concat(a,"px"),transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(i,"rad) scaleY(").concat(o,")")}})})}if(T=z.map(function(t,r){return e.createElement("div",{key:"clipControl".concat(r),className:On("control","clip-control","snap-control"),"data-clip-index":r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(C,"rad) scale(").concat(o,")")}})}),G&&T.push.apply(T,At([],_t(z.slice(8).map(function(t,r){return e.createElement("div",{key:"clipRadiusControl".concat(r),className:On("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(C,"rad) scale(").concat(o,")")}})})),!1)),"circle"===O||"ellipse"===O){var _=R.left,A=R.top,k=R.radiusX,F=R.radiusY,N=_t(s(Hn(g,[_,A],M),Hn(g,[0,0],M)),2),W=N[0],q=N[1],H="none";if(!a){for(var Y=Math.max(10,k/5,F/5),X=[],L=0;L<=Y;++L){var j=2*Math.PI/Y*L;X.push([k+(k-o)*Math.cos(j),F+(F-o)*Math.sin(j)])}X.push([k,-2]),X.push([-2,-2]),X.push([-2,2*F+2]),X.push([2*k+2,2*F+2]),X.push([2*k+2,-2]),X.push([k,-2]),H="polygon(".concat(X.map(function(t){return"".concat(t[0],"px ").concat(t[1],"px")}).join(", "),")")}T.push(e.createElement("div",{key:"clipEllipse",className:On("clip-ellipse","snap-control"),style:{width:"".concat(2*k,"px"),height:"".concat(2*F,"px"),clipPath:H,transform:"translate(".concat(-v+W,"px, ").concat(-m+q,"px) ").concat(Nn(g))}}))}if(a){var V=Xn(At([b,x,S,y],_t(z),!1)),U=V.width,Z=V.height,K=V.left,J=V.top;if(B||P||G){X=G?z.slice(0,8):z;T.push(e.createElement("div",{key:"clipArea",className:On("clip-area","snap-control"),style:{width:"".concat(U,"px"),height:"".concat(Z,"px"),transform:"translate(".concat(K,"px, ").concat(J,"px)"),clipPath:"polygon(".concat(X.map(function(t){return"".concat(t[0]-K,"px ").concat(t[1]-J,"px")}).join(", "),")")}}))}}return D&&["vertical","horizontal"].forEach(function(t){var r=D[t],n="horizontal"===t;r.isSnap&&w.push.apply(w,At([],_t(r.snap.posInfos.map(function(r,i){var a=r.pos,u=s(Hn(g,n?[0,a]:[a,0],M),[v,m]),l=s(Hn(g,n?[p,a]:[a,d],M),[v,m]);return $e(e,"",u,l,o,"clip".concat(t,"snap").concat(i),"guideline")})),!1)),r.isBound&&w.push.apply(w,At([],_t(r.bounds.map(function(r,i){var a=r.pos,u=s(Hn(g,n?[0,a]:[a,0],M),[v,m]),l=s(Hn(g,n?[p,a]:[a,d],M),[v,m]);return $e(e,"",u,l,o,"clip".concat(t,"bounds").concat(i),"guideline","bounds","bold")})),!1))}),At(At([],_t(T),!1),_t(w),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props.dragWithClip;return!(void 0===r||r)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,It(It({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,n=t.props,i=n.defaultClipPath,a=n.customClipPath,o=r.target,s=r.width,u=r.height,l=e.inputEvent?e.inputEvent.target:null,c=l&&l.getAttribute("class")||"",f=e.datas,p=ba(o,s,u,i||"inset",a);if(!p)return!1;var d=p.clipText;return!1===di(t,"onClipStart",ci(t,e,{clipType:p.type,clipStyle:d,poses:p.poses.map(function(t){return t.pos})}))?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,r.clipPathState=d,ve(t,e),!0)},dragControl:function(t,e){var r,n,a,o=e.datas,s=e.originalDatas,u=e.isDragTarget;if(!o.isClipStart)return!1;var l=o,c=l.isControl,f=l.isLine,p=l.isArea,d=l.clipIndex,g=l.clipPath;if(!g)return!1;var h=Kn(t.props,"clippable"),m=h.keepRatio,b=0,x=0,S=s.draggable,y=ye(e);u&&S?(r=_t(S.prevBeforeDist,2),b=r[0],x=r[1]):(n=_t(y,2),b=n[0],x=n[1]);var E=[b,x],C=t.state,R=C.width,M=C.height,O=!p&&!c&&!f,z=g.type,T=g.poses,w=g.splitter,P=T.map(function(t){return t.pos});O&&(b=-b,x=-x);var G=!c||"nesw"===T[d].direction,B="inset"===z||"rect"===z,I=T.map(function(){return[0,0]});if(c&&!G){var _=T[d],A=_.horizontal,k=_.vertical,F=[b*ki(A),x*ki(k)];I=function(t,e,r,n,i){var a=t[e],o=a.direction,s=a.sub,u=t.map(function(){return[0,0]}),l=o?o.split(""):[];if(n&&e<8){var c=l.filter(function(t){return"w"===t||"e"===t}),f=l.filter(function(t){return"n"===t||"s"===t}),p=c[0],d=f[0];u[e]=r;var g=_t(ma(t),2),h=g[0],v=g[1],m=h&&v?h/v:0;if(m&&i){var b=t[(e+4)%8].pos,x=[0,0];o.indexOf("w")>-1?x[0]=-1:o.indexOf("e")>-1&&(x[0]=1),o.indexOf("n")>-1?x[1]=-1:o.indexOf("s")>-1&&(x[1]=1);var S=wi([h,v],r,m,x,!0),y=h+S[0],E=v+S[1],D=b[1],C=b[1],R=b[0],M=b[0];-1===x[0]?R=M-y:1===x[0]?M=R+y:(R-=y/2,M+=y/2),-1===x[1]?D=C-E:C=1===x[1]?D+E:(D=C-E/2)+E;var O=va(D,M,C,R);t.forEach(function(t,e){u[e][0]=O[e].pos[0]-t.pos[0],u[e][1]=O[e].pos[1]-t.pos[1]})}else t.forEach(function(t,e){var n=t.direction;n&&(n.indexOf(p)>-1&&(u[e][0]=r[0]),n.indexOf(d)>-1&&(u[e][1]=r[1]))}),p&&(u[1][0]=r[0]/2,u[5][0]=r[0]/2),d&&(u[3][1]=r[1]/2,u[7][1]=r[1]/2)}else o&&!s?l.forEach(function(e){var n="n"===e||"s"===e;t.forEach(function(t,i){var a=t.direction,o=t.horizontal,s=t.vertical;a&&-1!==a.indexOf(e)&&(u[i]=[n||!o?0:r[0],n&&s?r[1]:0])})}):u[e]=r;return u}(T,d,F,B,m)}else G&&(I=P.map(function(){return[b,x]}));var N=P.map(function(t,e){return i(t,I[e])}),W=At([],_t(N),!1);C.snapBoundInfos=null;var q="circle"===g.type,H="ellipse"===g.type;if(q||H){var Y=ki((at=Xn(N)).bottom-at.top),X=ki(H?at.right-at.left:Y),L=N[0][1]+Y,j=N[0][0]-X,V=N[0][0]+X;q&&(W.push([V,at.bottom]),I.push([1,0])),W.push([at.left,L]),I.push([0,1]),W.push([j,at.bottom]),I.push([1,0])}var U=dn((h.clipHorizontalGuidelines||[]).map(function(t){return D("".concat(t),M)}),(h.clipVerticalGuidelines||[]).map(function(t){return D("".concat(t),R)}),R,M),Z=[],K=[];if(q||H)Z=[W[4][0],W[2][0]],K=[W[1][1],W[3][1]];else if(B){var J=[W[0],W[2],W[4],W[6]],$=[I[0],I[2],I[4],I[6]];Z=J.filter(function(t,e){return $[e][0]}).map(function(t){return t[0]}),K=J.filter(function(t,e){return $[e][1]}).map(function(t){return t[1]})}else Z=W.filter(function(t,e){return I[e][0]}).map(function(t){return t[0]}),K=W.filter(function(t,e){return I[e][1]}).map(function(t){return t[1]});var Q=[0,0],tt=Yr(U,h.clipTargetBounds&&{left:0,top:0,right:R,bottom:M},Z,K,5,5),et=tt.horizontal,rt=tt.vertical,nt=et.offset,it=rt.offset;if(et.isBound&&(Q[1]+=nt),rt.isBound&&(Q[0]+=it),(H||q)&&0===I[0][0]&&0===I[0][1]){var at,ot=(at=Xn(N)).bottom-at.top,st=H?at.right-at.left:ot;st-=rt.isBound?ki(it):0===rt.snapIndex?-it:it,ot-=et.isBound?ki(nt):0===et.snapIndex?-nt:nt,q&&(st=ot=Or(rt,et)>0?ot:st);var ut=W[0];W[1][1]=ut[1]-ot,W[2][0]=ut[0]+st,W[3][1]=ut[1]+ot,W[4][0]=ut[0]-st}else if(B&&m&&c){var lt=_t(ma(T),2),ct=lt[0],ft=lt[1],pt=ct&&ft?ct/ft:0,dt=T[d].direction||"",gt=W[1][1];L=W[5][1],j=W[7][0],V=W[3][0];ki(nt)<=ki(it)?nt=Ai(nt)*ki(it)/pt:it=Ai(it)*ki(nt)*pt,dt.indexOf("w")>-1?j-=it:dt.indexOf("e")>-1?V-=it:(j+=it/2,V-=it/2),dt.indexOf("n")>-1?gt-=nt:dt.indexOf("s")>-1?L-=nt:(gt+=nt/2,L-=nt/2);var ht=va(gt,V,L,j);W.forEach(function(t,e){var r;r=_t(ht[e].pos,2),t[0]=r[0],t[1]=r[1]})}else W.forEach(function(t,e){var r=I[e];r[0]&&(t[0]-=it),r[1]&&(t[1]-=nt)});var vt=ha(t,g,N),mt="".concat(z,"(").concat(vt.join(w),")");if(C.clipPathState=mt,q||H)Z=[W[4][0],W[2][0]],K=[W[1][1],W[3][1]];else if(B){Z=(J=[W[0],W[2],W[4],W[6]]).map(function(t){return t[0]}),K=J.map(function(t){return t[1]})}else Z=W.map(function(t){return t[0]}),K=W.map(function(t){return t[1]});if(C.snapBoundInfos=Yr(U,h.clipTargetBounds&&{left:0,top:0,right:R,bottom:M},Z,K,1,1),S){var bt=C.is3d,xt=C.allMatrix,St=bt?4:3,yt=Q;u&&(yt=[E[0]+Q[0]-y[0],E[1]+Q[1]-y[1]]),S.deltaOffset=v(xt,[yt[0],yt[1],0,0],St)}return di(t,"onClip",ci(t,e,It({clipEventType:"changed",clipType:z,poses:N,clipStyle:mt,clipStyles:vt,distX:b,distY:x},ui(((a={})["rect"===z?"clip":"clipPath"]=mt,a),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,n=e.datas,i=e.isDouble,a=n.isLine,o=n.isClipStart,s=n.isControl;return!!o&&(di(t,"onClipEnd",fi(t,e,{})),i&&(s?Sa(t,e):a&&xa(t,e)),i||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Ea={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[":host[data-able-origindraggable] .control.origin {\npointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:n(e.inputEvent.target,On("origin"))},dragControlStart:function(t,e){var r=e.datas;ve(t,e);var n=ci(t,e,{dragStart:jr.dragStart(t,(new de).dragStart([0,0],e))}),i=di(t,"onDragOriginStart",n);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,!1===i?(r.isDragOrigin=!1,!1):n},dragControl:function(t,e){var r=e.datas,n=e.isPinch,a=e.isRequest;if(!r.isDragOrigin)return!1;var o=_t(ye(e),2),u=o[0],l=o[1],c=t.state,f=c.width,p=c.height,d=c.offsetMatrix,g=c.targetMatrix,h=c.is3d,v=t.props.originRelative,m=void 0===v||v,b=h?4:3,x=[u,l];if(a){var S=e.distOrigin;(S[0]||S[1])&&(x=S)}var y=i(r.startOrigin,x),E=i(r.startTargetOrigin,x),D=s(x,r.prevOrigin),C=Re(d,g,y,b),R=t.getRect(),M=Xn(Yn(C,f,p,b)),O=[R.left-M.left,R.top-M.top];r.prevOrigin=x;var z=[Di(E[0],f,m),Di(E[1],p,m)].join(" "),T=jr.drag(t,pe(e,t.state,O,!!n)),w=ci(t,e,It(It({width:f,height:p,origin:y,dist:x,delta:D,transformOrigin:z,drag:T},ui({transformOrigin:z,transform:T.transform},e)),{afterTransform:T.transform}));return di(t,"onDragOrigin",w),w},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(di(t,"onDragOriginEnd",fi(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var e={},r=t.getRect(),n=0,i=0,a=r.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(o[0]+=t.deltaOrigin[0],o[1]+=t.deltaOrigin[1]):"origin"in t?(o[0]=t.origin[0]-a[0],o[1]=t.origin[1]-a[1]):("x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:n,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Da(t,e,n,i,a){void 0===i&&(i=[0,0]);return pa(t&&"0px"!==t?r(t):[],e,n,0,0,i,a)}function Ca(t,e,r,n,i){var a=t.state,o=a.width,s=a.height,u=ca(i,t.props.roundRelative,o,s),l=u.raws,c=u.styles,f=function(t,e){return void 0===e&&(e=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,r){return t.horizontal?e[r]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,r){return t.vertical?e[r]:null}).filter(function(t){return null!=t})}}(u.radiusPoses,l),p=f.horizontals,d=f.verticals,g=c.join(" ");a.borderRadiusState=g;var h=ci(t,e,It({horizontals:p,verticals:d,borderRadius:g,width:o,height:s,delta:n,dist:r},ui({borderRadius:g},e)));return di(t,"onRound",h),h}function Ra(t){var e,r,n=t.getState().style,i=n.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&((null==a?void 0:a.props.target)===o?(i=null!==(r=null===(e=t.moveables[0])||void 0===e?void 0:e.state.style.borderRadius)&&void 0!==r?r:"",n.borderRadius=i):(i=gi(o).borderRadius,n.borderRadius=i))}return i}var Ma={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[".control.border-radius {\nbackground: #d66;\ncursor: pointer;\nz-index: 3;\n}",".control.border-radius.vertical {\nbackground: #d6d;\nz-index: 2;\n}",".control.border-radius.virtual {\nopacity: 0.5;\nz-index: 1;\n}",":host.round-line-clickable .line.direction {\ncursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?On("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var r=t.getState(),n=r.target,i=r.width,a=r.height,o=r.allMatrix,u=r.is3d,l=r.left,c=r.top,f=r.borderRadiusState,p=t.props,d=p.minRoundControls,g=void 0===d?[0,0]:d,h=p.maxRoundControls,v=void 0===h?[4,4]:h,m=p.zoom,b=p.roundPadding,x=void 0===b?0:b,S=p.isDisplayShadowRoundControls,y=p.groupable;if(!n)return null;var E=f||Ra(t),D=u?4:3,C=Da(E,i,a,g,!0);if(!C)return null;var R=0,M=0,O=y?[0,0]:[l,c];return C.map(function(t,r){var n=t.horizontal,i=t.vertical,a=t.direction||"",u=At([],_t(t.pos),!1);M+=Math.abs(n),R+=Math.abs(i),n&&a.indexOf("n")>-1&&(u[1]-=x),i&&a.indexOf("w")>-1&&(u[0]-=x),n&&a.indexOf("s")>-1&&(u[1]+=x),i&&a.indexOf("e")>-1&&(u[0]+=x);var l=s(Hn(o,u,D),O),c=S&&"horizontal"!==S,f=t.vertical?R<=v[1]&&(c||!t.virtual):M<=v[0]&&(S||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(r),className:On("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":r,style:{display:f?"block":"none",transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) scale(").concat(m,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var r=e.inputEvent,n=e.datas,i=r.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,s=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,l=-1;if(s){var c=i.getAttribute("data-line-key")||"";c&&(l=parseInt(c.replace(/render-line-/g,""),10),isNaN(l)&&(l=-1))}if(!o&&!s)return!1;var f=ci(t,e,{});if(!1===di(t,"onRoundStart",f))return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=o,n.isLine=s,ve(t,e);var p=t.props,d=p.roundRelative,g=p.minRoundControls,h=void 0===g?[0,0]:g,v=t.state,m=v.width,b=v.height;n.isRound=!0,n.prevDist=[0,0];var x=Da(Ra(t)||"",m,b,h,!0)||[];return n.controlPoses=x,v.borderRadiusState=ca(x,d,m,b).styles.join(" "),f},dragControl:function(t,e){var r=e.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var a=r.controlIndex,o=_t(ye(e),2),u=o[0],l=o[1],c=[u,l],f=s(c,r.prevDist),p=t.props.maxRoundControls,d=void 0===p?[4,4]:p,g=t.state,h=g.width,v=g.height,m=n[a],b=m.vertical,x=m.horizontal,S=n.map(function(t){var e=t.horizontal,r=t.vertical,n=[e*x*c[0],r*b*c[1]];if(e){if(1===d[0])return n;if(d[0]<4&&e!==x)return n}else{if(0===d[1])return n[1]=r*x*c[0]/h*v,n;if(b){if(1===d[1])return n;if(d[1]<4&&r!==b)return n}}return[0,0]});S[a]=c;var y=n.map(function(t,e){return It(It({},t),{pos:i(t.pos,S[e])})});return a<4?y.slice(0,a+1).forEach(function(t){t.virtual=!1}):y.slice(4,a+1).forEach(function(t){t.virtual=!1}),r.prevDist=[u,l],Ca(t,e,c,f,y)},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var n=e.datas,i=e.isDouble;if(!n.isRound)return!1;var a=n.isControl,o=n.controlIndex,s=n.isLine,u=n.lineIndex,l=n.controlPoses,c=l.filter(function(t){return t.virtual}).length,f=t.props.roundClickable,p=void 0===f||f;if(i&&p){if(!a||!0!==p&&"control"!==p){if(s&&(!0===p||"line"===p)){var d=_t(he(t,e),2);!function(t,e,r,n){var i=t.filter(function(t){var e=t.virtual;return t.horizontal&&!e}).length,a=t.filter(function(t){var e=t.virtual;return t.vertical&&!e}).length,o=-1;if(0===e&&(0===i?o=0:1===i&&(o=1)),2===e&&(i<=2?o=2:i<=3&&(o=3)),3===e&&(0===a?o=4:a<4&&(o=7)),1===e&&(a<=1?o=5:a<=2&&(o=6)),-1!==o&&t[o].virtual){var s=t[o];!function(t,e){e<4?t.slice(0,e+1).forEach(function(t){t.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(t){t.virtual=!1}))}(t,o),o<4?s.pos[0]=r:s.pos[1]=n}}(l,u,d[0],d[1])}}else!function(t,e){e<4?t.slice(e,4).forEach(function(t){t.virtual=!0}):t.slice(e).forEach(function(t){t.virtual=!0})}(l,o);c!==l.filter(function(t){return t.virtual}).length&&Ca(t,e,[0,0],[0,0],l)}var g=fi(t,e,{});return di(t,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);if(!r)return!1;var n=t.moveables,i=t.props.targets,a=je(t,"roundable",e);return di(t,"onRoundGroupStart",It({targets:t.props.targets,events:a.map(function(t,e){return It(It({},t),{target:i[e],moveable:n[e],currentTarget:n[e]})})},r)),r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);if(!r)return!1;var n=t.moveables,i=t.props.targets,a=je(t,"roundable",e),o=It({targets:t.props.targets,events:a.map(function(t,e){return It(It(It({},t),{target:i[e],moveable:n[e],currentTarget:n[e]}),ui({borderRadius:r.borderRadius},t))})},r);return di(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var r=t.moveables,n=t.props.targets,i=je(t,"roundable",e);pi(t,"onRound",function(e){var a=It({targets:t.props.targets,events:i.map(function(t,i){return It(It(It({},t),{target:n[i],moveable:r[i],currentTarget:r[i]}),ui({borderRadius:e.borderRadius},t))})},e);di(t,"onRoundGroup",a)});var a=this.dragControlEnd(t,e);if(!a)return!1;var o=It({targets:t.props.targets,events:i.map(function(t,e){var i;return It(It({},t),{target:n[e],moveable:r[e],currentTarget:r[e],lastEvent:null===(i=t.datas)||void 0===i?void 0:i.lastEvent})})},a);return di(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};var Oa={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,n){var i=t.state,a=i.is3d,o=i.targetMatrix,s=i.inlineTransform,u=a?"matrix3d(".concat(o.join(","),")"):"matrix(".concat(e(o,!0),")"),l=s&&"none"!==s?s:u;n.datas.startTransforms=function(t,e){var r=S(e?4:3);return t==="matrix".concat(e?"3d":"","(").concat(r.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(l,a)?[]:r(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ci(t,e,{setTransform:function(t){e.datas.startTransforms=d(t)?t:r(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ci(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),di(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),di(t,"onBeforeRender",ci(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),di(t,"onBeforeRenderEnd",ci(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=je(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(t,e){var n=i[e];return r.setTransform(n,t),r.resetStyle(t),r.fillDragStartParams(n,t)});di(t,"onBeforeRenderGroupStart",ci(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=je(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(t,e){var n=i[e];return r.resetStyle(t),r.fillDragParams(n,t)});di(t,"onBeforeRenderGroup",ci(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),di(t,"onBeforeRenderGroupEnd",ci(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},za={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){di(t,"onRenderStart",ci(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){di(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){di(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){di(t,"onRenderGroupStart",ci(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,n=je(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(t,e){var n=i[e];return r.fillDragParams(n,t)});di(t,"onRenderGroup",ci(t,e,It(It({isPinch:!!e.isPinch,targets:t.props.targets,transform:Ge(e),transformObject:{}},ui(Be(e))),{events:a})))},dragGroupEnd:function(t,e){var r=this,n=je(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(t,e){var n=i[e];return r.fillDragEndParams(n,t)});di(t,"onRenderGroupEnd",ci(t,e,It({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Ge(e)},ui(Be(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var r={};return z(Pe(e)||[]).forEach(function(t){r[t.name]=t.functionValue}),ci(t,e,It({isPinch:!!e.isPinch,transformObject:r,transform:Ge(e)},ui(Be(e))))},fillDragEndParams:function(t,e){var r={};return z(Pe(e)||[]).forEach(function(t){r[t.name]=t.functionValue}),ci(t,e,It({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:r,transform:Ge(e)},ui(Be(e))))}};function Ta(t,e,r,n,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var s="Start"===i,u="End"===i,l="After"===i,c=t.state.target,f=a.isRequest,p=n.indexOf("Control")>-1;if(!c||s&&p&&!f&&t.areaElement===a.inputEvent.target)return!1;var d=At([],_t(e),!1);if(f){var g=a.requestAble;d.some(function(t){return t.name===g})||d.push.apply(d,At([],_t(t.props.ables.filter(function(t){return t.name===g})),!1))}if(!d.length||d.every(function(t){return t.dragRelation}))return!1;var h,v=a.inputEvent;u&&v&&(h=document.elementFromPoint(a.clientX,a.clientY)||v.target);var m=!1,b=function(){var t;m=!0,null===(t=a.stop)||void 0===t||t.call(a)},x=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());x&&t.updateRect(i,!0,!1);var S=a.datas,y=p?"controlGesto":"targetGesto",E=t[y],D=function(e,r,n){if(!(r in e)||E!==t[y])return!1;var i=e.name,o=S[i]||(S[i]={});if(s&&(o.isEventStart=!n||!e[n]||e[n](t,a)),!o.isEventStart)return!1;var u=e[r](t,It(It({},a),{stop:b,datas:o,originalDatas:S,inputTarget:h}));return t._emitter.off(),s&&!1===u&&(o.isEventStart=!1),u};x&&d.forEach(function(e){e.unset&&e.unset(t)}),D(Oa,"drag".concat(n).concat(i));var C=0,R=0;r.forEach(function(e){if(m)return!1;var r="".concat(e).concat(n).concat(i),o="".concat(e).concat(n,"Condition");""!==i||f||function(t,e){var r,n=t.is3d?4:3;r=_t(yi(t.rootMatrix,[e.distX,e.distY],n),2),e.distX=r[0],e.distY=r[1]}(t.state,a);var u=d.filter(function(t){return t[r]}),l=(u=u.filter(function(t,e){return t.name&&u.indexOf(t)===e})).filter(function(t){return D(t,r,o)}).length;m&&++C,l&&++R,!m&&s&&u.length&&!l&&(C+=u.filter(function(t){var e=t.name;return!!S[e].isEventStart&&"strong"!==t.dragRelation}).length?1:0)}),l&&!R||D(za,"drag".concat(n).concat(i));var M=E!==t[y]||C===r.length;if((u||m||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(t){t.state.gestos={}}),d.forEach(function(e){e.unset&&e.unset(t)})),s&&!M&&!f&&R&&t.props.preventDefault&&(null==a||a.preventDefault()),t.isUnmounted||M)return!1;(!s&&R&&!o||u)&&(t.props.flushSync||zn)(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()});return s||u||l||!R||o||Ta(t,e,r,n,i+"After",a),!0}function wa(t,e){return function(r,i){var a;void 0===i&&(i=r.inputEvent.target);var o=i,s=t.areaElement,u=t._dragTarget;return!(!u||!e&&(null===(a=t.controlGesto)||void 0===a?void 0:a.isFlag()))&&(o===u||u.contains(o)||o===s||!t.isMoveableElement(o)&&!t.controlBox.contains(o)||n(o,"moveable-area")||n(o,"moveable-padding")||n(o,"moveable-edgeDraggable"))}}function Pa(t,e,r){var n=t.controlBox,i=[],a=t.props,o=a.dragArea,s=t.state.target,u=a.dragTarget;i.push(n),o&&!u||i.push(e),!o&&u&&s&&e!==s&&a.dragTargetSelf&&i.push(s);var l=wa(t);return Ba(t,i,"targetAbles",r,{dragStart:l,pinchStart:l})}function Ga(t,e){var r=t.controlBox,n=[];n.push(r);var i=wa(t,!0),a=function(t,e){return void 0===e&&(e=t.inputEvent.target),e===r||!i(t,e)};return Ba(t,n,"controlAbles",e,{dragStart:a,pinchStart:a})}function Ba(t,e,r,n,i){void 0===i&&(i={});var a="targetAbles"===r,o=t.props,s=o.pinchOutside,u=o.pinchThreshold,l=o.preventClickEventOnDrag,c=o.preventClickDefault,f=o.checkInput,p=o.dragFocusedInput,d=o.preventDefault,g=void 0===d||d,h=o.preventRightClick,v=void 0===h||h,m=o.preventWheelClick,b={preventDefault:g,preventRightClick:v,preventWheelClick:void 0===m||m,container:Oi(o.dragContainer,!0)||it(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:!!a&&l,preventClickEventOnDragStart:!!a&&c,preventClickEventByCondition:a?null:function(e){return t.controlBox.contains(e.target)},checkInput:!!a&&f,dragFocusedInput:p},x=new bt(e,b),S="Control"===n;return["drag","pinch"].forEach(function(e){["Start","","End"].forEach(function(a){x.on("".concat(e).concat(a),function(o){var s,u=o.eventType,l="drag"===e&&o.isPinch;if(!i[u]||i[u](o)){if(!l){var c="drag"===e?[e]:["drag",e],f=At([],_t(t[r]),!1);Ta(t,f,c,n,a,o)?(t.props.stopPropagation||"Start"===a&&S)&&(null===(s=null==o?void 0:o.inputEvent)||void 0===s||s.stopPropagation()):o.stop()}}else o.stop()})})}),x}var Ia=function(){function t(t,e,r){var n=this;this.target=t,this.moveable=e,this.eventName=r,this.ables=[],this._onEvent=function(t){var e=n.eventName,r=n.moveable;r.state.disableNativeEvent||n.ables.forEach(function(n){n[e](r,{inputEvent:t})})},t.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(t){this.ables=t},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function _a(t,e,r,n){var i;void 0===r&&(r=e);var a=We(t,e),o=a.matrixes,u=a.is3d,l=a.targetMatrix,f=a.transformOrigin,p=a.targetOrigin,d=a.offsetContainer,g=a.hasFixed,h=a.zoom,x=function(t,e){if(Ye){var r=w(Ye,function(r){return r[0][0]==t&&r[0][1]==e});if(r)return r[1]}var n=We(t,e,!0);return Ye&&Ye.push([[t,e],n]),n}(d,r),y=x.matrixes,E=x.is3d,D=x.offsetContainer,C=x.zoom,R=n,M="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,O=l,z=S(4),T=S(4),P=S(4),G=S(4),B=o.length,I=y.map(function(t){return It(It({},t),{matrix:t.matrix?At([],_t(t.matrix),!1):void 0})}).reverse();o.reverse(),!u&&R&&(O=c(O,3,4),kn(o)),!E&&R&&kn(I),I.forEach(function(t){T=v(T,t.matrix,4)});var _=r||mt(t),A=(null===(i=I[0])||void 0===i?void 0:i.target)||In(_,_,!0).offsetParent,k=I.slice(1).reduce(function(t,e){return v(t,e.matrix,4)},S(4));o.forEach(function(t,e){if(B-2===e&&(P=z.slice()),B-1===e&&(G=z.slice()),!t.matrix){var r=function(t,e,r,n,i){var a,o=t.target,u=t.origin,l=e.matrix,c=Jn(o),f=c.offsetWidth,p=c.offsetHeight,d=r.getBoundingClientRect(),g=[0,0];r===mt(r)&&(g=An(o,!0));for(var h=o.getBoundingClientRect(),v=h.left-d.left+r.scrollLeft-(r.clientLeft||0)+g[0],b=h.top-d.top+r.scrollTop-(r.clientTop||0)+g[1],x=h.width,S=h.height,y=Q(n,i,l),E=Ln(y,f,p,n),D=E.left,C=E.top,R=E.width,M=E.height,O=Hn(y,u,n),z=s(O,[D,C]),T=[v+z[0]*x/R,b+z[1]*S/M],w=[0,0],P=0;++P<10;){var G=m(i,n);a=_t(s(Hn(G,T,n),Hn(G,O,n)),2),w[0]=a[0],w[1]=a[1];var B=Ln(Q(n,i,tt(w,n),l),f,p,n),I=B.left-v,_=B.top-b;if(ki(I)<2&&ki(_)<2)break;T[0]-=I,T[1]-=_}return w.map(function(t){return Math.round(t)})}(t,o[e+1],A,4,v(k,z,4));t.matrix=tt(r,4)}z=v(z,t.matrix,4)});var F=!M&&u;O||(O=S(F?4:3));var N=Nn(M&&16===O.length?c(O,4,3):O,F),W=T;return T=b(T,4,4),{hasZoom:1!==h||1!==C,hasFixed:g,matrixes:o,rootMatrix:T,originalRootMatrix:W,beforeMatrix:P,offsetMatrix:G,allMatrix:z,targetMatrix:O,targetTransform:N,inlineTransform:t.style.transform,transformOrigin:f,targetOrigin:p,is3d:R,offsetContainer:d,offsetRootContainer:D}}function Aa(t,e,r,n,a,o){void 0===o&&(o=[]);var u=1,l=[0,0],c={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},f={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},p={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},d={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},g=[0,0],h={},m=function(t,e,r,n){void 0===r&&(r=e);var i=0,a=0,o=0,s={},u=Jn(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var l=_a(t,e,r,n),c=ge(l.allMatrix,l.transformOrigin,i,a);s=It(It({},l),c);var f=ge(l.allMatrix,[50,50],100,100);o=$n([f.pos1,f.pos2],f.direction)}return It(It(It({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:S(4),rootMatrix:S(4),beforeMatrix:S(4),offsetMatrix:S(4),allMatrix:S(4),targetMatrix:S(4),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}(e,r,a,!0);if(e){var b=Le(e);o.forEach(function(t){h[t]=b(t)});var x=m.is3d?4:3,y=ge(m.offsetMatrix,i(m.transformOrigin,ft(m.targetMatrix,x)),m.width,m.height);u=y.direction,l=i(y.origin,[y.left-m.left,y.top-m.top]),d=ei(m.offsetRootContainer);var E=In(n,n,!0).offsetParent||m.offsetRootContainer;if(m.hasZoom){var D=ge(v(m.originalRootMatrix,m.allMatrix),m.transformOrigin,m.width,m.height),C=ge(m.originalRootMatrix,Gn(Le(E)("transformOrigin")).map(function(t){return parseFloat(t)}),E.offsetWidth,E.offsetHeight);if(c=ti(D,d),p=ti(C,d,E,!0),t){var R=D.left,M=D.top;f=ti({left:R,top:M,bottom:M,right:M},d)}}else{c=ei(e),p=function(t){var e=null==He?void 0:He.get(t);if(e)return e;var r=ei(t,!0);return He&&He.set(t,r),r}(E),t&&(f=ei(t));var O=p.left,z=p.top,T=p.clientLeft,w=p.clientTop,P=[c.left-O,c.top-z];g=s(yi(m.rootMatrix,P,4),[T+m.left,w+m.top])}}return It({targetClientRect:c,containerClientRect:p,moveableClientRect:f,rootContainerClientRect:d,beforeDirection:u,beforeOrigin:l,originalBeforeOrigin:l,target:e,style:h,offsetDelta:g},m)}function ka(t){var e=t.pos1,r=t.pos2,n=t.pos3,i=t.pos4;if(!(e&&r&&n&&i))return null;var a=j([e,r,n,i]),o=[a.minX,a.minY],u=s(t.origin,o);return e=s(e,o),r=s(r,o),n=s(n,o),i=s(i,o),It(It({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:r,pos3:n,pos4:i,origin:u,beforeOrigin:u,isPersisted:!0})}var Fa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=It({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Aa(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new lt,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():(ct(e._observerId),e._observerId=R(function(){e.isDragging()||e.updateRect()}))}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}return Bt(e,t),e.prototype.render=function(){var t=this.props,e=this.getState(),r=t.parentPosition,n=t.className,i=t.target,a=t.zoom,o=t.cspNonce,s=t.translateZ,u=t.cssStyled,l=t.groupable,c=t.linePadding,f=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=_t(r||[0,0],2),d=p[0],g=p[1],h=e.left,v=e.top,m=e.target,b=e.direction,x=e.hasFixed,S=e.offsetDelta,y=t.targets,E=this.isDragging(),D={};this.getEnabledAbles().forEach(function(t){D["data-able-".concat(t.name.toLowerCase())]=!0});var C=this._getAbleClassName(),R=y&&y.length&&(m||l)||i||!this._hasFirstTarget&&this.state.isPersisted,M=this.controlBox||this.props.firstRenderState||this.props.persistData,z=[h-d,v-g];!l&&t.useAccuratePosition&&(z[0]+=S[0],z[1]+=S[1]);var T={position:x?"fixed":"absolute",display:R?"block":"none",visibility:M?"visible":"hidden",transform:"translate3d(".concat(z[0],"px, ").concat(z[1],"px, ").concat(s,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return c&&(T["--moveable-line-padding"]=c),f&&(T["--moveable-control-padding"]=f),U(u,It({cspNonce:o,ref:O(this,"controlBox"),className:"".concat(On("control-box",-1===b?"reverse":"",E?"dragging":"")," ").concat(C," ").concat(n)},D,{onClick:this._onPreventClick,style:T}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,e=t.parentMoveable,r=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),r||e||this.state.isPersisted||(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){var t,e;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),null===(t=this._reiszeObserver)||void 0===t||t.disconnect(),null===(e=this._mutationObserver)||void 0===e||e.disconnect(),this._viewContainer&&this._changeAbleViewClassNames([]),si(this,!1),si(this,!0);var r=this.events;for(var n in r){var i=r[n];i&&i.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){var e=this.props.ables||[];return w(e,function(e){return e.name===t})},e.prototype.getContainer=function(){var t=this.props,e=t.parentMoveable,r=t.wrapperMoveable;return t.container||r&&r.getContainer()||e&&e.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(Qt)>-1},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var r=this.targetGesto,n=this.controlGesto;return r&&wa(this)({inputEvent:t},e)?r.isFlag()||r.triggerDragStart(t):n&&this.isMoveableElement(e)&&(n.isFlag()||n.triggerDragStart(t)),this},e.prototype.hitTest=function(t){var e,r=this.state,n=r.target,i=r.pos1,a=r.pos2,o=r.pos3,s=r.pos4,u=r.targetClientRect;if(!n)return 0;if(q(t)){var l=t.getBoundingClientRect();e={left:l.left,top:l.top,width:l.width,height:l.height}}else e=It({width:0,height:0},t);var c=e.left,f=e.top,p=e.width,d=e.height,g=Z([i,a,s,o],u),h=K(g,[[c,f],[c+p,f],[c+p,f+d],[c,f+d]]),v=J(g);return h&&v?Math.min(100,h/v*100):0},e.prototype.isInside=function(t,e){var r=this.state,n=r.target,i=r.pos1,a=r.pos2,o=r.pos3,s=r.pos4,u=r.targetClientRect;return!!n&&$([t,e],Z([i,a,s,o],u))},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props,i=!n.parentPosition&&!n.wrapperMoveable;i&&Xe(!0);var a=n.parentMoveable,o=this.state.target||n.target,s=this.getContainer(),u=a?a._rootContainer:this._rootContainer,l=Aa(this.controlBox,o,s,s,u||s,this._getRequestStyles());if(!o&&this._hasFirstTarget&&n.persistData){var c=ka(n.persistData);for(var f in c)l[f]=c[f]}i&&Xe(),this.updateState(l,!a&&r)},e.prototype.isDragging=function(t){var e,r,n=this.targetGesto,i=this.controlGesto;return(null==n?void 0:n.isFlag())?!t||!!(null===(e=n.getEventData()[t])||void 0===e?void 0:e.isEventStart):!!(null==i?void 0:i.isFlag())&&(!t||!!(null===(r=i.getEventData()[t])||void 0===r?void 0:r.isEventStart))},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,e=ai(this.state),r=_t(e,4),n=r[0],a=r[1],o=r[2],s=r[3],u=Xn(e),l=t.width,c=t.height,f=u.width,p=u.height,d=u.left,g=u.top,h=[t.left,t.top],v=i(h,t.origin);return{width:f,height:p,left:d,top:g,pos1:n,pos2:a,pos3:o,pos4:s,offsetWidth:l,offsetHeight:c,beforeOrigin:i(h,t.beforeOrigin),origin:v,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){var e;t&&"target"!==t||(!1===(null==(e=this.targetGesto)?void 0:e.isIdle())&&oi(this,!1),null==e||e.stop());t&&"control"!==t||(!1===(null==(e=this.controlGesto)?void 0:e.isIdle())&&oi(this,!0),null==e||e.stop())},e.prototype.getRotation=function(){var t=this.state;return function(t,e,r){var n=u(t,e)/Math.PI*180;return(n=r>=0?n:180-n)>=0?n:360+n}(t.pos1,t.pos2,t.direction)},e.prototype.request=function(t,e,r){void 0===e&&(e={});var n=this,i=n.props,a=i.parentMoveable||i.wrapperMoveable||n,o=a.props.ables,s=i.groupable,u=w(o,function(e){return e.name===t});if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var l=u.request(n),c=r||e.isInstant,f=l.isControl?"controlAbles":"targetAbles",p="".concat(s?"Group":"").concat(l.isControl?"Control":""),d=At([],_t(a[f]),!1),g={request:function(e){return Ta(n,d,["drag"],p,"",It(It({},l.request(e)),{requestAble:t,isRequest:!0}),c),g},requestEnd:function(){return Ta(n,d,["drag"],p,"End",It(It({},l.requestEnd()),{requestAble:t,isRequest:!0}),c),g}};return Ta(n,d,["drag"],p,"Start",It(It({},l.requestStart(e)),{requestAble:t,isRequest:!0}),c),c?g.request(e).requestEnd():g},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),e=this.props,r=e.padding,n=t.originalBeforeOrigin,a=t.transformOrigin,o=t.allMatrix,s=t.is3d,u=t.pos1,l=t.pos2,c=t.pos3,f=t.pos4,p=t.left,d=t.top,g=t.isPersisted,h=e.zoom||1;if(!r&&h<=1)return t.renderPoses=[u,l,c,f],void(t.renderLines=[[u,l],[l,f],[f,c],[c,u]]);var v=Ni(r||{}),m=v.left,b=v.top,x=v.bottom,S=v.right,y=s?4:3,E=[];E=g?a:this.controlBox&&e.groupable?n:i(n,[p,d]);var D=Q(y,tt(E.map(function(t){return-t}),y),o,tt(a,y)),C=Ei(D,u,[-m,-b],y),R=Ei(D,l,[S,-b],y),M=Ei(D,c,[-m,x],y),O=Ei(D,f,[S,x],y);t.renderPoses=[C,R,M,O],t.renderLines=[[C,R],[R,O],[O,M],[M,C]];var z=h/2;t.renderLines=[[Ei(D,u,[-m-z,-b],y),Ei(D,l,[S+z,-b],y)],[Ei(D,l,[S,-b-z],y),Ei(D,f,[S,x+z],y)],[Ei(D,f,[S+z,x],y),Ei(D,c,[-m-z,x],y)],[Ei(D,c,[-m,x+z],y),Ei(D,u,[-m,-b-z],y)]]},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,r=t.container,n=t.parentMoveable,i=this.state,a=i.target,o=i.container;if(a||e){this.updateAbles();var s=!vi(a,e);if(s||!vi(o,r)){var u=r||this.controlBox;u&&this.unsetAbles(),this.updateState({target:e,container:r}),!n&&u&&this.updateRect("End",!1,!1),this._isPropTargetChanged=s}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(t,e){var r=this.props;if(this._emitter.trigger(t,e),r.parentMoveable&&e.isRequest&&!e.isRequestChild)return r.parentMoveable.triggerEvent(t,e,!0);var n=r[t];return n&&n(e)},e.prototype.useCSS=function(t,e){var r=this.props.customStyledMap,n=t+e;return r[n]||(r[n]=et(t,e)),r[n]},e.prototype.getState=function(){var t,e=this.props;(e.target||(null===(t=e.targets)||void 0===t?void 0:t.length))&&(this._hasFirstTarget=!0);var r=this.controlBox,n=e.persistData,i=e.firstRenderState;if(i&&!r)return i;if(!this._hasFirstTarget&&n){var a=ka(n);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach(function(e){e.unset&&e.unset(t)})},e.prototype.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props.triggerAblesSimultaneously,n=this.getEnabledAbles(t),i="drag".concat(e,"Start"),a="pinch".concat(e,"Start"),o="drag".concat(e,"ControlStart"),s=hi(n,[i,a],r),u=hi(n,[o],r);this.enabledAbles=n,this.targetAbles=s,this.controlAbles=u},e.prototype.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var r=this.state;for(var n in t)r[n]=t[n]}},e.prototype.getEnabledAbles=function(t){void 0===t&&(t=this.props.ables);var e=this.props;return t.filter(function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])})},e.prototype.renderAbles=function(){var t,e,r,n,i=this,a=this.props.triggerAblesSimultaneously,o={createElement:U};return this.renderState={},(t=xi(hi(this.getEnabledAbles(),["render"],a).map(function(t){return(0,t.render)(i,o)||[]})).filter(function(t){return t}),e=function(t){return t.key},r=[],n={},t.forEach(function(i,a){var o=e(i,a,t),s=n[o];s||(s=[],n[o]=s,r.push(s)),s.push(i)}),r).map(function(t){return t[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){return this.getEnabledAbles().reduce(function(t,e){var r,n,i=null!==(n=null===(r=e.requestStyle)||void 0===r?void 0:r.call(e))&&void 0!==n?n:[];return At(At([],_t(t),!1),_t(i),!1)},At([],_t(this.props.requestStyles||[]),!1))},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.targetAbles.length,e=this.controlAbles.length,r=this._dragTarget;(!t&&this.targetGesto||this._isTargetChanged(!0))&&(si(this,!1),this.updateState({gestos:{}})),e||si(this,!0),r&&t&&!this.targetGesto&&(this.targetGesto=Pa(this,r,"")),!this.controlGesto&&e&&(this.controlGesto=Ga(this,"Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=Oi(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,e=t.zoom,r=t.hideDefaultLines,n=t.hideChildMoveableDefaultLines,i=t.parentMoveable;if(r||i&&n)return[];var a=this.getState(),o={createElement:U};return a.renderLines.map(function(t,r){return $e(o,"",t[0],t[1],e,"render-line-".concat(r))})},e.prototype._isTargetChanged=function(t){var e=this.props,r=e.dragTarget||e.target,n=this._prevOriginalDragTarget,i=this._prevDragArea,a=e.dragArea;return!a&&n!==r||(t||a)&&i!==a||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,r=this.events,n=y(r);if(this._isTargetChanged())for(var i in r){var a=r[i];a&&a.destroy(),r[i]=null}if(e){var o=this.enabledAbles;n.forEach(function(n){var i=hi(o,[n]),a=i.length>0,s=r[n];a?(s||(s=new Ia(e,t,n),r[n]=s),s.setAbles(i)):s&&(s.destroy(),r[n]=null)})}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=Oi(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=Oi(t,!0)),this._viewContainer&&this._changeAbleViewClassNames(At(At([],_t(this._getAbleViewClassNames()),!1),[this.isDragging()?Zi:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var e=this._viewContainer,r=bi(t.filter(Boolean),function(t){return t}).map(function(t){return _t(t,1)[0]}),n=this._viewClassNames,i=rt(n,r),a=i.removed,o=i.added;a.forEach(function(t){nt(e,n[t])}),o.forEach(function(t){M(e,r[t])}),this._viewClassNames=r},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map(function(e){var r;return(null===(r=e.viewClassName)||void 0===r?void 0:r.call(e,t))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var e=this;void 0===t&&(t="");var r=this.getEnabledAbles(),n=this.targetGesto,i=this.controlGesto,a=(null==n?void 0:n.isFlag())?n.getEventData():{},o=(null==i?void 0:i.isFlag())?i.getEventData():{};return r.map(function(r){var n,i,s,u=r.name,l=(null===(n=r.className)||void 0===n?void 0:n.call(r,e))||"";return((null===(i=a[u])||void 0===i?void 0:i.isEventStart)||(null===(s=o[u])||void 0===s?void 0:s.isEventStart))&&(l+=" ".concat(On("".concat(u).concat(t,"-dragging")))),l.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var e,r=this.props,n=r.target,i=it(this.getControlBoxElement());if(i.ResizeObserver&&n&&r.useResizeObserver){if(t.target!==n||!this._reiszeObserver){var a=new i.ResizeObserver(this.checkUpdateRect);a.observe(n,{box:"border-box"}),this._reiszeObserver=a}}else null===(e=this._reiszeObserver)||void 0===e||e.disconnect()},e.prototype._updateMutationObserver=function(t){var e,r=this,n=this.props,i=n.target,a=it(this.getControlBoxElement());if(a.MutationObserver&&i&&n.useMutationObserver){if(t.target!==i||!this._mutationObserver){var o=new a.MutationObserver(function(t){var e,n;try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),a=i.next();!a.done;a=i.next()){var o=a.value;"attributes"===o.type&&"style"===o.attributeName&&r.checkUpdateRect()}}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}});o.observe(i,{attributes:!0}),this._mutationObserver=o}}else null===(e=this._mutationObserver)||void 0===e||e.disconnect()},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:zn,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(Et),Na={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var r,n=t.props,i=n.targets||[],a=t.getState(),o=a.left,u=a.top,l=a.isPersisted,c=n.zoom||1,f=t.renderGroupRects,p=(null===(r=n.persistData)||void 0===r?void 0:r.children)||[];l?i=p.map(function(){return null}):p=[];var d=_i(t,"parentPosition",[o,u],function(t){return t.join(",")}),g=_i(t,"requestStyles",t.getRequestChildStyles(),function(t){return t.join(",")});return t.moveables=t.moveables.slice(0,i.length),At(At([],_t(i.map(function(r,i){return e.createElement(Fa,{key:"moveable"+i,ref:C(t,"moveables",i),target:r,origin:!1,requestStyles:g,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,u],persistData:p[i],zoom:c})})),!1),_t(xi(f.map(function(t,r){var n=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map(function(t,i){var a=_t(t,2),o=a[0],u=a[1];return $e(e,"",s(n[o],d),s(n[u],d),c,"group-rect-".concat(r,"-").concat(i))})}))),!1)}},Wa=kt("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.props.target,n=e.inputEvent,i=e.inputTarget,a=!t.isMoveableElement(i)&&t.controlBox.contains(i);if(n&&i&&!e.isDrag&&!t.isMoveableElement(i)&&!a){var o=r.contains(i);di(t,"onClick",ci(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.inputTarget;if(r&&n&&!e.isDrag&&!t.isMoveableElement(n)&&e.datas.inputTarget!==n){var i=t.props.targets,a=i.indexOf(n),o=a>-1,s=!1;-1===a&&(s=(a=P(i,function(t){return t.contains(n)}))>-1),di(t,"onClickGroup",ci(t,e,{isDouble:e.isDouble,targets:i,inputTarget:n,targetIndex:a,isTarget:o,containsTarget:s,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function qa(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),It(It({},t),{datas:e})}var Ha=kt("edgeDraggable",{css:[".edge.edgeDraggable.line {\ncursor: move;\n}"],render:function(t,e){var r=t.props,n=r.edgeDraggable;return n?Qe(e,"edgeDraggable",n,t.getState().renderPoses,r.zoom):[]},dragCondition:function(t,e){var r,i=t.props,a=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!(!i.edgeDraggable||!a)&&(!i.draggable&&n(a,On("direction"))&&n(a,On("edge"))&&n(a,On("edgeDraggable")))},dragStart:function(t,e){return jr.dragStart(t,qa(e))},drag:function(t,e){return jr.drag(t,qa(e))},dragEnd:function(t,e){return jr.dragEnd(t,qa(e))},dragGroupCondition:function(t,e){var r,i=t.props,a=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!(!i.edgeDraggable||!a)&&(!i.draggable&&n(a,On("direction"))&&n(a,On("line")))},dragGroupStart:function(t,e){return jr.dragGroupStart(t,qa(e))},dragGroup:function(t,e){return jr.dragGroup(t,qa(e))},dragGroupEnd:function(t,e){return jr.dragGroupEnd(t,qa(e))},unset:function(t){return jr.unset(t)}}),Ya={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Xa=[Oa,ra,Mn,Wi,jr,Ha,Kr,Hi,Li,nn,ea,na,Qi,Ea,ya,Ma,Na,Ya,Wa,$i,za],La=Xa.reduce(function(e,r){return(r.events||[]).forEach(function(r){t(e,r)}),e},[]),ja=Xa.reduce(function(e,r){return(r.props||[]).forEach(function(r){t(e,r)}),e},[]);function Va(t,e){var r=_t(t,3),n=r[0],i=r[1],a=r[2];return(n*e[0]+i*e[1]+a)/Math.sqrt(n*n+i*i)}function Ua(t,e){var r=_t(t,2),n=r[0],i=r[1];return-n*e[0]-i*e[1]}function Za(t,e){return Math.max.apply(Math,At([],_t(t.map(function(t){var r=_t(t,4),n=r[0],i=r[1],a=r[2],o=r[3];return Math.max(n[e],i[e],a[e],o[e])})),!1))}function Ka(t,e){return Math.min.apply(Math,At([],_t(t.map(function(t){var r=_t(t,4),n=r[0],i=r[1],a=r[2],o=r[3];return Math.min(n[e],i[e],a[e],o[e])})),!1))}function Ja(t,e){var r=e.map(function(e){if(d(e)){var r=Ja(t,e),n=r.length;return n>1?r:1===n?r[0]:null}var i=w(t,function(t){return t.manager.props.target===e});return i?(i.finded=!0,i.manager):null}).filter(Boolean);return 1===r.length&&d(r[0])?r[0]:r}var $a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new Dt,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return Bt(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,r){var n;void 0===r&&(r=!0);var a=this.state;if(this.controlBox&&!a.isPersisted){Xe(!0),this.moveables.forEach(function(e){e.updateRect(t,!1,!1)});var u=this.props,l=this.moveables,c=a.target||u.target,f=l.map(function(t){return{finded:!1,manager:t}}),p=this.props.targetGroups||[],g=Ja(f,p),h=u.useDefaultGroupRotate;g.push.apply(g,At([],_t(f.filter(function(t){return!t.finded}).map(function(t){return t.manager})),!1));var v=[],m=!e||""!==t&&u.updateGroup,b=u.defaultGroupRotate||0;if(!this._hasFirstTargets){var x=null===(n=u.persistData)||void 0===n?void 0:n.rotation;null!=x&&(b=x)}var S=function t(e,r,n){var i=e.map(function(e){if(d(e)){var n=t(e,r),i=[n.pos1,n.pos2,n.pos3,n.pos4];return v.push(n),{poses:i,rotation:n.rotation}}return{poses:ai(e.state),rotation:e.getRotation()}}),a=i.map(function(t){return t.rotation}),s=0,u=a[0],l=a.every(function(t){return Math.abs(u-t)<.1});s=m?!h&&l?u:b:h||n||!l?r:u;var c=function(t,e){var r,n,i,a=[0,0],s=[0,0],u=[0,0],l=[0,0],c=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:u,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:c,height:f,rotation:e};var p=o(e,ie);if(p%90){var d=p/180*Math.PI,g=Math.tan(d),h=-1/g,v=[oe,se],m=[[0,0],[0,0]],b=[oe,se],x=[[0,0],[0,0]];t.forEach(function(t){t.forEach(function(t){var e=Va([-g,1,0],t),r=Va([-h,1,0],t);v[0]>e&&(m[0]=t,v[0]=e),v[1]<e&&(m[1]=t,v[1]=e),b[0]>r&&(x[0]=t,b[0]=r),b[1]<r&&(x[1]=t,b[1]=r)})});var S=_t(m,2),y=S[0],E=S[1],D=_t(x,2),C=D[0],R=D[1],M=[-g,1,Ua([-g,1],y)],O=[-g,1,Ua([-g,1],E)],z=[-h,1,Ua([-h,1],C)],T=[-h,1,Ua([-h,1],R)];a=(r=_t([[M,z],[M,T],[O,z],[O,T]].map(function(t){var e=_t(t,2),r=e[0],n=e[1];return Mt(r,n)[0]}),4))[0],s=r[1],u=r[2],l=r[3],c=b[1]-b[0],f=v[1]-v[0]}else{var w=Ka(t,0),P=Ka(t,1),G=Za(t,0),B=Za(t,1);a=[w,P],s=[G,P],u=[w,B],l=[G,B],c=G-w,f=B-P,p%180&&(a=(n=_t([u,a,l,s],4))[0],s=n[1],u=n[2],l=n[3],c=B-P,f=G-w)}p%360>180&&(a=(i=_t([l,u,s,a],4))[0],s=i[1],u=i[2],l=i[3]);var I=j([a,s,u,l]);return{pos1:a,pos2:s,pos3:u,pos4:l,width:c,height:f,minX:I.minX,minY:I.minY,maxX:I.maxX,maxY:I.maxY,rotation:e}}(i.map(function(t){return t.poses}),s);return c}(g,this.rotation,!0);m&&(this.rotation=S.rotation,this.transformOrigin=u.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=p,this.renderGroupRects=v;var y,E,D,C,R,M=this.transformOrigin,O=this.rotation,z=this.scale,T=S.width,w=S.height,P=S.minX,G=S.minY,B=(y=[[0,0],[T,0],[0,w],[T,w]],E=Bi(M,T,w),D=this.rotation/180*Math.PI,C=y.map(function(t){return s(t,E)}),R=C.map(function(t){return W(t,D)}),{prev:C,next:R,result:R.map(function(t){return i(t,E)})}),I=j(B.result),_=I.minX,A=I.minY,k=" rotate(".concat(O,"deg)")+" scale(".concat(Ai(z[0]),", ").concat(Ai(z[1]),")"),F="translate(".concat(-_,"px, ").concat(-A,"px)").concat(k);this.controlBox.style.transform="translate3d(".concat(P,"px, ").concat(G,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(M,";")+"width:".concat(T,"px;height:").concat(w,"px;")+"transform: ".concat(F),a.width=T,a.height=w;var N=this.getContainer(),q=Aa(this.controlBox,c,this.controlBox,this.getContainer(),this._rootContainer||N,[]),H=[q.left,q.top],Y=_t(ai(q),4),X=Y[0],L=Y[1],V=Y[2],U=Y[3],Z=j([X,L,V,U]),K=[Z.minX,Z.minY],J=Ai(z[0]*z[1]);q.pos1=s(X,K),q.pos2=s(L,K),q.pos3=s(V,K),q.pos4=s(U,K),q.left=P-q.left+K[0],q.top=G-q.top+K[1],q.origin=s(i(H,q.origin),K),q.beforeOrigin=s(i(H,q.beforeOrigin),K),q.originalBeforeOrigin=i(H,q.originalBeforeOrigin),q.transformOrigin=s(i(H,q.transformOrigin),K),c.style.transform="translate(".concat(-_-K[0],"px, ").concat(-A-K[1],"px)")+k,Xe(),this.updateState(It(It({},q),{posDelta:K,direction:J,beforeDirection:J}),r)}},e.prototype.getRect=function(){return It(It({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.triggerEvent=function(e,r,n){if(n||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,r);this._emitter.trigger(e,r)},e.prototype.getRequestChildStyles=function(){return this.getEnabledAbles().reduce(function(t,e){var r,n,i=null!==(n=null===(r=e.requestChildStyle)||void 0===r?void 0:r.call(e))&&void 0!==n?n:[];return At(At([],_t(t),!1),_t(i),!1)},[])},e.prototype.getMoveables=function(){return At([],_t(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,At(At([],_t(this.props.ables),!1),[Na],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Oi(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,e=this.props,r=this._prevDragTarget,n=e.dragTarget||this.areaElement,i=e.targets,a=this.differ.update(i),o=a.added,s=a.changed,u=a.removed,l=o.length||u.length;(l||this._prevOriginalDragTarget!==this._originalDragTarget)&&(si(this,!1),si(this,!0),this.updateState({gestos:{}})),r!==n&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=Pa(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Ga(this,"GroupControl")));var c=!vi(t.container,e.container);c&&(t.container=e.container),(c||l||this.transformOrigin!==(e.defaultGroupOrigin||"50% 50%")||s.length||i.length&&!Ii(this._targetGroups,e.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!l},e.prototype._updateObserver=function(){},e.defaultProps=It(It({},Fa.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Fa),Qa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}return Bt(e,t),e.prototype.render=function(){var t,e=this,r=this.props,n=r.cspNonce,i=r.cssStyled,a=r.persistData,o=r.targets||[],s=o.length,u=this.isUnmounted||!s,l=null!==(t=null==a?void 0:a.children)&&void 0!==t?t:[];return u&&!s&&l.length?o=l.map(function(){return null}):u||(l=[]),U(i,{cspNonce:n,ref:O(this,"controlBox"),className:On("control-box")},o.map(function(t,n){var i,a,o=null!==(a=null===(i=r.individualGroupableProps)||void 0===i?void 0:i.call(r,t,n))&&void 0!==a?a:{};return U(Fa,It({key:"moveable"+n,ref:C(e,"moveables",n)},r,o,{target:t,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:l[n]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0),Xe(!0),this.moveables.forEach(function(n){n.updateRect(t,e,r)}),Xe()},e.prototype.getRect=function(){return It(It({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.request=function(t,e,r){void 0===e&&(e={});var n=this.moveables.map(function(r){return r.request(t,It(It({},e),{isInstant:!1}),!1)}),i={request:function(t){return n.forEach(function(e){return e.request(t)}),this},requestEnd:function(){return n.forEach(function(t){return t.requestEnd()}),this}};return r||e.isInstant?i.request(e).requestEnd():i},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var r=e,n=w(this.moveables,function(t){var e=t.getTargets()[0],n=t.getControlBoxElement(),i=t.getDragElement();return!(!e||!i)&&(i===r||i.contains(r)||i!==e&&e===r||e.contains(r)||n===r||n.contains(r))});return n&&n.dragStart(t,e),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return At([],_t(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(Fa);function to(t,e){var r=[];return t.forEach(function(t){t&&(p(t)?e[t]&&r.push.apply(r,At([],_t(e[t]),!1)):d(t)?r.push.apply(r,At([],_t(to(t,e)),!1)):r.push(t))}),r}function eo(t,e){var r=[];return t.forEach(function(t){t&&(p(t)?e[t]&&r.push.apply(r,At([],_t(e[t]),!1)):d(t)?r.push(eo(t,e)):r.push(t))}),r}function ro(t,e){return t.length!==e.length||t.some(function(t,r){var n=e[r];return!(!t&&!n)&&(t!=n&&(!d(t)||!d(n)||ro(t,n)))})}var no=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bt(e,t),e.defaultAbles=Xa,e}(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new Dt,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}return Bt(e,t),e.makeStyled=function(){var t={};this.getTotalAbles().forEach(function(e){var r=e.css;r&&r.forEach(function(e){t[e]=!0})});var e=y(t).join("\n");this.defaultStyled=et("div",Ct(Qt,ee+e))},e.getTotalAbles=function(){return At([ra,Na,Ya,$i],_t(this.defaultAbles),!1)},e.prototype.render=function(){var t,e=this.constructor;e.defaultStyled||e.makeStyled();var r=this.props,n=r.ables,i=r.props,a=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(r,["ables","props"]),o=_t(this._updateRefs(!0),2),s=o[0],u=o[1],l=to(s,u),c=l.length>1,f=At(At([],_t(e.getTotalAbles()),!1),_t(n||[]),!1),p=It(It(It({},a),i||{}),{ables:f,cssStyled:e.defaultStyled,customStyledMap:e.customStyledMap});this._elementTargets=l;var d=null,g=this.moveable,h=a.persistData;if((null==h?void 0:h.children)&&(c=!0),a.individualGroupable)return U(Qa,It({key:"individual-group",ref:O(this,"moveable")},p,{target:null,targets:l}));if(c){var v=eo(s,u);if(g&&!g.props.groupable&&!g.props.individualGroupable){var m=g.props.target;m&&l.indexOf(m)>-1&&(d=It({},g.state))}return U($a,It({key:"group",ref:O(this,"moveable")},p,null!==(t=a.groupableProps)&&void 0!==t?t:{},{target:null,targets:l,targetGroups:v,firstRenderState:d}))}var b=l[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var x=g.moveables||[],S=w(x,function(t){return t.props.target===b});S&&(d=It({},S.state))}return U(Fa,It({key:"single",ref:O(this,"moveable")},p,{target:b,firstRenderState:d}))},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var t,e=this;return this._onChangeTargets=function(){e._onChangeTargets=null,t()},new Promise(function(e){t=e})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(t){var e=this.refTargets,r=zi(this.props.target||this.props.targets),n="undefined"!=typeof document,i=ro(e,r),a=this.selectorMap,o={};return this.refTargets.forEach(function t(e){p(e)?a[e]?o[e]=a[e]:n&&(i=!0,o[e]=[].slice.call(document.querySelectorAll(e))):d(e)&&e.forEach(t)}),this._tmpRefTargets=r,this._tmpSelectorMap=o,[r,o,!t&&i]},e.prototype._checkChangeTargets=function(){var t,e,r;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var n=this._differ.update(this._elementTargets),i=n.added,a=n.removed;(i.length||a.length)&&(null===(e=(t=this.props).onChangeTargets)||void 0===e||e.call(t,{moveable:this.moveable,targets:this._elementTargets}),null===(r=this._onChangeTargets)||void 0===r||r.call(this));var o=_t(this._updateRefs(),3),s=o[0],u=o[1],l=o[2];this.refTargets=s,this.selectorMap=u,l&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,r,n){var i,a=arguments.length,o=a<3?e:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,r,o):i(e,r))||o);a>3&&o&&Object.defineProperty(e,r,o)}([Rt(fe)],e.prototype,"moveable",void 0),e}(Et)),io=function(t,e){return(io=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function ao(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}io(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var oo=function(){return oo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},oo.apply(this,arguments)};var so=function(t){function e(e){var r=t.call(this,e)||this;return r.state={},r.state=r.props,r}return ao(e,t),e.prototype.render=function(){return U(no,oo({ref:O(this,"moveable")},this.state))},e}(wt),uo=ja,lo=fe,co=La,fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ao(e,t),e}(function(t){function e(e,r){void 0===r&&(r={});var n=t.call(this)||this;n.containerProvider=null,n.selfElement=null,n._warp=!1;var i,a=oo({},r),o={};co.forEach(function(t){o[Ot("on ".concat(t))]=function(e){return n.trigger(t,e)}}),r.warpSelf?(delete r.warpSelf,n._warp=!0,i=e):(i=zt(e).createElement("div"),e.appendChild(i)),n.containerProvider=Tt(U(so,oo({ref:O(n,"innerMoveable")},a,o)),i),n.selfElement=i;var s=a.target;return d(s)&&s.length>1&&n.updateRect(),n}ao(e,t);var r=e.prototype;return r.setState=function(t,e){this.innerMoveable.setState(t,e)},r.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},r.dragStart=function(t,e){void 0===e&&(e=t.target),this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t,e)},r.destroy=function(){var t,e=this.selfElement;Tt(null,e,this.containerProvider),this._warp||null===(t=null==e?void 0:e.parentElement)||void 0===t||t.removeChild(e),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,r,n){var i,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,r,o):i(e,r))||o);return a>3&&o&&Object.defineProperty(e,r,o),o}([Pt(lo,function(t,e){t[e]||(t[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.getMoveable();if(n&&n[e])return n[e].apply(n,t)})}),Pt(uo,function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var r;this.setState(((r={})[e]=t,r))},enumerable:!0,configurable:!0})})],e),e}(lt));export{fo as M};